var hn=Object.defineProperty;var gn=(t,e,n)=>e in t?hn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Je=(t,e,n)=>(gn(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function I(){}const Ut=t=>t;function mn(t,e){for(const n in e)t[n]=e[n];return t}function Kt(t){return t()}function ut(){return Object.create(null)}function oe(t){t.forEach(Kt)}function Ae(t){return typeof t=="function"}function N(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Re;function dt(t,e){return t===e?!0:(Re||(Re=document.createElement("a")),Re.href=e,t===Re.href)}function _n(t){return Object.keys(t).length===0}function pn(t,...e){if(t==null){for(const l of e)l(void 0);return I}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function se(t,e,n){t.$$.on_destroy.push(pn(e,n))}function tt(t,e,n,l){if(t){const s=Xt(t,e,n,l);return t[0](s)}}function Xt(t,e,n,l){return t[1]&&l?mn(n.ctx.slice(),t[1](l(e))):n.ctx}function nt(t,e,n,l){if(t[2]&&l){const s=t[2](l(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const a=[],i=Math.max(e.dirty.length,s.length);for(let r=0;r<i;r+=1)a[r]=e.dirty[r]|s[r];return a}return e.dirty|s}return e.dirty}function lt(t,e,n,l,s,a){if(s){const i=Xt(e,n,l,a);t.p(i,s)}}function st(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function re(t){return t??""}function Qt(t){return t&&Ae(t.destroy)?t.destroy:I}const Zt=typeof window<"u";let xt=Zt?()=>window.performance.now():()=>Date.now(),at=Zt?t=>requestAnimationFrame(t):I;const ye=new Set;function en(t){ye.forEach(e=>{e.c(t)||(ye.delete(e),e.f())}),ye.size!==0&&at(en)}function tn(t){let e;return ye.size===0&&at(en),{promise:new Promise(n=>{ye.add(e={c:t,f:n})}),abort(){ye.delete(e)}}}function g(t,e){t.appendChild(e)}function nn(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function $n(t){const e=b("style");return e.textContent="/* empty */",bn(nn(t),e),e.sheet}function bn(t,e){return g(t.head||t,e),e.sheet}function S(t,e,n){t.insertBefore(e,n||null)}function H(t){t.parentNode&&t.parentNode.removeChild(t)}function ge(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function F(t){return document.createTextNode(t)}function M(){return F(" ")}function ln(){return F("")}function x(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function m(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function vn(t){return Array.from(t.childNodes)}function te(t,e){e=""+e,t.data!==e&&(t.data=e)}function Fe(t,e){t.value=e??""}function ze(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function sn(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}const Le=new Map;let Ee=0;function kn(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function yn(t,e){const n={stylesheet:$n(e),rules:{}};return Le.set(t,n),n}function Xe(t,e,n,l,s,a,i,r=0){const o=16.666/l;let c=`{
`;for(let v=0;v<=1;v+=o){const $=e+(n-e)*a(v);c+=v*100+`%{${i($,1-$)}}
`}const f=c+`100% {${i(n,1-n)}}
}`,u=`__svelte_${kn(f)}_${r}`,d=nn(t),{stylesheet:_,rules:h}=Le.get(d)||yn(d,t);h[u]||(h[u]=!0,_.insertRule(`@keyframes ${u} ${f}`,_.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${u} ${l}ms linear ${s}ms 1 both`,Ee+=1,u}function Qe(t,e){const n=(t.style.animation||"").split(", "),l=n.filter(e?a=>a.indexOf(e)<0:a=>a.indexOf("__svelte")===-1),s=n.length-l.length;s&&(t.style.animation=l.join(", "),Ee-=s,Ee||wn())}function wn(){at(()=>{Ee||(Le.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&H(e)}),Le.clear())})}let Ce;function Se(t){Ce=t}function an(){if(!Ce)throw new Error("Function called outside component initialization");return Ce}function Hn(t){an().$$.on_mount.push(t)}function ce(){const t=an();return(e,n,{cancelable:l=!1}={})=>{const s=t.$$.callbacks[e];if(s){const a=sn(e,n,{cancelable:l});return s.slice().forEach(i=>{i.call(t,a)}),!a.defaultPrevented}return!0}}const ke=[],ht=[];let we=[];const gt=[],Sn=Promise.resolve();let Ze=!1;function Mn(){Ze||(Ze=!0,Sn.then(rn))}function he(t){we.push(t)}const Ge=new Set;let be=0;function rn(){if(be!==0)return;const t=Ce;do{try{for(;be<ke.length;){const e=ke[be];be++,Se(e),Cn(e.$$)}}catch(e){throw ke.length=0,be=0,e}for(Se(null),ke.length=0,be=0;ht.length;)ht.pop()();for(let e=0;e<we.length;e+=1){const n=we[e];Ge.has(n)||(Ge.add(n),n())}we.length=0}while(ke.length);for(;gt.length;)gt.pop()();Ze=!1,Ge.clear(),Se(t)}function Cn(t){if(t.fragment!==null){t.update(),oe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(he)}}function An(t){const e=[],n=[];we.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),we=e}let He;function on(){return He||(He=Promise.resolve(),He.then(()=>{He=null})),He}function Me(t,e,n){t.dispatchEvent(sn(`${e?"intro":"outro"}${n}`))}const Oe=new Set;let fe;function ne(){fe={r:0,c:[],p:fe}}function le(){fe.r||oe(fe.c),fe=fe.p}function p(t,e){t&&t.i&&(Oe.delete(t),t.i(e))}function k(t,e,n,l){if(t&&t.o){if(Oe.has(t))return;Oe.add(t),fe.c.push(()=>{Oe.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}const cn={duration:0};function Rn(t,e,n){const l={direction:"in"};let s=e(t,n,l),a=!1,i,r,o=0;function c(){i&&Qe(t,i)}function f(){const{delay:d=0,duration:_=300,easing:h=Ut,tick:y=I,css:v}=s||cn;v&&(i=Xe(t,0,1,_,d,h,v,o++)),y(0,1);const $=xt()+d,z=$+_;r&&r.abort(),a=!0,he(()=>Me(t,!0,"start")),r=tn(B=>{if(a){if(B>=z)return y(1,0),Me(t,!0,"end"),c(),a=!1;if(B>=$){const L=h((B-$)/_);y(L,1-L)}}return a})}let u=!1;return{start(){u||(u=!0,Qe(t),Ae(s)?(s=s(l),on().then(f)):f())},invalidate(){u=!1},end(){a&&(c(),a=!1)}}}function je(t,e,n,l){let a=e(t,n,{direction:"both"}),i=l?0:1,r=null,o=null,c=null,f;function u(){c&&Qe(t,c)}function d(h,y){const v=h.b-i;return y*=Math.abs(v),{a:i,b:h.b,d:v,duration:y,start:h.start,end:h.start+y,group:h.group}}function _(h){const{delay:y=0,duration:v=300,easing:$=Ut,tick:z=I,css:B}=a||cn,L={start:xt()+y,b:h};h||(L.group=fe,fe.r+=1),"inert"in t&&(h?f!==void 0&&(t.inert=f):(f=t.inert,t.inert=!0)),r||o?o=L:(B&&(u(),c=Xe(t,i,h,v,y,$,B)),h&&z(0,1),r=d(L,v),he(()=>Me(t,h,"start")),tn(V=>{if(o&&V>o.start&&(r=d(o,v),o=null,Me(t,r.b,"start"),B&&(u(),c=Xe(t,i,r.b,r.duration,0,$,a.css))),r){if(V>=r.end)z(i=r.b,1-i),Me(t,r.b,"end"),o||(r.b?u():--r.group.r||oe(r.group.c)),r=null;else if(V>=r.start){const D=V-r.start;i=r.a+r.d*$(D/r.duration),z(i,1-i)}}return!!(r||o)}))}return{run(h){Ae(a)?on().then(()=>{a=a({direction:h?"in":"out"}),_(h)}):_(h)},end(){u(),r=o=null}}}function U(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function R(t){t&&t.c()}function C(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),he(()=>{const a=t.$$.on_mount.map(Kt).filter(Ae);t.$$.on_destroy?t.$$.on_destroy.push(...a):oe(a),t.$$.on_mount=[]}),s.forEach(he)}function A(t,e){const n=t.$$;n.fragment!==null&&(An(n.after_update),oe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function zn(t,e){t.$$.dirty[0]===-1&&(ke.push(t),Mn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(t,e,n,l,s,a,i,r=[-1]){const o=Ce;Se(t);const c=t.$$={fragment:null,ctx:[],props:a,update:I,not_equal:s,bound:ut(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:ut(),dirty:r,skip_bound:!1,root:e.target||o.$$.root};i&&i(c.root);let f=!1;if(c.ctx=n?n(t,e.props||{},(u,d,..._)=>{const h=_.length?_[0]:d;return c.ctx&&s(c.ctx[u],c.ctx[u]=h)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](h),f&&zn(t,u)),d}):[],c.update(),f=!0,oe(c.before_update),c.fragment=l?l(c.ctx):!1,e.target){if(e.hydrate){const u=vn(e.target);c.fragment&&c.fragment.l(u),u.forEach(H)}else c.fragment&&c.fragment.c();e.intro&&p(t.$$.fragment),C(t,e.target,e.anchor),rn()}Se(o)}class q{constructor(){Je(this,"$$");Je(this,"$$set")}$destroy(){A(this,1),this.$destroy=I}$on(e,n){if(!Ae(n))return I;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!_n(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Pn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Pn);const ve=[];function me(t,e=I){let n;const l=new Set;function s(r){if(N(t,r)&&(t=r,n)){const o=!ve.length;for(const c of l)c[1](),ve.push(c,t);if(o){for(let c=0;c<ve.length;c+=2)ve[c][0](ve[c+1]);ve.length=0}}}function a(r){s(r(t))}function i(r,o=I){const c=[r,o];return l.add(c),l.size===1&&(n=e(s,a)||I),r(t),()=>{l.delete(c),l.size===0&&n&&(n(),n=null)}}return{set:s,update:a,subscribe:i}}const j=(t=1,e=6)=>{const n=[];for(let l=0;l<t;l++){const s=Math.floor(Math.random()*e)+1;n.push(s)}return n.reduce((l,s)=>l+s,0)},Tn=()=>{const{subscribe:t,set:e,update:n}=me([{key:"4",value:4,count:0},{key:"6",value:6,count:0},{key:"8",value:8,count:0},{key:"10",value:10,count:0},{key:"12",value:12,count:0},{key:"20",value:20,count:0}]);return{subscribe:t,set:e,roll:l=>n(s=>(s.find(a=>a.key===l).count+=1,s.find(a=>a.key===l).value=j(1,+l),[...s]))}},Ye=Tn();function fn(t){const e=t-1;return e*e*e+1}function On(t){return t*t*t*t*t}function Ie(t){return--t*t*t*t*t+1}function Ne(t,{delay:e=0,duration:n=400,easing:l=fn,axis:s="y"}={}){const a=getComputedStyle(t),i=+a.opacity,r=s==="y"?"height":"width",o=parseFloat(a[r]),c=s==="y"?["top","bottom"]:["left","right"],f=c.map($=>`${$[0].toUpperCase()}${$.slice(1)}`),u=parseFloat(a[`padding${f[0]}`]),d=parseFloat(a[`padding${f[1]}`]),_=parseFloat(a[`margin${f[0]}`]),h=parseFloat(a[`margin${f[1]}`]),y=parseFloat(a[`border${f[0]}Width`]),v=parseFloat(a[`border${f[1]}Width`]);return{delay:e,duration:n,easing:l,css:$=>`overflow: hidden;opacity: ${Math.min($*20,1)*i};${r}: ${$*o}px;padding-${c[0]}: ${$*u}px;padding-${c[1]}: ${$*d}px;margin-${c[0]}: ${$*_}px;margin-${c[1]}: ${$*h}px;border-${c[0]}-width: ${$*y}px;border-${c[1]}-width: ${$*v}px;`}}function Dn(t,{delay:e=0,duration:n=400,easing:l=fn,start:s=0,opacity:a=0}={}){const i=getComputedStyle(t),r=+i.opacity,o=i.transform==="none"?"":i.transform,c=1-s,f=r*(1-a);return{delay:e,duration:n,easing:l,css:(u,d)=>`
			transform: ${o} scale(${1-c*d});
			opacity: ${r-f*d}
		`}}function mt(t,e,n){const l=t.slice();return l[5]=e[n],l[7]=n,l}function _t(t){let e,n=t[5].value+"",l,s;return{c(){e=b("span"),l=F(n),m(e,"class","svelte-1yf6ssf")},m(a,i){S(a,e,i),g(e,l)},p(a,i){i&1&&n!==(n=a[5].value+"")&&te(l,n)},i(a){a&&(s||he(()=>{s=Rn(e,Dn,{delay:150,duration:200,easing:On}),s.start()}))},o:I,d(a){a&&H(e)}}}function pt(t){let e,n=t[5].count,l,s,a,i,r=_t(t);function o(){return t[3](t[5],t[7])}return{c(){e=b("button"),r.c(),l=M(),m(e,"class",s=re(`dice d${t[5].key}${t[1]===t[7]?" green":""}`)+" svelte-1yf6ssf")},m(c,f){S(c,e,f),r.m(e,null),g(e,l),a||(i=x(e,"click",o),a=!0)},p(c,f){t=c,f&1&&N(n,n=t[5].count)?(ne(),k(r,1,1,I),le(),r=_t(t),r.c(),p(r,1),r.m(e,l)):r.p(t,f),f&3&&s!==(s=re(`dice d${t[5].key}${t[1]===t[7]?" green":""}`)+" svelte-1yf6ssf")&&m(e,"class",s)},d(c){c&&H(e),r.d(c),a=!1,i()}}}function Fn(t){let e,n=U(t[0]),l=[];for(let s=0;s<n.length;s+=1)l[s]=pt(mt(t,n,s));return{c(){e=b("div");for(let s=0;s<l.length;s+=1)l[s].c();m(e,"class","dice-list svelte-1yf6ssf")},m(s,a){S(s,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(s,[a]){if(a&7){n=U(s[0]);let i;for(i=0;i<n.length;i+=1){const r=mt(s,n,i);l[i]?l[i].p(r,a):(l[i]=pt(r),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},i:I,o:I,d(s){s&&H(e),ge(l,s)}}}function Ln(t,e,n){let l;se(t,Ye,o=>n(4,l=o));let s=l;Ye.subscribe(o=>n(0,s=o));let a;const i=(o,c)=>{Ye.roll(o),n(1,a=c)};return[s,a,i,(o,c)=>i(o.key,c)]}class En extends q{constructor(e){super(),W(this,e,Ln,Fn,N,{})}}const jn=()=>{const{subscribe:t,set:e,update:n}=me("");return{subscribe:t,set:e,change:l=>n(s=>(s=l,Y(),s))}},Ve=jn(),In=t=>{let e;ie.subscribe(l=>e=l[`${t}Max`]);const n=j(1,20);return n===1||n<=e},Ue=(t,e=1)=>{let n;X.subscribe(s=>n=s.hpMax);const l=j(e,6);t!=="add"?l>n?(X.setMaxHp(l),Q.addHistory(`HP has been set to ${l}.`)):Q.addHistory("HP roll result was too low, no upgrade."):(X.setMaxHp(n+l),Q.addHistory(`${l} has been added to HP.`))},Ke=(t,e)=>{const n=e||["","str","dex","wil"][j(1,3)];let l;ie.subscribe(a=>l=a[`${n}Max`]);const s=j(3,6);if(t!=="add")l<s?(ie.setMaxAbility(n,s),Q.addHistory(`${n.toUpperCase()} has been set to ${s}.`)):Q.addHistory(`${n.toUpperCase()} roll result was too low, no upgrade.`);else if(In(n)){const a=j(1,4);X.setMaxHp(l+a),Q.addHistory(`${a} has been added to ${n.toUpperCase()}.`)}else Q.addHistory(`${n.toUpperCase()} save was failed, no upgrade.`)},Nn=()=>{const t=[],{subscribe:e,set:n,update:l}=me([...t]);return{subscribe:e,set:n,add:s=>l(a=>{switch(s){case 1:a=[...a,{content:`Lasting Scar on ${["","Neck","Hands","Eye","Chest","Legs","Ear"][j(1,6)]}.`}],Ue("change",1);break;case 2:a=[...a,{content:"Rattling Blow. You’re disoriented and shaken. Describe how you refocus."}],Ue("change",1);break;case 3:a=[...a,{content:"Walloped: You’re sent flying and land flat on your face, winded. You are deprived until you rest for a few hours, when resolve.",resolve:{action:"increaseHP",type:"add",num:1}}];break;case 4:a=[...a,{content:`Broken Limb: ${["","Leg","Leg","Arm","Arm","Rib","Skull"][j(1,6)]}. Once mended, resolve.`,resolve:{action:"increaseHP",type:"change",num:2}}];break;case 5:a=[...a,{content:"Diseased: You’re afflicted with a gross, uncomfortable infection. When you get over it, resolve.",resolve:{action:"increaseHP",type:"change",num:2}}];break;case 6:a=[...a,{content:"Reorienting Head Wound."}],Ke("change");break;case 7:a=[...a,{content:"Hamstrung: You can barely move until you get serious help and rest. After recovery, resolve.",resolve:{action:"increaseAbility",type:"change",key:"dex"}}];break;case 8:a=[...a,{content:"Deafened: You cannot hear anything until you find extraordinary aid. Regardless, resolve.",resolve:{action:"increaseAbility",type:"add",key:"wil"}}];break;case 9:a=[...a,{content:"Re-brained: Some hidden part of your psyche is knocked loose."}],Ke("change","wil");break;case 10:a=[...a,{content:"Sundered: An appendage is torn off, crippled or useless. The Warden will tell you which. Then resolve.",resolve:{action:"increaseAbility",type:"add",key:"wil"}}];break;case 11:a=[...a,{content:"Mortal Wound: You are deprived and out of action. You die in one hour unless healed. Upon recovery, resolve.",resolve:{action:"increaseHP",type:"change",num:2}}];break;case 12:a=[...a,{content:"Doomed: Death seemed ever so close, but somehow you survived. If your next save against critical damage is a fail, you die horribly. If you pass, resolve",resolve:{action:"increaseHP",type:"change",num:3}}];break}return setTimeout(()=>Y(),0),[...a]}),addHistory:s=>setTimeout(()=>l(a=>(a=[...a,{content:s}],setTimeout(()=>Y(),0),[...a])),0),resolve:s=>l(a=>{const i=a[s].resolve;switch(i.action){case"increaseHP":Ue(i.type,i.num);break;case"increaseAbility":Ke(i.type,i.key);break}return a[s].resolve=null,Y(),[...a]}),reset:()=>{n([...t]),Y()}}},Q=Nn(),it=()=>{let t;ue.subscribe(r=>t=r);let e;ie.subscribe(r=>e=r);let n;X.subscribe(r=>n=r);let l;pe.subscribe(r=>l=r);let s;de.subscribe(r=>s=r);let a;Q.subscribe(r=>a=r);let i;return Ve.subscribe(r=>i=r),{name:t,abilities:{str:e.str,dex:e.dex,wil:e.wil,strMax:e.strMax,dexMax:e.dexMax,wilMax:e.wilMax},stats:{hp:n.hp,hpMax:n.hpMax,armor:n.armor,deprived:n.deprived},coins:{gp:l.gp,sp:l.sp,cp:l.cp},inventory:s,scars:a,notes:i}},Y=()=>{const t=it();localStorage.setItem("pc__character",JSON.stringify(t))},Vn=()=>{const{subscribe:t,set:e,update:n}=me({str:0,dex:0,wil:0,strMax:0,dexMax:0,wilMax:0});return{subscribe:t,set:e,increase:l=>n(s=>(s[l]+=s[l]<s[`${l}Max`]?1:0,Y(),{...s})),decrease:l=>n(s=>(s[l]-=s[l]>0?1:0,Y(),{...s})),setMaxAbility:(l,s)=>n(a=>(a[`${l}Max`]=s,Y(),{...a}))}},Bn=()=>{const{subscribe:t,set:e,update:n}=me({hp:0,hpMax:10,armor:0,deprived:!1});return{subscribe:t,set:e,increaseHp:()=>n(l=>(l.hp+=l.hp<l.hpMax?1:0,Y(),{...l})),decreaseHp:()=>n(l=>(l.hp-=l.hp>0?1:0,Y(),{...l})),setMaxHp:l=>n(s=>(s.hpMax=l,Y(),{...s})),increaceArmor:()=>n(l=>(l.armor+=l.armor<9?1:0,Y(),{...l})),decreaseArmor:()=>n(l=>(l.armor-=l.armor>0?1:0,Y(),{...l})),changeDeprived:()=>n(l=>(l.deprived=!l.deprived,Y(),{...l}))}},Wn=()=>{const{subscribe:t,set:e,update:n}=me({gp:"0",sp:"0",cp:"0"});return{subscribe:t,set:e,change:(l,s)=>n(a=>(a[l]=s,Y(),{...a}))}},qn=()=>{const{subscribe:t,set:e,update:n}=me([{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]);return{subscribe:t,set:e,change:l=>n(s=>(s=l,Y(),[...s]))}},ue=me(""),ie=Vn(),X=Bn(),pe=Wn(),de=qn();function Jn(t){let e,n;const l=t[9].default,s=tt(l,t,t[8],null);return{c(){e=b("p"),s&&s.c(),m(e,"class","svelte-mhmrtz")},m(a,i){S(a,e,i),s&&s.m(e,null),n=!0},p(a,i){s&&s.p&&(!n||i&256)&&lt(s,l,a,a[8],n?nt(l,a[8],i,null):st(a[8]),null)},i(a){n||(p(s,a),n=!0)},o(a){k(s,a),n=!1},d(a){a&&H(e),s&&s.d(a)}}}function Gn(t){let e,n;return{c(){e=b("img"),m(e,"class","image svelte-mhmrtz"),dt(e.src,n=t[5])||m(e,"src",n),m(e,"alt",t[6])},m(l,s){S(l,e,s)},p(l,s){s&32&&!dt(e.src,n=l[5])&&m(e,"src",n),s&64&&m(e,"alt",l[6])},i:I,o:I,d(l){l&&H(e)}}}function Yn(t){let e,n,l,s,a,i,r,o;const c=[Gn,Jn],f=[];function u(d,_){return d[5]?0:1}return n=u(t),l=f[n]=c[n](t),{c(){e=b("button"),l.c(),m(e,"class",s=re(`button${t[4]?" borderless":""}`)+" svelte-mhmrtz"),e.disabled=t[3],m(e,"style",a=`
    min-width: ${t[1]}px;
    height: ${t[1]}px;
    border-radius: ${t[1]/2}px;
    padding: ${t[0]}px;
    font-size: ${t[2]};
    line-height: ${t[2]};
  `)},m(d,_){S(d,e,_),f[n].m(e,null),i=!0,r||(o=x(e,"click",t[10]),r=!0)},p(d,[_]){let h=n;n=u(d),n===h?f[n].p(d,_):(ne(),k(f[h],1,1,()=>{f[h]=null}),le(),l=f[n],l?l.p(d,_):(l=f[n]=c[n](d),l.c()),p(l,1),l.m(e,null)),(!i||_&16&&s!==(s=re(`button${d[4]?" borderless":""}`)+" svelte-mhmrtz"))&&m(e,"class",s),(!i||_&8)&&(e.disabled=d[3]),(!i||_&7&&a!==(a=`
    min-width: ${d[1]}px;
    height: ${d[1]}px;
    border-radius: ${d[1]/2}px;
    padding: ${d[0]}px;
    font-size: ${d[2]};
    line-height: ${d[2]};
  `))&&m(e,"style",a)},i(d){i||(p(l),i=!0)},o(d){k(l),i=!1},d(d){d&&H(e),f[n].d(),r=!1,o()}}}function Un(t,e,n){let{$$slots:l={},$$scope:s}=e,{height:a=40}=e,{padding:i=0}=e,{fontSize:r="1.6rem"}=e,{disabled:o=!1}=e,{borderless:c=!1}=e,{image:f=void 0}=e,{alt:u=void 0}=e;const d=ce(),_=()=>d("click");return t.$$set=h=>{"height"in h&&n(1,a=h.height),"padding"in h&&n(0,i=h.padding),"fontSize"in h&&n(2,r=h.fontSize),"disabled"in h&&n(3,o=h.disabled),"borderless"in h&&n(4,c=h.borderless),"image"in h&&n(5,f=h.image),"alt"in h&&n(6,u=h.alt),"$$scope"in h&&n(8,s=h.$$scope)},t.$$.update=()=>{t.$$.dirty&1&&n(0,i||(i=0))},[i,a,r,o,c,f,u,d,s,l,_]}class Z extends q{constructor(e){super(),W(this,e,Un,Yn,N,{height:1,padding:0,fontSize:2,disabled:3,borderless:4,image:5,alt:6})}}const Kn=(t="character")=>{const e=it(),n=`${e.name}.json`,l=JSON.stringify(e),s=document.createElement("a");s.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(l)),s.setAttribute("download",n),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)},un=t=>{const e=n=>{t&&!t.contains(n.target)&&!n.defaultPrevented&&t.dispatchEvent(new CustomEvent("click_outside",t))};return document.addEventListener("click",e,!0),{destroy(){document.removeEventListener("click",e,!0)}}};function $t(t){let e,n,l,s,a,i,r,o,c,f,u,d,_=t[1]&&bt(t);const h=t[5].default,y=tt(h,t,t[9],null);i=new Z({props:{$$slots:{default:[Xn]},$$scope:{ctx:t}}}),i.$on("click",t[6]);let v=!t[2]&&vt(t);return{c(){e=b("div"),_&&_.c(),n=M(),l=b("span"),y&&y.c(),s=M(),a=b("div"),R(i.$$.fragment),r=M(),v&&v.c(),m(l,"class","content svelte-5saxj4"),m(a,"class",o=re(`controls${t[2]?" submission":""}`)+" svelte-5saxj4"),m(e,"class","modal svelte-5saxj4")},m($,z){S($,e,z),_&&_.m(e,null),g(e,n),g(e,l),y&&y.m(l,null),g(e,s),g(e,a),C(i,a,null),g(a,r),v&&v.m(a,null),f=!0,u||(d=[Qt(un.call(null,e)),x(e,"click_outside",t[8])],u=!0)},p($,z){$[1]?_?_.p($,z):(_=bt($),_.c(),_.m(e,n)):_&&(_.d(1),_=null),y&&y.p&&(!f||z&512)&&lt(y,h,$,$[9],f?nt(h,$[9],z,null):st($[9]),null);const B={};z&512&&(B.$$scope={dirty:z,ctx:$}),i.$set(B),$[2]?v&&(ne(),k(v,1,1,()=>{v=null}),le()):v?(v.p($,z),z&4&&p(v,1)):(v=vt($),v.c(),p(v,1),v.m(a,null)),(!f||z&4&&o!==(o=re(`controls${$[2]?" submission":""}`)+" svelte-5saxj4"))&&m(a,"class",o)},i($){f||(p(y,$),p(i.$$.fragment,$),p(v),$&&he(()=>{f&&(c||(c=je(e,Ne,{delay:250,duration:300,easing:Ie,axis:"y"},!0)),c.run(1))}),f=!0)},o($){k(y,$),k(i.$$.fragment,$),k(v),$&&(c||(c=je(e,Ne,{delay:250,duration:300,easing:Ie,axis:"y"},!1)),c.run(0)),f=!1},d($){$&&H(e),_&&_.d(),y&&y.d($),A(i),v&&v.d(),$&&c&&c.end(),u=!1,oe(d)}}}function bt(t){let e,n;return{c(){e=b("h2"),n=F(t[1]),m(e,"class","title svelte-5saxj4")},m(l,s){S(l,e,s),g(e,n)},p(l,s){s&2&&te(n,l[1])},d(l){l&&H(e)}}}function Xn(t){let e;return{c(){e=F("Cancel")},m(n,l){S(n,e,l)},d(n){n&&H(e)}}}function vt(t){let e,n;return e=new Z({props:{disabled:t[3],$$slots:{default:[Qn]},$$scope:{ctx:t}}}),e.$on("click",t[7]),{c(){R(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},p(l,s){const a={};s&8&&(a.disabled=l[3]),s&512&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){n||(p(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function Qn(t){let e;return{c(){e=F("OK")},m(n,l){S(n,e,l)},d(n){n&&H(e)}}}function Zn(t){let e,n,l=t[0]&&$t(t);return{c(){l&&l.c(),e=ln()},m(s,a){l&&l.m(s,a),S(s,e,a),n=!0},p(s,[a]){s[0]?l?(l.p(s,a),a&1&&p(l,1)):(l=$t(s),l.c(),p(l,1),l.m(e.parentNode,e)):l&&(ne(),k(l,1,1,()=>{l=null}),le())},i(s){n||(p(l),n=!0)},o(s){k(l),n=!1},d(s){s&&H(e),l&&l.d(s)}}}function xn(t,e,n){let{$$slots:l={},$$scope:s}=e,{isShown:a}=e,{title:i=void 0}=e,{submission:r=!1}=e,{disableOk:o=!1}=e;const c=ce(),f=()=>c("cancel"),u=()=>c("ok"),d=()=>c("cancel");return t.$$set=_=>{"isShown"in _&&n(0,a=_.isShown),"title"in _&&n(1,i=_.title),"submission"in _&&n(2,r=_.submission),"disableOk"in _&&n(3,o=_.disableOk),"$$scope"in _&&n(9,s=_.$$scope)},[a,i,r,o,c,l,f,u,d,s]}class De extends q{constructor(e){super(),W(this,e,xn,Zn,N,{isShown:0,title:1,submission:2,disableOk:3})}}function kt(t){let e,n;return{c(){e=b("span"),n=F(t[0]),m(e,"class","title svelte-mt0x83")},m(l,s){S(l,e,s),g(e,n)},p(l,s){s&1&&te(n,l[0])},d(l){l&&H(e)}}}function el(t){let e;return{c(){e=F("−")},m(n,l){S(n,e,l)},d(n){n&&H(e)}}}function yt(t){let e,n;return{c(){e=F("/ "),n=F(t[2])},m(l,s){S(l,e,s),S(l,n,s)},p(l,s){s&4&&te(n,l[2])},d(l){l&&(H(e),H(n))}}}function tl(t){let e;return{c(){e=F("+")},m(n,l){S(n,e,l)},d(n){n&&H(e)}}}function nl(t){let e,n,l,s,a,i,r,o,c,f,u,d=t[0]&&kt(t);s=new Z({props:{disabled:t[1]===0,$$slots:{default:[el]},$$scope:{ctx:t}}}),s.$on("click",t[5]);let _=!t[3]&&yt(t);return f=new Z({props:{disabled:t[1]===t[2],$$slots:{default:[tl]},$$scope:{ctx:t}}}),f.$on("click",t[6]),{c(){e=b("div"),d&&d.c(),n=M(),l=b("div"),R(s.$$.fragment),a=M(),i=b("div"),r=F(t[1]),o=M(),_&&_.c(),c=M(),R(f.$$.fragment),m(i,"class","current svelte-mt0x83"),m(l,"class","controls svelte-mt0x83"),m(e,"class","ability svelte-mt0x83")},m(h,y){S(h,e,y),d&&d.m(e,null),g(e,n),g(e,l),C(s,l,null),g(l,a),g(l,i),g(i,r),g(i,o),_&&_.m(i,null),g(l,c),C(f,l,null),u=!0},p(h,[y]){h[0]?d?d.p(h,y):(d=kt(h),d.c(),d.m(e,n)):d&&(d.d(1),d=null);const v={};y&2&&(v.disabled=h[1]===0),y&128&&(v.$$scope={dirty:y,ctx:h}),s.$set(v),(!u||y&2)&&te(r,h[1]),h[3]?_&&(_.d(1),_=null):_?_.p(h,y):(_=yt(h),_.c(),_.m(i,null));const $={};y&6&&($.disabled=h[1]===h[2]),y&128&&($.$$scope={dirty:y,ctx:h}),f.$set($)},i(h){u||(p(s.$$.fragment,h),p(f.$$.fragment,h),u=!0)},o(h){k(s.$$.fragment,h),k(f.$$.fragment,h),u=!1},d(h){h&&H(e),d&&d.d(),A(s),_&&_.d(),A(f)}}}function ll(t,e,n){let{title:l=""}=e,{value:s=0}=e,{maxValue:a=0}=e,{hideMaxValue:i=!1}=e;const r=ce(),o=()=>r("decrease"),c=()=>r("increase");return t.$$set=f=>{"title"in f&&n(0,l=f.title),"value"in f&&n(1,s=f.value),"maxValue"in f&&n(2,a=f.maxValue),"hideMaxValue"in f&&n(3,i=f.hideMaxValue)},[l,s,a,i,r,o,c]}class Be extends q{constructor(e){super(),W(this,e,ll,nl,N,{title:0,value:1,maxValue:2,hideMaxValue:3})}}function wt(t,e,n){const l=t.slice();return l[20]=e[n],l[22]=n,l}function Ht(t){let e;return{c(){e=b("div"),e.textContent="You have no scars",m(e,"class","item svelte-1m9jzc5")},m(n,l){S(n,e,l)},d(n){n&&H(e)}}}function sl(t){let e,n;return e=new Z({props:{height:30,fontSize:"1rem",disabled:!0,$$slots:{default:[il]},$$scope:{ctx:t}}}),{c(){R(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(p(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function al(t){let e,n;function l(){return t[8](t[22])}return e=new Z({props:{height:30,fontSize:"1rem",$$slots:{default:[rl]},$$scope:{ctx:t}}}),e.$on("click",l),{c(){R(e.$$.fragment)},m(s,a){C(e,s,a),n=!0},p(s,a){t=s;const i={};a&8388608&&(i.$$scope={dirty:a,ctx:t}),e.$set(i)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){k(e.$$.fragment,s),n=!1},d(s){A(e,s)}}}function il(t){let e;return{c(){e=F("Resolved")},m(n,l){S(n,e,l)},d(n){n&&H(e)}}}function rl(t){let e;return{c(){e=F("Resolve")},m(n,l){S(n,e,l)},d(n){n&&H(e)}}}function St(t){let e,n=t[20].content+"",l,s,a,i,r,o;const c=[al,sl],f=[];function u(d,_){return d[20].resolve?0:1}return a=u(t),i=f[a]=c[a](t),{c(){e=b("div"),l=F(n),s=M(),i.c(),r=M(),m(e,"class","item resolvable svelte-1m9jzc5")},m(d,_){S(d,e,_),g(e,l),g(e,s),f[a].m(e,null),g(e,r),o=!0},p(d,_){(!o||_&16)&&n!==(n=d[20].content+"")&&te(l,n);let h=a;a=u(d),a!==h&&(ne(),k(f[h],1,1,()=>{f[h]=null}),le(),i=f[a],i||(i=f[a]=c[a](d),i.c()),p(i,1),i.m(e,r))},i(d){o||(p(i),o=!0)},o(d){k(i),o=!1},d(d){d&&H(e),f[a].d()}}}function ol(t){let e;return{c(){e=F("Add scar")},m(n,l){S(n,e,l)},d(n){n&&H(e)}}}function cl(t){let e;return{c(){e=F("Download character (json)")},m(n,l){S(n,e,l)},d(n){n&&H(e)}}}function fl(t){let e;return{c(){e=F("Delete character")},m(n,l){S(n,e,l)},d(n){n&&H(e)}}}function ul(t){let e;return{c(){e=F(`Adding a scar is an irreversible action that enables you to advance your
    character. Have you consulted with the Warden to confirm that you can
    acquire a scar?`)},m(n,l){S(n,e,l)},d(n){n&&H(e)}}}function dl(t){let e,n,l;return n=new Be({props:{value:t[3],maxValue:12,hideMaxValue:!0}}),n.$on("decrease",t[14]),n.$on("increase",t[15]),{c(){e=F(`How many damage points was taken?
    `),R(n.$$.fragment)},m(s,a){S(s,e,a),C(n,s,a),l=!0},p(s,a){const i={};a&8&&(i.value=s[3]),n.$set(i)},i(s){l||(p(n.$$.fragment,s),l=!0)},o(s){k(n.$$.fragment,s),l=!1},d(s){s&&H(e),A(n,s)}}}function hl(t){let e;return{c(){e=F("Do you really want to delete this character?")},m(n,l){S(n,e,l)},d(n){n&&H(e)}}}function gl(t){let e,n,l,s,a,i,r,o,c,f,u,d,_,h,y,v,$,z,B,L=t[4].length===0&&Ht(),V=U(t[4]),D=[];for(let w=0;w<V.length;w+=1)D[w]=St(wt(t,V,w));const P=w=>k(D[w],1,1,()=>{D[w]=null});return o=new Z({props:{padding:4,disabled:t[5].hp>0,$$slots:{default:[ol]},$$scope:{ctx:t}}}),o.$on("click",t[9]),f=new Z({props:{padding:4,$$slots:{default:[cl]},$$scope:{ctx:t}}}),f.$on("click",t[10]),d=new Z({props:{padding:4,$$slots:{default:[fl]},$$scope:{ctx:t}}}),d.$on("click",t[11]),h=new De({props:{isShown:t[1],$$slots:{default:[ul]},$$scope:{ctx:t}}}),h.$on("cancel",t[12]),h.$on("ok",t[13]),v=new De({props:{isShown:t[2],disableOk:t[3]===0,$$slots:{default:[dl]},$$scope:{ctx:t}}}),v.$on("cancel",t[16]),v.$on("ok",t[17]),z=new De({props:{isShown:t[0],$$slots:{default:[hl]},$$scope:{ctx:t}}}),z.$on("cancel",t[18]),z.$on("ok",t[19]),{c(){e=b("div"),n=b("span"),n.textContent="Scars history:",l=M(),s=b("div"),a=b("div"),L&&L.c(),i=M();for(let w=0;w<D.length;w+=1)D[w].c();r=M(),R(o.$$.fragment),c=M(),R(f.$$.fragment),u=M(),R(d.$$.fragment),_=M(),R(h.$$.fragment),y=M(),R(v.$$.fragment),$=M(),R(z.$$.fragment),m(n,"class","title svelte-1m9jzc5"),m(a,"class","wrap svelte-1m9jzc5"),m(s,"class","scars svelte-1m9jzc5"),m(e,"class","menu svelte-1m9jzc5")},m(w,O){S(w,e,O),g(e,n),g(e,l),g(e,s),g(s,a),L&&L.m(a,null),g(a,i);for(let J=0;J<D.length;J+=1)D[J]&&D[J].m(a,null);g(e,r),C(o,e,null),g(e,c),C(f,e,null),g(e,u),C(d,e,null),g(e,_),C(h,e,null),g(e,y),C(v,e,null),g(e,$),C(z,e,null),B=!0},p(w,[O]){if(w[4].length===0?L||(L=Ht(),L.c(),L.m(a,i)):L&&(L.d(1),L=null),O&16){V=U(w[4]);let E;for(E=0;E<V.length;E+=1){const ae=wt(w,V,E);D[E]?(D[E].p(ae,O),p(D[E],1)):(D[E]=St(ae),D[E].c(),p(D[E],1),D[E].m(a,null))}for(ne(),E=V.length;E<D.length;E+=1)P(E);le()}const J={};O&32&&(J.disabled=w[5].hp>0),O&8388608&&(J.$$scope={dirty:O,ctx:w}),o.$set(J);const _e={};O&8388608&&(_e.$$scope={dirty:O,ctx:w}),f.$set(_e);const $e={};O&8388608&&($e.$$scope={dirty:O,ctx:w}),d.$set($e);const K={};O&2&&(K.isShown=w[1]),O&8388608&&(K.$$scope={dirty:O,ctx:w}),h.$set(K);const G={};O&4&&(G.isShown=w[2]),O&8&&(G.disableOk=w[3]===0),O&8388616&&(G.$$scope={dirty:O,ctx:w}),v.$set(G);const T={};O&1&&(T.isShown=w[0]),O&8388608&&(T.$$scope={dirty:O,ctx:w}),z.$set(T)},i(w){if(!B){for(let O=0;O<V.length;O+=1)p(D[O]);p(o.$$.fragment,w),p(f.$$.fragment,w),p(d.$$.fragment,w),p(h.$$.fragment,w),p(v.$$.fragment,w),p(z.$$.fragment,w),B=!0}},o(w){D=D.filter(Boolean);for(let O=0;O<D.length;O+=1)k(D[O]);k(o.$$.fragment,w),k(f.$$.fragment,w),k(d.$$.fragment,w),k(h.$$.fragment,w),k(v.$$.fragment,w),k(z.$$.fragment,w),B=!1},d(w){w&&H(e),L&&L.d(),ge(D,w),A(o),A(f),A(d),A(h),A(v),A(z)}}}function ml(t,e,n){let l,s;se(t,Q,P=>n(4,l=P)),se(t,X,P=>n(5,s=P));let a=!1,i=!1,r=!1,o=0;const c=()=>{Q.add(o),n(2,r=!1),n(3,o=0)},f=()=>{ue.set(""),Q.reset(),localStorage.removeItem("pc__character")};return[a,i,r,o,l,s,c,f,P=>Q.resolve(P),()=>n(1,i=!0),()=>Kn(),()=>n(0,a=!0),()=>n(1,i=!1),()=>{n(2,r=!0),n(1,i=!1)},()=>o>0?n(3,o-=1):n(3,o),()=>o<12?n(3,o+=1):n(3,o),()=>{n(2,r=!1),n(3,o=0)},()=>c(),()=>n(0,a=!1),()=>f()]}class _l extends q{constructor(e){super(),W(this,e,ml,gl,N,{})}}function Mt(t,e,n){const l=t.slice();return l[4]=e[n],l}function Ct(t){let e,n;function l(){return t[2](t[4])}function s(){return t[3](t[4])}return e=new Be({props:{title:t[4],value:t[0][t[4]],maxValue:t[0][`${t[4]}Max`]}}),e.$on("decrease",l),e.$on("increase",s),{c(){R(e.$$.fragment)},m(a,i){C(e,a,i),n=!0},p(a,i){t=a;const r={};i&1&&(r.value=t[0][t[4]]),i&1&&(r.maxValue=t[0][`${t[4]}Max`]),e.$set(r)},i(a){n||(p(e.$$.fragment,a),n=!0)},o(a){k(e.$$.fragment,a),n=!1},d(a){A(e,a)}}}function pl(t){let e,n,l=U(t[1]),s=[];for(let i=0;i<l.length;i+=1)s[i]=Ct(Mt(t,l,i));const a=i=>k(s[i],1,1,()=>{s[i]=null});return{c(){e=b("div");for(let i=0;i<s.length;i+=1)s[i].c();m(e,"class","abilities")},m(i,r){S(i,e,r);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);n=!0},p(i,[r]){if(r&3){l=U(i[1]);let o;for(o=0;o<l.length;o+=1){const c=Mt(i,l,o);s[o]?(s[o].p(c,r),p(s[o],1)):(s[o]=Ct(c),s[o].c(),p(s[o],1),s[o].m(e,null))}for(ne(),o=l.length;o<s.length;o+=1)a(o);le()}},i(i){if(!n){for(let r=0;r<l.length;r+=1)p(s[r]);n=!0}},o(i){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)k(s[r]);n=!1},d(i){i&&H(e),ge(s,i)}}}function $l(t,e,n){let l;return se(t,ie,r=>n(0,l=r)),[l,["str","dex","wil"],r=>ie.decrease(r),r=>ie.increase(r)]}class bl extends q{constructor(e){super(),W(this,e,$l,pl,N,{})}}function vl(t){let e,n,l,s,a,i,r;return{c(){e=b("label"),n=b("input"),l=M(),s=b("span"),m(n,"type","checkbox"),n.checked=t[1],m(n,"class","svelte-x3sjdj"),m(s,"class","checkmark svelte-x3sjdj"),m(e,"class","checkbox svelte-x3sjdj"),m(e,"style",a=`width: ${t[0]}px;height: ${t[0]}px`)},m(o,c){S(o,e,c),g(e,n),g(e,l),g(e,s),i||(r=x(n,"change",t[3]),i=!0)},p(o,[c]){c&2&&(n.checked=o[1]),c&1&&a!==(a=`width: ${o[0]}px;height: ${o[0]}px`)&&m(e,"style",a)},i:I,o:I,d(o){o&&H(e),i=!1,r()}}}function kl(t,e,n){let{size:l=0}=e,{checked:s=!1}=e;const a=ce(),i=()=>a("change");return t.$$set=r=>{"size"in r&&n(0,l=r.size),"checked"in r&&n(1,s=r.checked)},[l,s,a,i]}class xe extends q{constructor(e){super(),W(this,e,kl,vl,N,{size:0,checked:1})}}function yl(t){let e,n,l,s;return{c(){e=b("input"),m(e,"class","input svelte-78edro"),m(e,"placeholder",t[1]),m(e,"style",n=`border-bottom: ${t[2]?"1px solid var(--main)":"none"};`)},m(a,i){S(a,e,i),Fe(e,t[0]),l||(s=[x(e,"input",t[5]),x(e,"input",t[6])],l=!0)},p(a,[i]){i&2&&m(e,"placeholder",a[1]),i&4&&n!==(n=`border-bottom: ${a[2]?"1px solid var(--main)":"none"};`)&&m(e,"style",n),i&1&&e.value!==a[0]&&Fe(e,a[0])},i:I,o:I,d(a){a&&H(e),l=!1,oe(s)}}}function wl(t,e,n){let{value:l="0"}=e,{placeholder:s=""}=e,{border:a=!0}=e,{numbers:i=!1}=e;const r=ce();function o(){l=this.value,n(0,l),n(4,i)}const c=()=>r("input",l);return t.$$set=f=>{"value"in f&&n(0,l=f.value),"placeholder"in f&&n(1,s=f.placeholder),"border"in f&&n(2,a=f.border),"numbers"in f&&n(4,i=f.numbers)},t.$$.update=()=>{t.$$.dirty&17&&n(0,l=i?l.replace(/[^0-9]/g,""):l)},[l,s,a,r,i,o,c]}class rt extends q{constructor(e){super(),W(this,e,wl,yl,N,{value:0,placeholder:1,border:2,numbers:4})}}function At(t,e,n){const l=t.slice();return l[5]=e[n],l[6]=e,l[7]=n,l}function Rt(t){let e,n,l,s,a,i,r,o;function c(){return t[1](t[5],t[6],t[7])}n=new xe({props:{size:20,checked:t[5].inHand}}),n.$on("change",c);function f(...d){return t[2](t[5],t[6],t[7],...d)}s=new rt({props:{placeholder:"Item",value:t[5].title,border:!1}}),s.$on("input",f);function u(){return t[3](t[5],t[6],t[7])}return i=new xe({props:{size:20,checked:t[5].fatigue}}),i.$on("change",u),{c(){e=b("div"),R(n.$$.fragment),l=M(),R(s.$$.fragment),a=M(),R(i.$$.fragment),r=M(),m(e,"class","item svelte-1volka6")},m(d,_){S(d,e,_),C(n,e,null),g(e,l),C(s,e,null),g(e,a),C(i,e,null),g(e,r),o=!0},p(d,_){t=d;const h={};_&1&&(h.checked=t[5].inHand),n.$set(h);const y={};_&1&&(y.value=t[5].title),s.$set(y);const v={};_&1&&(v.checked=t[5].fatigue),i.$set(v)},i(d){o||(p(n.$$.fragment,d),p(s.$$.fragment,d),p(i.$$.fragment,d),o=!0)},o(d){k(n.$$.fragment,d),k(s.$$.fragment,d),k(i.$$.fragment,d),o=!1},d(d){d&&H(e),A(n),A(s),A(i)}}}function Hl(t){let e,n,l,s,a,i=U(t[0]),r=[];for(let c=0;c<i.length;c+=1)r[c]=Rt(At(t,i,c));const o=c=>k(r[c],1,1,()=>{r[c]=null});return{c(){e=b("div"),n=b("div"),n.innerHTML='<span class="info svelte-1volka6">Hand</span> <span class="info svelte-1volka6">Fatigue</span>',l=M(),s=b("div");for(let c=0;c<r.length;c+=1)r[c].c();m(n,"class","heading svelte-1volka6"),m(s,"class","list svelte-1volka6"),m(e,"class","inventory svelte-1volka6")},m(c,f){S(c,e,f),g(e,n),g(e,l),g(e,s);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(s,null);a=!0},p(c,[f]){if(f&1){i=U(c[0]);let u;for(u=0;u<i.length;u+=1){const d=At(c,i,u);r[u]?(r[u].p(d,f),p(r[u],1)):(r[u]=Rt(d),r[u].c(),p(r[u],1),r[u].m(s,null))}for(ne(),u=i.length;u<r.length;u+=1)o(u);le()}},i(c){if(!a){for(let f=0;f<i.length;f+=1)p(r[f]);a=!0}},o(c){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)k(r[f]);a=!1},d(c){c&&H(e),ge(r,c)}}}function Sl(t,e,n){let l;se(t,de,o=>n(4,l=o));const s=l;return[s,(o,c,f)=>{n(0,c[f].inHand=!o.inHand,s),de.change(s)},(o,c,f,u)=>{n(0,c[f].title=u.detail,s),de.change(s)},(o,c,f)=>{n(0,c[f].fatigue=!o.fatigue,s),de.change(s)}]}class Ml extends q{constructor(e){super(),W(this,e,Sl,Hl,N,{})}}function Cl(t){let e,n,l,s,a,i,r,o,c,f;return n=new Be({props:{title:"HP",value:t[0].hp,maxValue:t[0].hpMax}}),n.$on("decrease",X.decreaseHp),n.$on("increase",X.increaseHp),s=new Be({props:{title:"Armor",value:t[0].armor,maxValue:9,hideMaxValue:!0}}),s.$on("decrease",X.decreaseArmor),s.$on("increase",X.increaceArmor),c=new xe({props:{size:40,checked:t[0].deprived}}),c.$on("change",X.changeDeprived),{c(){e=b("div"),R(n.$$.fragment),l=M(),R(s.$$.fragment),a=M(),i=b("div"),r=b("span"),r.textContent="Deprived",o=M(),R(c.$$.fragment),m(r,"class","title svelte-1xt6604"),m(i,"class","deprived svelte-1xt6604"),m(e,"class","stats")},m(u,d){S(u,e,d),C(n,e,null),g(e,l),C(s,e,null),g(e,a),g(e,i),g(i,r),g(i,o),C(c,i,null),f=!0},p(u,[d]){const _={};d&1&&(_.value=u[0].hp),d&1&&(_.maxValue=u[0].hpMax),n.$set(_);const h={};d&1&&(h.value=u[0].armor),s.$set(h);const y={};d&1&&(y.checked=u[0].deprived),c.$set(y)},i(u){f||(p(n.$$.fragment,u),p(s.$$.fragment,u),p(c.$$.fragment,u),f=!0)},o(u){k(n.$$.fragment,u),k(s.$$.fragment,u),k(c.$$.fragment,u),f=!1},d(u){u&&H(e),A(n),A(s),A(c)}}}function Al(t,e,n){let l;return se(t,X,s=>n(0,l=s)),[l]}class Rl extends q{constructor(e){super(),W(this,e,Al,Cl,N,{})}}function zt(t,e,n){const l=t.slice();return l[3]=e[n],l}function Pt(t){let e,n,l,s,a,i;function r(...o){return t[2](t[3],...o)}return s=new rt({props:{value:t[0][t[3]],numbers:!0}}),s.$on("input",r),{c(){e=b("div"),n=b("span"),n.textContent=`${t[3]}:`,l=M(),R(s.$$.fragment),a=M(),m(n,"class","currency svelte-sxs072"),m(e,"class","item svelte-sxs072")},m(o,c){S(o,e,c),g(e,n),g(e,l),C(s,e,null),g(e,a),i=!0},p(o,c){t=o;const f={};c&1&&(f.value=t[0][t[3]]),s.$set(f)},i(o){i||(p(s.$$.fragment,o),i=!0)},o(o){k(s.$$.fragment,o),i=!1},d(o){o&&H(e),A(s)}}}function zl(t){let e,n,l=U(t[1]),s=[];for(let i=0;i<l.length;i+=1)s[i]=Pt(zt(t,l,i));const a=i=>k(s[i],1,1,()=>{s[i]=null});return{c(){e=b("div");for(let i=0;i<s.length;i+=1)s[i].c();m(e,"class","coins svelte-sxs072")},m(i,r){S(i,e,r);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);n=!0},p(i,[r]){if(r&3){l=U(i[1]);let o;for(o=0;o<l.length;o+=1){const c=zt(i,l,o);s[o]?(s[o].p(c,r),p(s[o],1)):(s[o]=Pt(c),s[o].c(),p(s[o],1),s[o].m(e,null))}for(ne(),o=l.length;o<s.length;o+=1)a(o);le()}},i(i){if(!n){for(let r=0;r<l.length;r+=1)p(s[r]);n=!0}},o(i){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)k(s[r]);n=!1},d(i){i&&H(e),ge(s,i)}}}function Pl(t,e,n){let l;return se(t,pe,i=>n(0,l=i)),[l,["gp","sp","cp"],(i,r)=>{pe[i]=r.detail,pe.change(i,r.detail)}]}class Tl extends q{constructor(e){super(),W(this,e,Pl,zl,N,{})}}function Ol(t){let e,n,l;const s=t[2].default,a=tt(s,t,t[1],null);return{c(){e=b("section"),a&&a.c(),m(e,"class",n=re(`section ${t[0]}`)+" svelte-1wj47wp")},m(i,r){S(i,e,r),a&&a.m(e,null),l=!0},p(i,[r]){a&&a.p&&(!l||r&2)&&lt(a,s,i,i[1],l?nt(s,i[1],r,null):st(i[1]),null),(!l||r&1&&n!==(n=re(`section ${i[0]}`)+" svelte-1wj47wp"))&&m(e,"class",n)},i(i){l||(p(a,i),l=!0)},o(i){k(a,i),l=!1},d(i){i&&H(e),a&&a.d(i)}}}function Dl(t,e,n){let{$$slots:l={},$$scope:s}=e,{position:a=""}=e;return t.$$set=i=>{"position"in i&&n(0,a=i.position),"$$scope"in i&&n(1,s=i.$$scope)},[a,s,l]}class Pe extends q{constructor(e){super(),W(this,e,Dl,Ol,N,{position:0})}}function Fl(t){let e,n;return e=new bl({}),{c(){R(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(p(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function Ll(t){let e,n;return e=new Rl({}),{c(){R(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(p(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function El(t){let e,n;return e=new Tl({}),{c(){R(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(p(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function jl(t){let e,n;return e=new Ml({}),{c(){R(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(p(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function Il(t){let e,n,l,s,a,i,r,o,c;return n=new Pe({props:{position:"first",$$slots:{default:[Fl]},$$scope:{ctx:t}}}),s=new Pe({props:{$$slots:{default:[Ll]},$$scope:{ctx:t}}}),i=new Pe({props:{$$slots:{default:[El]},$$scope:{ctx:t}}}),o=new Pe({props:{position:"last",$$slots:{default:[jl]},$$scope:{ctx:t}}}),{c(){e=b("div"),R(n.$$.fragment),l=M(),R(s.$$.fragment),a=M(),R(i.$$.fragment),r=M(),R(o.$$.fragment),m(e,"class","sheet svelte-h34ol9")},m(f,u){S(f,e,u),C(n,e,null),g(e,l),C(s,e,null),g(e,a),C(i,e,null),g(e,r),C(o,e,null),c=!0},p(f,[u]){const d={};u&1&&(d.$$scope={dirty:u,ctx:f}),n.$set(d);const _={};u&1&&(_.$$scope={dirty:u,ctx:f}),s.$set(_);const h={};u&1&&(h.$$scope={dirty:u,ctx:f}),i.$set(h);const y={};u&1&&(y.$$scope={dirty:u,ctx:f}),o.$set(y)},i(f){c||(p(n.$$.fragment,f),p(s.$$.fragment,f),p(i.$$.fragment,f),p(o.$$.fragment,f),c=!0)},o(f){k(n.$$.fragment,f),k(s.$$.fragment,f),k(i.$$.fragment,f),k(o.$$.fragment,f),c=!1},d(f){f&&H(e),A(n),A(s),A(i),A(o)}}}class Nl extends q{constructor(e){super(),W(this,e,null,Il,N,{})}}const Tt="/mobile-cairn/assets/settings-8bd1b2da.svg",Ot="/mobile-cairn/assets/notes-8a66c194.svg",Te="/mobile-cairn/assets/cross-5d728ea7.svg";function Vl(t){let e,n,l=t[0]+`
`,s,a,i,r,o,c;return{c(){e=b("div"),n=b("pre"),s=F(l),a=F(`
  `),i=M(),r=b("textarea"),m(n,"aria-hidden","true"),ze(n,"min-height",t[2]),ze(n,"max-height",t[1]),m(n,"class","svelte-1expx48"),m(r,"class","svelte-1expx48"),m(e,"class","container svelte-1expx48")},m(f,u){S(f,e,u),g(e,n),g(n,s),g(n,a),g(e,i),g(e,r),Fe(r,t[0]),o||(c=[x(r,"input",t[6]),x(r,"input",t[7])],o=!0)},p(f,[u]){u&1&&l!==(l=f[0]+`
`)&&te(s,l),u&4&&ze(n,"min-height",f[2]),u&2&&ze(n,"max-height",f[1]),u&1&&Fe(r,f[0])},i:I,o:I,d(f){f&&H(e),o=!1,oe(c)}}}function Bl(t,e,n){let l,s,{value:a=""}=e,{minRows:i=1}=e,{maxRows:r=36}=e;const o=ce();function c(){a=this.value,n(0,a)}const f=()=>o("input",a);return t.$$set=u=>{"value"in u&&n(0,a=u.value),"minRows"in u&&n(4,i=u.minRows),"maxRows"in u&&n(5,r=u.maxRows)},t.$$.update=()=>{t.$$.dirty&16&&n(2,l=`${1+i*1.2}em`),t.$$.dirty&32&&n(1,s=r?`${1+r*1.2}em`:"auto")},[a,s,l,o,i,r,c,f]}class Wl extends q{constructor(e){super(),W(this,e,Bl,Vl,N,{value:0,minRows:4,maxRows:5})}}function ql(t){let e,n,l,s,a,i,r;return i=new Wl({props:{value:t[0]}}),i.$on("input",t[1]),{c(){e=b("div"),n=b("span"),n.textContent="Notes:",l=M(),s=b("div"),a=b("div"),R(i.$$.fragment),m(n,"class","title svelte-1oz233v"),m(a,"class","wrap svelte-1oz233v"),m(s,"class","content svelte-1oz233v"),m(e,"class","notes svelte-1oz233v")},m(o,c){S(o,e,c),g(e,n),g(e,l),g(e,s),g(s,a),C(i,a,null),r=!0},p(o,[c]){const f={};c&1&&(f.value=o[0]),i.$set(f)},i(o){r||(p(i.$$.fragment,o),r=!0)},o(o){k(i.$$.fragment,o),r=!1},d(o){o&&H(e),A(i)}}}function Jl(t,e,n){let l;return se(t,Ve,a=>n(0,l=a)),[l,a=>Ve.change(a.detail)]}class Gl extends q{constructor(e){super(),W(this,e,Jl,ql,N,{})}}function Yl(t){let e,n,l,s,a,i,r,o,c,f,u,d,_,h,y,v,$,z,B,L,V,D;return l=new Z({props:{borderless:!0,image:t[1]?Te:Ot,alt:"notes",disabled:t[0]}}),l.$on("click",t[4]),f=new Z({props:{borderless:!0,image:t[0]?Te:Tt,alt:"settings",disabled:t[1]}}),f.$on("click",t[5]),_=new Gl({}),y=new Nl({}),$=new _l({}),V=new En({}),{c(){e=b("div"),n=b("div"),R(l.$$.fragment),s=M(),a=b("div"),i=b("div"),r=b("h2"),o=F(t[3]),c=M(),R(f.$$.fragment),u=M(),d=b("div"),R(_.$$.fragment),h=M(),R(y.$$.fragment),v=M(),R($.$$.fragment),B=M(),L=b("footer"),R(V.$$.fragment),m(r,"class","text svelte-154xizm"),m(i,"class","wrap svelte-154xizm"),m(a,"class","name svelte-154xizm"),m(n,"class","header svelte-154xizm"),m(d,"class","main svelte-154xizm"),m(d,"style",z=`left: ${t[2]()}`),m(L,"class","footer svelte-154xizm"),m(e,"class","character svelte-154xizm")},m(P,w){S(P,e,w),g(e,n),C(l,n,null),g(n,s),g(n,a),g(a,i),g(i,r),g(r,o),g(n,c),C(f,n,null),g(e,u),g(e,d),C(_,d,null),g(d,h),C(y,d,null),g(d,v),C($,d,null),g(e,B),g(e,L),C(V,L,null),D=!0},p(P,[w]){const O={};w&2&&(O.image=P[1]?Te:Ot),w&1&&(O.disabled=P[0]),l.$set(O),(!D||w&8)&&te(o,P[3]);const J={};w&1&&(J.image=P[0]?Te:Tt),w&2&&(J.disabled=P[1]),f.$set(J),(!D||w&4&&z!==(z=`left: ${P[2]()}`))&&m(d,"style",z)},i(P){D||(p(l.$$.fragment,P),p(f.$$.fragment,P),p(_.$$.fragment,P),p(y.$$.fragment,P),p($.$$.fragment,P),p(V.$$.fragment,P),D=!0)},o(P){k(l.$$.fragment,P),k(f.$$.fragment,P),k(_.$$.fragment,P),k(y.$$.fragment,P),k($.$$.fragment,P),k(V.$$.fragment,P),D=!1},d(P){P&&H(e),A(l),A(f),A(_),A(y),A($),A(V)}}}function Ul(t,e,n){let l,s;se(t,ue,c=>n(3,s=c));let a=!1,i=!1;const r=()=>n(1,i=!i),o=()=>n(0,a=!a);return t.$$.update=()=>{t.$$.dirty&3&&n(2,l=()=>a?"-200%":i?"0":"-100%")},[a,i,l,s,r,o]}class Kl extends q{constructor(e){super(),W(this,e,Ul,Yl,N,{})}}const et=["","Adhere","Earthquake","Masquerade","Smoke Form","Anchor","Elasticity","Miniaturize","Sniff","Animate Object","Elemental Wall","Mirror Image","Snuff","Anthropomorphize","Filch","Mirrorwalk","Sort","Arcane Eye","Flare","Multiarm","Spectacle","Astral Prison","Fog Cloud","Night Sphere","Spellsaw","Attract","Frenzy","Objectify","Spider Climb","Auditory Illusion","Gate","Ooze Form","Summon Cube","Babble","Gravity Shift","Pacify","Swarm","Bait Flower","Greed","Phobia","Telekinesis","Beast Form","Haste","Pit","Telepathy","Befuddle","Hatred","Primal Surge","Teleport","Body Swap","Hear Whispers","Push/Pull","Target Lure","Charm","Hover","Raise Dead","Thicket","Command","Hypnotize","Raise Spirit","Summon Idol","Comprehend","Icy Touch","Read Mind","Time Control","Cone of Foam","Identify Owner","Repel","True Sight","Control Plants","Illuminate","Scry","Upwell","Control Weather","Invisible Tether","Sculpt Elements","Vision","Cure Wounds","Knock","Sense","Visual Illusion","Deafen","Leap","Shield","Ward","Detect Magic","Liquid Air","Shroud","Web","Disassemble","Magic Dampener","Shuffle","Widget","Disguise","Manse","Sleep","Wizard Mark","Displace","Marble Craze","Slick	100	X-Ray Vision"],Dt=()=>{const t=[""];for(let e=1;e<=20;e++)e<=3?t.push(""):e<=14?t.push("Brigandine (1 Armor, bulky)"):e<=19?t.push("Chainmail (2 Armor, bulky)"):t.push("Plate (3 Armor, bulky)");return t},Xl=()=>{const t=[""];for(let e=1;e<=20;e++)e<=13?t.push(""):e<=16?t.push("Helmet (+1 Armor)"):e<=19?t.push("Shield (+1 Armor)"):t.push("both");return t},Ft=()=>{const t=[""];for(let e=1;e<=20;e++)e<=5?t.push("Dagger/Cudgel/Staff  (d6 damage)"):e<=14?t.push("Sword/Mace/Axe (d8 damage)"):e<=16?t.push("Sling (d4 damage)"):e<=18?t.push("Bow (d6 damage, bulky)"):e<=19?t.push("Crossbow (d8 damage, bulky)"):t.push("Halberd/War Hammer/Battleaxe  (d10 damage, bulky)");return t},Lt=["","Air Bladder","Fire Oil","Manacles","Rope (25ft)","Antitoxin","Grappling Hook","Pick","Spirit Ward","Cart (+4 slots, bulky)","Large Sack","Pole (10ft)","Spyglass","Chain (10ft)","Large Trap","Pulley","Tinderbox","Dowsing Rod","Lockpicks","Repellent","Wolfsbane"],Et=["","Bellows","Cook Pots","Grease","Net","Bucket","Crowbar","Hammer","Saw","Caltrops","Drill (Manual)","Hour Glass","Sealant","Chalk","Fishing Rod","Metal File","Shovel","Chisel","Glue","Nails","Tongs"],jt=["","Bottle","Horn","Mirror","Soap","Card Deck","Incense","Perfume","Sponge","Dice Set","Instrument","Quill & Ink","Tar Pot","Face Paint","Lens","Salt Pack","Twine","Fake Jewels","Marbles","Small Bell","Whistle"],Ql=()=>{const t=Xl()[j(1,20)],e=l=>l<=3?Et[j(1,20)]:l<=5?jt[j(1,20)]:l<=13?Lt[j(1,20)]:l<=15?Dt()[j(1,20)]:l<=17?Ft()[j(1,20)]:`Spellbook (${et[j(1,100)]})`;return[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:Dt()[j(1,20)],inHand:!1,fatigue:!1},{title:Ft()[j(1,20)],inHand:!1,fatigue:!1},{title:t==="both"?"Helmet (+1 Armor)":t,inHand:!1,fatigue:!1},{title:t==="both"?"Shield (+1 Armor)":"",inHand:!1,fatigue:!1},{title:Lt[j(1,20)],inHand:!1,fatigue:!1},{title:Et[j(1,20)],inHand:!1,fatigue:!1},{title:jt[j(1,20)],inHand:!1,fatigue:!1},{title:e(j(1,20)),inHand:!1,fatigue:!1}].sort((l,s)=>l.title>s.title?-1:1)};function It(t,e,n){const l=t.slice();return l[8]=e[n],l}function Nt(t){let e,n,l,s,a,i,r=U(t[0]),o=[];for(let c=0;c<r.length;c+=1)o[c]=Vt(It(t,r,c));return{c(){e=b("div");for(let c=0;c<o.length;c+=1)o[c].c();m(e,"class","list svelte-6f0779"),m(e,"style",n=`top: -${t[0].length/2*25}%`)},m(c,f){S(c,e,f);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);s=!0,a||(i=[Qt(un.call(null,e)),x(e,"click_outside",t[6])],a=!0)},p(c,f){if(f&9){r=U(c[0]);let u;for(u=0;u<r.length;u+=1){const d=It(c,r,u);o[u]?o[u].p(d,f):(o[u]=Vt(d),o[u].c(),o[u].m(e,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=r.length}(!s||f&1&&n!==(n=`top: -${c[0].length/2*25}%`))&&m(e,"style",n)},i(c){s||(c&&he(()=>{s&&(l||(l=je(e,Ne,{delay:100,duration:200,easing:Ie,axis:"y"},!0)),l.run(1))}),s=!0)},o(c){c&&(l||(l=je(e,Ne,{delay:100,duration:200,easing:Ie,axis:"y"},!1)),l.run(0)),s=!1},d(c){c&&H(e),ge(o,c),c&&l&&l.end(),a=!1,oe(i)}}}function Vt(t){let e,n=t[8]+"",l,s,a,i;function r(){return t[5](t[8])}return{c(){e=b("button"),l=F(n),s=M(),m(e,"class","item svelte-6f0779")},m(o,c){S(o,e,c),g(e,l),g(e,s),a||(i=x(e,"click",r),a=!0)},p(o,c){t=o,c&1&&n!==(n=t[8]+"")&&te(l,n)},d(o){o&&H(e),a=!1,i()}}}function Zl(t){let e,n,l,s,a,i,r=t[2]&&Nt(t);return{c(){e=b("div"),n=b("button"),l=F(t[1]),s=M(),r&&r.c(),m(n,"class","select svelte-6f0779"),m(e,"class","input svelte-6f0779")},m(o,c){S(o,e,c),g(e,n),g(n,l),g(e,s),r&&r.m(e,null),a||(i=x(n,"click",t[4]),a=!0)},p(o,[c]){c&2&&te(l,o[1]),o[2]?r?(r.p(o,c),c&4&&p(r,1)):(r=Nt(o),r.c(),p(r,1),r.m(e,null)):r&&(ne(),k(r,1,1,()=>{r=null}),le())},i(o){p(r)},o(o){k(r)},d(o){o&&H(e),r&&r.d(),a=!1,i()}}}function xl(t,e,n){let{options:l=[""]}=e,{value:s}=e;const a=ce();let i=!1;const r=u=>{n(2,i=!1),a("select",u)},o=()=>n(2,i=!0),c=u=>r(u),f=()=>n(2,i=!1);return t.$$set=u=>{"options"in u&&n(0,l=u.options),"value"in u&&n(1,s=u.value)},[l,s,i,r,o,c,f]}class es extends q{constructor(e){super(),W(this,e,xl,Zl,N,{options:0,value:1})}}const We=()=>[{title:"Cleric",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"War Hammer (d10, bulky)",inHand:!1,fatigue:!1},{title:"Chainmail (2 Armor, bulky)",inHand:!1,fatigue:!1},{title:"Gauntlets (+1 Armor)",inHand:!1,fatigue:!1},{title:"Cleansing Blade (d6)",inHand:!1,fatigue:!1},{title:"Holy Symbol (Ward once per day)",inHand:!1,fatigue:!1},{title:"Cloak of the Order",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Dowser",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Sickle (d6)",inHand:!1,fatigue:!1},{title:"Patchwork Doublet (+1 Armor)",inHand:!1,fatigue:!1},{title:"Dowsing Rod",inHand:!1,fatigue:!1},{title:"Eyestone (Sense if placed in fresh water)",inHand:!1,fatigue:!1},{title:"Worn Map",inHand:!1,fatigue:!1},{title:"Spyglass",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Dwarf",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Prickly Root (d6)",inHand:!1,fatigue:!1},{title:"Pinecone Lattice (1 Armor)",inHand:!1,fatigue:!1},{title:"Trowel",inHand:!1,fatigue:!1},{title:"Jar of Forest Ants",inHand:!1,fatigue:!1},{title:"Poisonous mushroom",inHand:!1,fatigue:!1},{title:"Hand Drill",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Elf",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Elegant Sword (d8)",inHand:!1,fatigue:!1},{title:"Recurve Bow (d8)",inHand:!1,fatigue:!1},{title:"Gilt Clothing (1 Armor)",inHand:!1,fatigue:!1},{title:"Spellbook (Detect Magic)",inHand:!1,fatigue:!1},{title:"Golden Flute",inHand:!1,fatigue:!1},{title:"Air Bladder",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Fighter",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Glaive (d10, bulky)",inHand:!1,fatigue:!1},{title:"Scimitar (d8)",inHand:!1,fatigue:!1},{title:"Shortsword (d6)",inHand:!1,fatigue:!1},{title:"Shortsword (d6)",inHand:!1,fatigue:!1},{title:"Tobacco Pouch & Pipe",inHand:!1,fatigue:!1},{title:"Dice Set",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Friar",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Scepter (d6)",inHand:!1,fatigue:!1},{title:"Deceptive Robes (+1 Armor)",inHand:!1,fatigue:!1},{title:"Censer & Holy Water",inHand:!1,fatigue:!1},{title:"Jug of Honey Wine",inHand:!1,fatigue:!1},{title:"Folk Songbook",inHand:!1,fatigue:!1},{title:"Cart (+4 slots, bulky)",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Knight",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Longsword (d10, bulky)",inHand:!1,fatigue:!1},{title:"Chainmail (2 Armor, bulky)",inHand:!1,fatigue:!1},{title:"Helmet (+1 Armor)",inHand:!1,fatigue:!1},{title:"Heraldic Cape",inHand:!1,fatigue:!1},{title:"Manacles",inHand:!1,fatigue:!1},{title:"Fine Rope",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Magic User",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Fizzled Staff (d8, bulky)",inHand:!1,fatigue:!1},{title:"Dagger (d6)",inHand:!1,fatigue:!1},{title:`Spellbook (${et[j(1,100)]})`,inHand:!1,fatigue:!1},{title:`Spellbook (${et[j(1,100)]})`,inHand:!1,fatigue:!1},{title:"Ragged Clothing (hidden pockets)",inHand:!1,fatigue:!1},{title:"Leycap (x2, see Relics)",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Thief",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Two daggers (d6+d6)",inHand:!1,fatigue:!1},{title:"Hooded Jerkin (1 Armor)",inHand:!1,fatigue:!1},{title:"Lockpicks",inHand:!1,fatigue:!1},{title:"Caltrops",inHand:!1,fatigue:!1},{title:"Grappling Hook",inHand:!1,fatigue:!1},{title:"Metal File",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Ranger",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Longbow (d8, bulky)",inHand:!1,fatigue:!1},{title:"Hatchet (d6)",inHand:!1,fatigue:!1},{title:"Padded Leathers (1 Armor)",inHand:!1,fatigue:!1},{title:"Large Trap",inHand:!1,fatigue:!1},{title:"Bloodhound | 2 HP, 12 DEX, bite (d6)",inHand:!1,fatigue:!1},{title:"Thundering Horn",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]}];function Bt(t,e,n){const l=t.slice();return l[13]=e[n],l}function Wt(t,e,n){const l=t.slice();return l[16]=e[n],l}function qt(t){let e,n,l,s=t[0][t[16]]+"",a,i,r,o;function c(){return t[8](t[16])}return{c(){e=b("button"),n=F(t[16]),l=F(": "),a=F(s),m(e,"class",i=re(`item${t[2].includes(t[16])?" selected":""}`)+" svelte-xc8197")},m(f,u){S(f,e,u),g(e,n),g(e,l),g(e,a),r||(o=x(e,"click",c),r=!0)},p(f,u){t=f,u&1&&s!==(s=t[0][t[16]]+"")&&te(a,s),u&4&&i!==(i=re(`item${t[2].includes(t[16])?" selected":""}`)+" svelte-xc8197")&&m(e,"class",i)},d(f){f&&H(e),r=!1,o()}}}function Jt(t){let e,n=U(We().find(t[10]).inventory),l=[];for(let s=0;s<n.length;s+=1)l[s]=Yt(Bt(t,n,s));return{c(){e=b("div");for(let s=0;s<l.length;s+=1)l[s].c();m(e,"class","items-list")},m(s,a){S(s,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(s,a){if(a&2){n=U(We().find(s[10]).inventory);let i;for(i=0;i<n.length;i+=1){const r=Bt(s,n,i);l[i]?l[i].p(r,a):(l[i]=Yt(r),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(s){s&&H(e),ge(l,s)}}}function Gt(t){let e,n=t[13].title+"",l;return{c(){e=b("span"),l=F(n),m(e,"class","item svelte-xc8197")},m(s,a){S(s,e,a),g(e,l)},p(s,a){a&2&&n!==(n=s[13].title+"")&&te(l,n)},d(s){s&&H(e)}}}function Yt(t){let e,n=t[13].title&&Gt(t);return{c(){n&&n.c(),e=ln()},m(l,s){n&&n.m(l,s),S(l,e,s)},p(l,s){l[13].title?n?n.p(l,s):(n=Gt(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(l){l&&H(e),n&&n.d(l)}}}function ts(t){let e;return{c(){e=F("Back")},m(n,l){S(n,e,l)},d(n){n&&H(e)}}}function ns(t){let e;return{c(){e=F("Save")},m(n,l){S(n,e,l)},d(n){n&&H(e)}}}function ls(t){let e,n,l,s,a,i,r,o,c,f,u,d,_,h,y,v,$,z,B,L,V,D,P,w,O,J,_e;a=new rt({props:{value:t[0].name,placeholder:"Name"}}),a.$on("input",t[7]);let $e=U(["str","dex","wil"]),K=[];for(let T=0;T<3;T+=1)K[T]=qt(Wt(t,$e,T));z=new es({props:{options:t[4],value:t[1]}}),z.$on("select",t[9]);let G=t[1]!=="random"&&Jt(t);return w=new Z({props:{$$slots:{default:[ts]},$$scope:{ctx:t}}}),w.$on("click",t[11]),J=new Z({props:{disabled:!t[0].name,$$slots:{default:[ns]},$$scope:{ctx:t}}}),J.$on("click",t[12]),{c(){e=b("div"),n=b("h2"),n.textContent="Create a character",l=M(),s=b("div"),R(a.$$.fragment),i=M(),r=b("section"),o=b("div"),o.innerHTML='<span class="text svelte-xc8197">Stats</span>',c=M(),f=b("div");for(let T=0;T<3;T+=1)K[T].c();u=M(),d=b("span"),d.textContent=`You can swap two of your stats by selecting or deselecting them with a
        click, and the change will take effect after character creation.`,_=M(),h=b("section"),y=b("div"),y.innerHTML='<span class="text svelte-xc8197">Starting gear</span>',v=M(),$=b("div"),R(z.$$.fragment),B=M(),L=b("span"),L.textContent=`You can use randomly generated starting gear or choose one of the
        starting packages.`,V=M(),G&&G.c(),D=M(),P=b("div"),R(w.$$.fragment),O=M(),R(J.$$.fragment),m(n,"class","title svelte-xc8197"),m(s,"class","name svelte-xc8197"),m(o,"class","heading svelte-xc8197"),m(d,"class","info svelte-xc8197"),m(f,"class","stats svelte-xc8197"),m(r,"class","wrap svelte-xc8197"),m(y,"class","heading svelte-xc8197"),m(L,"class","info svelte-xc8197"),m($,"class","inventory svelte-xc8197"),m(h,"class","wrap svelte-xc8197"),m(P,"class","controls svelte-xc8197"),m(e,"class","form svelte-xc8197")},m(T,E){S(T,e,E),g(e,n),g(e,l),g(e,s),C(a,s,null),g(e,i),g(e,r),g(r,o),g(r,c),g(r,f);for(let ae=0;ae<3;ae+=1)K[ae]&&K[ae].m(f,null);g(f,u),g(f,d),g(e,_),g(e,h),g(h,y),g(h,v),g(h,$),C(z,$,null),g($,B),g($,L),g($,V),G&&G.m($,null),g(e,D),g(e,P),C(w,P,null),g(P,O),C(J,P,null),_e=!0},p(T,[E]){const ae={};if(E&1&&(ae.value=T[0].name),a.$set(ae),E&37){$e=U(["str","dex","wil"]);let ee;for(ee=0;ee<3;ee+=1){const ft=Wt(T,$e,ee);K[ee]?K[ee].p(ft,E):(K[ee]=qt(ft),K[ee].c(),K[ee].m(f,u))}for(;ee<3;ee+=1)K[ee].d(1)}const ot={};E&2&&(ot.value=T[1]),z.$set(ot),T[1]!=="random"?G?G.p(T,E):(G=Jt(T),G.c(),G.m($,null)):G&&(G.d(1),G=null);const ct={};E&524288&&(ct.$$scope={dirty:E,ctx:T}),w.$set(ct);const qe={};E&1&&(qe.disabled=!T[0].name),E&524288&&(qe.$$scope={dirty:E,ctx:T}),J.$set(qe)},i(T){_e||(p(a.$$.fragment,T),p(z.$$.fragment,T),p(w.$$.fragment,T),p(J.$$.fragment,T),_e=!0)},o(T){k(a.$$.fragment,T),k(z.$$.fragment,T),k(w.$$.fragment,T),k(J.$$.fragment,T),_e=!1},d(T){T&&H(e),A(a),ge(K,T),A(z),G&&G.d(),A(w),A(J)}}}function ss(t,e,n){const l=ce();let s={name:"",str:j(3,6),dex:j(3,6),wil:j(3,6),hp:j(1,6),gp:j(3,6)},a=["random",...We().map(v=>v.title)],i=a[0],r=[];const o=v=>{if(r.includes(v)){const $=r.indexOf(v,0);$!==-1&&(r.splice($,1),n(2,r=[...r]))}else{if(r.length>=2)return;n(2,r=[...r,v])}},c=()=>{if(r.length===2){const v=s[r[0]],$=s[r[1]];n(0,s[r[0]]=$,s),n(0,s[r[1]]=v,s)}ue.set(s.name),ie.set({str:s.str,dex:s.dex,wil:s.wil,strMax:s.str,dexMax:s.dex,wilMax:s.wil}),X.set({hp:s.hp,hpMax:s.hp,armor:0,deprived:!1}),pe.set({gp:s.gp.toString(),sp:"0",cp:"0"}),de.set(i==="random"?Ql():We().find(v=>v.title===i).inventory),Y()};return[s,i,r,l,a,o,c,v=>n(0,s.name=v.detail,s),v=>o(v),v=>n(1,i=v.detail),v=>v.title===i,()=>l("hide-form"),()=>c()]}class as extends q{constructor(e){super(),W(this,e,ss,ls,N,{})}}const dn=t=>{const e=it();let n=!0;return Object.keys(e).forEach(l=>{Object.keys(t).includes(l)||(console.log(e,t),n=!1)}),n},is=t=>{if(t.target){const e=new FileReader;e.onload=()=>{if(e.result){const l=JSON.parse(e.result);dn(l)&&(ue.set(l.name),ie.set(l.abilities),X.set(l.stats),pe.set(l.coins),de.set(l.inventory),Q.set(l.scars))}};const n=t.target.files;n&&e.readAsText(n[0])}};function rs(t){let e,n,l,s,a,i;return{c(){e=b("div"),n=b("input"),l=M(),s=b("label"),s.textContent="Upload the character (json)",m(n,"id","upload"),m(n,"type","file"),m(s,"for","upload"),m(s,"class","label svelte-gdmlp7"),m(e,"class","file svelte-gdmlp7")},m(r,o){S(r,e,o),g(e,n),g(e,l),g(e,s),a||(i=x(n,"change",t[1]),a=!0)},p:I,i:I,o:I,d(r){r&&H(e),a=!1,i()}}}function os(t){const e=ce();return[e,l=>e("change",l)]}class cs extends q{constructor(e){super(),W(this,e,os,rs,N,{})}}function fs(t){let e;return{c(){e=F("Roll a character")},m(n,l){S(n,e,l)},d(n){n&&H(e)}}}function us(t){let e;return{c(){e=F("Wrong file type or json structure")},m(n,l){S(n,e,l)},d(n){n&&H(e)}}}function ds(t){let e,n,l,s,a,i,r;return n=new Z({props:{$$slots:{default:[fs]},$$scope:{ctx:t}}}),n.$on("click",t[3]),s=new cs({}),s.$on("change",t[4]),i=new De({props:{submission:!0,isShown:t[0],$$slots:{default:[us]},$$scope:{ctx:t}}}),i.$on("cancel",t[5]),{c(){e=b("div"),R(n.$$.fragment),l=M(),R(s.$$.fragment),a=M(),R(i.$$.fragment),m(e,"class","menu svelte-1ugech7")},m(o,c){S(o,e,c),C(n,e,null),g(e,l),C(s,e,null),S(o,a,c),C(i,o,c),r=!0},p(o,[c]){const f={};c&128&&(f.$$scope={dirty:c,ctx:o}),n.$set(f);const u={};c&1&&(u.isShown=o[0]),c&128&&(u.$$scope={dirty:c,ctx:o}),i.$set(u)},i(o){r||(p(n.$$.fragment,o),p(s.$$.fragment,o),p(i.$$.fragment,o),r=!0)},o(o){k(n.$$.fragment,o),k(s.$$.fragment,o),k(i.$$.fragment,o),r=!1},d(o){o&&(H(e),H(a)),A(n),A(s),A(i,o)}}}function hs(t,e,n){let l;se(t,ue,f=>n(6,l=f));const s=ce();let a=!1;const i=f=>{is(f.detail),l.length||n(0,a=!0)};return[a,s,i,()=>s("show-form"),f=>i(f),()=>n(0,a=!1)]}class gs extends q{constructor(e){super(),W(this,e,hs,ds,N,{})}}function ms(t){let e,n;return e=new as({}),e.$on("hide-form",t[2]),{c(){R(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},p:I,i(l){n||(p(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function _s(t){let e,n,l,s;return l=new gs({}),l.$on("show-form",t[1]),{c(){e=b("div"),e.innerHTML=`<h1 class="title svelte-cxqggy">Pocket Cairn
        <span class="version svelte-cxqggy">v.0.1</span></h1> <span class="info svelte-cxqggy">Cairn is a game created by
        <a href="https://newschoolrevolution.com" class="svelte-cxqggy">Yochai Gal</a><br/>
        Official game page -
        <a href="cairnrpg.com" class="svelte-cxqggy">cairnrpg.com</a><br/>
        Rate or comment this application on
        <a href="https://github.com/BrightsDays/mobile-cairn" class="svelte-cxqggy">GitHub</a> :)</span>`,n=M(),R(l.$$.fragment),m(e,"class","header svelte-cxqggy")},m(a,i){S(a,e,i),S(a,n,i),C(l,a,i),s=!0},p:I,i(a){s||(p(l.$$.fragment,a),s=!0)},o(a){k(l.$$.fragment,a),s=!1},d(a){a&&(H(e),H(n)),A(l,a)}}}function ps(t){let e,n,l,s;const a=[_s,ms],i=[];function r(o,c){return o[0]?1:0}return n=r(t),l=i[n]=a[n](t),{c(){e=b("div"),l.c(),m(e,"class","creation svelte-cxqggy")},m(o,c){S(o,e,c),i[n].m(e,null),s=!0},p(o,[c]){let f=n;n=r(o),n===f?i[n].p(o,c):(ne(),k(i[f],1,1,()=>{i[f]=null}),le(),l=i[n],l?l.p(o,c):(l=i[n]=a[n](o),l.c()),p(l,1),l.m(e,null))},i(o){s||(p(l),s=!0)},o(o){k(l),s=!1},d(o){o&&H(e),i[n].d()}}}function $s(t,e,n){let l=!1;return[l,()=>n(0,l=!0),()=>n(0,l=!1)]}class bs extends q{constructor(e){super(),W(this,e,$s,ps,N,{})}}function vs(t){let e,n;return e=new bs({}),{c(){R(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(p(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function ks(t){let e,n;return e=new Kl({}),{c(){R(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(p(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function ys(t){let e,n,l,s;const a=[ks,vs],i=[];function r(o,c){return o[0]?0:1}return n=r(t),l=i[n]=a[n](t),{c(){e=b("main"),l.c(),m(e,"class","svelte-ncbruq")},m(o,c){S(o,e,c),i[n].m(e,null),s=!0},p(o,[c]){let f=n;n=r(o),n!==f&&(ne(),k(i[f],1,1,()=>{i[f]=null}),le(),l=i[n],l||(l=i[n]=a[n](o),l.c()),p(l,1),l.m(e,null))},i(o){s||(p(l),s=!0)},o(o){k(l),s=!1},d(o){o&&H(e),i[n].d()}}}function ws(t,e,n){let l;se(t,ue,a=>n(1,l=a));let s=l;return ue.subscribe(a=>n(0,s=a)),Hn(()=>{const a=localStorage.getItem("pc__character");a&&dn(JSON.parse(a))&&(ue.set(JSON.parse(a).name),ie.set(JSON.parse(a).abilities),X.set(JSON.parse(a).stats),pe.set(JSON.parse(a).coins),de.set(JSON.parse(a).inventory),Q.set(JSON.parse(a).scars),Ve.set(JSON.parse(a).notes))}),[s]}class Hs extends q{constructor(e){super(),W(this,e,ws,ys,N,{})}}new Hs({target:document.getElementById("app")});
