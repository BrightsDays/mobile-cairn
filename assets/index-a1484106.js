var fn=Object.defineProperty;var un=(t,e,n)=>e in t?fn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ve=(t,e,n)=>(un(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function z(){}const Gt=t=>t;function dn(t,e){for(const n in e)t[n]=e[n];return t}function Jt(t){return t()}function rt(){return Object.create(null)}function fe(t){t.forEach(Jt)}function Ae(t){return typeof t=="function"}function B(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Pe;function ot(t,e){return t===e?!0:(Pe||(Pe=document.createElement("a")),Pe.href=e,t===Pe.href)}function hn(t){return Object.keys(t).length===0}function gn(t,...e){if(t==null){for(const l of e)l(void 0);return z}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ie(t,e,n){t.$$.on_destroy.push(gn(e,n))}function Qe(t,e,n,l){if(t){const s=Yt(t,e,n,l);return t[0](s)}}function Yt(t,e,n,l){return t[1]&&l?dn(n.ctx.slice(),t[1](l(e))):n.ctx}function Ze(t,e,n,l){if(t[2]&&l){const s=t[2](l(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const a=[],i=Math.max(e.dirty.length,s.length);for(let o=0;o<i;o+=1)a[o]=e.dirty[o]|s[o];return a}return e.dirty|s}return e.dirty}function xe(t,e,n,l,s,a){if(s){const i=Yt(e,n,l,a);t.p(i,s)}}function et(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function re(t){return t??""}function Ut(t){return t&&Ae(t.destroy)?t.destroy:z}const Kt=typeof window<"u";let Xt=Kt?()=>window.performance.now():()=>Date.now(),tt=Kt?t=>requestAnimationFrame(t):z;const ye=new Set;function Qt(t){ye.forEach(e=>{e.c(t)||(ye.delete(e),e.f())}),ye.size!==0&&tt(Qt)}function Zt(t){let e;return ye.size===0&&tt(Qt),{promise:new Promise(n=>{ye.add(e={c:t,f:n})}),abort(){ye.delete(e)}}}function _(t,e){t.appendChild(e)}function xt(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function _n(t){const e=v("style");return e.textContent="/* empty */",mn(xt(t),e),e.sheet}function mn(t,e){return _(t.head||t,e),e.sheet}function H(t,e,n){t.insertBefore(e,n||null)}function w(t){t.parentNode&&t.parentNode.removeChild(t)}function ge(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function L(t){return document.createTextNode(t)}function M(){return L(" ")}function en(){return L("")}function ne(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function m(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function pn(t){return Array.from(t.childNodes)}function le(t,e){e=""+e,t.data!==e&&(t.data=e)}function ct(t,e){t.value=e??""}function tn(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}const De=new Map;let Fe=0;function $n(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function bn(t,e){const n={stylesheet:_n(e),rules:{}};return De.set(t,n),n}function Je(t,e,n,l,s,a,i,o=0){const r=16.666/l;let c=`{
`;for(let p=0;p<=1;p+=r){const $=e+(n-e)*a(p);c+=p*100+`%{${i($,1-$)}}
`}const f=c+`100% {${i(n,1-n)}}
}`,u=`__svelte_${$n(f)}_${o}`,d=xt(t),{stylesheet:g,rules:h}=De.get(d)||bn(d,t);h[u]||(h[u]=!0,g.insertRule(`@keyframes ${u} ${f}`,g.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${u} ${l}ms linear ${s}ms 1 both`,Fe+=1,u}function Ye(t,e){const n=(t.style.animation||"").split(", "),l=n.filter(e?a=>a.indexOf(e)<0:a=>a.indexOf("__svelte")===-1),s=n.length-l.length;s&&(t.style.animation=l.join(", "),Fe-=s,Fe||vn())}function vn(){tt(()=>{Fe||(De.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&w(e)}),De.clear())})}let Ce;function Se(t){Ce=t}function nn(){if(!Ce)throw new Error("Function called outside component initialization");return Ce}function kn(t){nn().$$.on_mount.push(t)}function ue(){const t=nn();return(e,n,{cancelable:l=!1}={})=>{const s=t.$$.callbacks[e];if(s){const a=tn(e,n,{cancelable:l});return s.slice().forEach(i=>{i.call(t,a)}),!a.defaultPrevented}return!0}}const ke=[],ft=[];let we=[];const ut=[],yn=Promise.resolve();let Ue=!1;function wn(){Ue||(Ue=!0,yn.then(ln))}function he(t){we.push(t)}const Ne=new Set;let be=0;function ln(){if(be!==0)return;const t=Ce;do{try{for(;be<ke.length;){const e=ke[be];be++,Se(e),Hn(e.$$)}}catch(e){throw ke.length=0,be=0,e}for(Se(null),ke.length=0,be=0;ft.length;)ft.pop()();for(let e=0;e<we.length;e+=1){const n=we[e];Ne.has(n)||(Ne.add(n),n())}we.length=0}while(ke.length);for(;ut.length;)ut.pop()();Ue=!1,Ne.clear(),Se(t)}function Hn(t){if(t.fragment!==null){t.update(),fe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(he)}}function Sn(t){const e=[],n=[];we.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),we=e}let He;function sn(){return He||(He=Promise.resolve(),He.then(()=>{He=null})),He}function Me(t,e,n){t.dispatchEvent(tn(`${e?"intro":"outro"}${n}`))}const Oe=new Set;let oe;function ee(){oe={r:0,c:[],p:oe}}function te(){oe.r||fe(oe.c),oe=oe.p}function b(t,e){t&&t.i&&(Oe.delete(t),t.i(e))}function k(t,e,n,l){if(t&&t.o){if(Oe.has(t))return;Oe.add(t),oe.c.push(()=>{Oe.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}const an={duration:0};function Mn(t,e,n){const l={direction:"in"};let s=e(t,n,l),a=!1,i,o,r=0;function c(){i&&Ye(t,i)}function f(){const{delay:d=0,duration:g=300,easing:h=Gt,tick:y=z,css:p}=s||an;p&&(i=Je(t,0,1,g,d,h,p,r++)),y(0,1);const $=Xt()+d,T=$+g;o&&o.abort(),a=!0,he(()=>Me(t,!0,"start")),o=Zt(O=>{if(a){if(O>=T)return y(1,0),Me(t,!0,"end"),c(),a=!1;if(O>=$){const D=h((O-$)/g);y(D,1-D)}}return a})}let u=!1;return{start(){u||(u=!0,Ye(t),Ae(s)?(s=s(l),sn().then(f)):f())},invalidate(){u=!1},end(){a&&(c(),a=!1)}}}function Le(t,e,n,l){let a=e(t,n,{direction:"both"}),i=l?0:1,o=null,r=null,c=null,f;function u(){c&&Ye(t,c)}function d(h,y){const p=h.b-i;return y*=Math.abs(p),{a:i,b:h.b,d:p,duration:y,start:h.start,end:h.start+y,group:h.group}}function g(h){const{delay:y=0,duration:p=300,easing:$=Gt,tick:T=z,css:O}=a||an,D={start:Xt()+y,b:h};h||(D.group=oe,oe.r+=1),"inert"in t&&(h?f!==void 0&&(t.inert=f):(f=t.inert,t.inert=!0)),o||r?r=D:(O&&(u(),c=Je(t,i,h,p,y,$,O)),h&&T(0,1),o=d(D,p),he(()=>Me(t,h,"start")),Zt(W=>{if(r&&W>r.start&&(o=d(r,p),r=null,Me(t,o.b,"start"),O&&(u(),c=Je(t,i,o.b,o.duration,0,$,a.css))),o){if(W>=o.end)T(i=o.b,1-i),Me(t,o.b,"end"),r||(o.b?u():--o.group.r||fe(o.group.c)),o=null;else if(W>=o.start){const E=W-o.start;i=o.a+o.d*$(E/o.duration),T(i,1-i)}}return!!(o||r)}))}return{run(h){Ae(a)?sn().then(()=>{a=a({direction:h?"in":"out"}),g(h)}):g(h)},end(){u(),o=r=null}}}function Y(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function P(t){t&&t.c()}function C(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),he(()=>{const a=t.$$.on_mount.map(Jt).filter(Ae);t.$$.on_destroy?t.$$.on_destroy.push(...a):fe(a),t.$$.on_mount=[]}),s.forEach(he)}function A(t,e){const n=t.$$;n.fragment!==null&&(Sn(n.after_update),fe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Cn(t,e){t.$$.dirty[0]===-1&&(ke.push(t),wn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function V(t,e,n,l,s,a,i,o=[-1]){const r=Ce;Se(t);const c=t.$$={fragment:null,ctx:[],props:a,update:z,not_equal:s,bound:rt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:rt(),dirty:o,skip_bound:!1,root:e.target||r.$$.root};i&&i(c.root);let f=!1;if(c.ctx=n?n(t,e.props||{},(u,d,...g)=>{const h=g.length?g[0]:d;return c.ctx&&s(c.ctx[u],c.ctx[u]=h)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](h),f&&Cn(t,u)),d}):[],c.update(),f=!0,fe(c.before_update),c.fragment=l?l(c.ctx):!1,e.target){if(e.hydrate){const u=pn(e.target);c.fragment&&c.fragment.l(u),u.forEach(w)}else c.fragment&&c.fragment.c();e.intro&&b(t.$$.fragment),C(t,e.target,e.anchor),ln()}Se(r)}class N{constructor(){Ve(this,"$$");Ve(this,"$$set")}$destroy(){A(this,1),this.$destroy=z}$on(e,n){if(!Ae(n))return z;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!hn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const An="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(An);const ve=[];function pe(t,e=z){let n;const l=new Set;function s(o){if(B(t,o)&&(t=o,n)){const r=!ve.length;for(const c of l)c[1](),ve.push(c,t);if(r){for(let c=0;c<ve.length;c+=2)ve[c][0](ve[c+1]);ve.length=0}}}function a(o){s(o(t))}function i(o,r=z){const c=[o,r];return l.add(c),l.size===1&&(n=e(s,a)||z),o(t),()=>{l.delete(c),l.size===0&&n&&(n(),n=null)}}return{set:s,update:a,subscribe:i}}const I=(t=1,e=6)=>{const n=[];for(let l=0;l<t;l++){const s=Math.floor(Math.random()*e)+1;n.push(s)}return n.reduce((l,s)=>l+s,0)},Pn=()=>{const{subscribe:t,set:e,update:n}=pe([{key:"4",value:4,count:0},{key:"6",value:6,count:0},{key:"8",value:8,count:0},{key:"10",value:10,count:0},{key:"12",value:12,count:0},{key:"20",value:20,count:0}]);return{subscribe:t,set:e,roll:l=>n(s=>(s.find(a=>a.key===l).count+=1,s.find(a=>a.key===l).value=I(1,+l),[...s]))}},We=Pn();function rn(t){const e=t-1;return e*e*e+1}function Tn(t){return t*t*t*t*t}function Ee(t){return--t*t*t*t*t+1}function je(t,{delay:e=0,duration:n=400,easing:l=rn,axis:s="y"}={}){const a=getComputedStyle(t),i=+a.opacity,o=s==="y"?"height":"width",r=parseFloat(a[o]),c=s==="y"?["top","bottom"]:["left","right"],f=c.map($=>`${$[0].toUpperCase()}${$.slice(1)}`),u=parseFloat(a[`padding${f[0]}`]),d=parseFloat(a[`padding${f[1]}`]),g=parseFloat(a[`margin${f[0]}`]),h=parseFloat(a[`margin${f[1]}`]),y=parseFloat(a[`border${f[0]}Width`]),p=parseFloat(a[`border${f[1]}Width`]);return{delay:e,duration:n,easing:l,css:$=>`overflow: hidden;opacity: ${Math.min($*20,1)*i};${o}: ${$*r}px;padding-${c[0]}: ${$*u}px;padding-${c[1]}: ${$*d}px;margin-${c[0]}: ${$*g}px;margin-${c[1]}: ${$*h}px;border-${c[0]}-width: ${$*y}px;border-${c[1]}-width: ${$*p}px;`}}function On(t,{delay:e=0,duration:n=400,easing:l=rn,start:s=0,opacity:a=0}={}){const i=getComputedStyle(t),o=+i.opacity,r=i.transform==="none"?"":i.transform,c=1-s,f=o*(1-a);return{delay:e,duration:n,easing:l,css:(u,d)=>`
			transform: ${r} scale(${1-c*d});
			opacity: ${o-f*d}
		`}}function dt(t,e,n){const l=t.slice();return l[5]=e[n],l[7]=n,l}function ht(t){let e,n=t[5].value+"",l,s;return{c(){e=v("span"),l=L(n),m(e,"class","svelte-1yf6ssf")},m(a,i){H(a,e,i),_(e,l)},p(a,i){i&1&&n!==(n=a[5].value+"")&&le(l,n)},i(a){a&&(s||he(()=>{s=Mn(e,On,{delay:150,duration:200,easing:Tn}),s.start()}))},o:z,d(a){a&&w(e)}}}function gt(t){let e,n=t[5].count,l,s,a,i,o=ht(t);function r(){return t[3](t[5],t[7])}return{c(){e=v("button"),o.c(),l=M(),m(e,"class",s=re(`dice d${t[5].key}${t[1]===t[7]?" green":""}`)+" svelte-1yf6ssf")},m(c,f){H(c,e,f),o.m(e,null),_(e,l),a||(i=ne(e,"click",r),a=!0)},p(c,f){t=c,f&1&&B(n,n=t[5].count)?(ee(),k(o,1,1,z),te(),o=ht(t),o.c(),b(o,1),o.m(e,l)):o.p(t,f),f&3&&s!==(s=re(`dice d${t[5].key}${t[1]===t[7]?" green":""}`)+" svelte-1yf6ssf")&&m(e,"class",s)},d(c){c&&w(e),o.d(c),a=!1,i()}}}function Rn(t){let e,n=Y(t[0]),l=[];for(let s=0;s<n.length;s+=1)l[s]=gt(dt(t,n,s));return{c(){e=v("div");for(let s=0;s<l.length;s+=1)l[s].c();m(e,"class","dice-list svelte-1yf6ssf")},m(s,a){H(s,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(s,[a]){if(a&7){n=Y(s[0]);let i;for(i=0;i<n.length;i+=1){const o=dt(s,n,i);l[i]?l[i].p(o,a):(l[i]=gt(o),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},i:z,o:z,d(s){s&&w(e),ge(l,s)}}}function Dn(t,e,n){let l;ie(t,We,r=>n(4,l=r));let s=l;We.subscribe(r=>n(0,s=r));let a;const i=(r,c)=>{We.roll(r),n(1,a=c)};return[s,a,i,(r,c)=>i(r.key,c)]}class Fn extends N{constructor(e){super(),V(this,e,Dn,Rn,B,{})}}const Ln=t=>{let e;ae.subscribe(l=>e=l[`${t}Max`]);const n=I(1,20);return n===1||n<=e},qe=(t,e=1)=>{let n;K.subscribe(s=>n=s.hpMax);const l=I(e,6);t!=="add"?l>n?(K.setMaxHp(l),Q.addHistory(`HP has been set to ${l}.`)):Q.addHistory("HP roll result was too low, no upgrade."):(K.setMaxHp(n+l),Q.addHistory(`${l} has been added to HP.`))},Ge=(t,e)=>{const n=e||["","str","dex","wil"][I(1,3)];let l;ae.subscribe(a=>l=a[`${n}Max`]);const s=I(3,6);if(t!=="add")l<s?(ae.setMaxAbility(n,s),Q.addHistory(`${n.toUpperCase()} has been set to ${s}.`)):Q.addHistory(`${n.toUpperCase()} roll result was too low, no upgrade.`);else if(Ln(n)){const a=I(1,4);K.setMaxHp(l+a),Q.addHistory(`${a} has been added to ${n.toUpperCase()}.`)}else Q.addHistory(`${n.toUpperCase()} save was failed, no upgrade.`)},En=()=>{const t=[],{subscribe:e,set:n,update:l}=pe([...t]);return{subscribe:e,set:n,add:s=>l(a=>{switch(s){case 1:a=[...a,{content:`Lasting Scar on ${["","Neck","Hands","Eye","Chest","Legs","Ear"][I(1,6)]}.`}],qe("change",1);break;case 2:a=[...a,{content:"Rattling Blow. You’re disoriented and shaken. Describe how you refocus."}],qe("change",1);break;case 3:a=[...a,{content:"Walloped: You’re sent flying and land flat on your face, winded. You are deprived until you rest for a few hours, when resolve.",resolve:{action:"increaseHP",type:"add",num:1}}];break;case 4:a=[...a,{content:`Broken Limb: ${["","Leg","Leg","Arm","Arm","Rib","Skull"][I(1,6)]}. Once mended, resolve.`,resolve:{action:"increaseHP",type:"change",num:2}}];break;case 5:a=[...a,{content:"Diseased: You’re afflicted with a gross, uncomfortable infection. When you get over it, resolve.",resolve:{action:"increaseHP",type:"change",num:2}}];break;case 6:a=[...a,{content:"Reorienting Head Wound."}],Ge("change");break;case 7:a=[...a,{content:"Hamstrung: You can barely move until you get serious help and rest. After recovery, resolve.",resolve:{action:"increaseAbility",type:"change",key:"dex"}}];break;case 8:a=[...a,{content:"Deafened: You cannot hear anything until you find extraordinary aid. Regardless, resolve.",resolve:{action:"increaseAbility",type:"add",key:"wil"}}];break;case 9:a=[...a,{content:"Re-brained: Some hidden part of your psyche is knocked loose."}],Ge("change","wil");break;case 10:a=[...a,{content:"Sundered: An appendage is torn off, crippled or useless. The Warden will tell you which. Then resolve.",resolve:{action:"increaseAbility",type:"add",key:"wil"}}];break;case 11:a=[...a,{content:"Mortal Wound: You are deprived and out of action. You die in one hour unless healed. Upon recovery, resolve.",resolve:{action:"increaseHP",type:"change",num:2}}];break;case 12:a=[...a,{content:"Doomed: Death seemed ever so close, but somehow you survived. If your next save against critical damage is a fail, you die horribly. If you pass, resolve",resolve:{action:"increaseHP",type:"change",num:3}}];break}return setTimeout(()=>J(),0),[...a]}),addHistory:s=>setTimeout(()=>l(a=>(a=[...a,{content:s}],setTimeout(()=>J(),0),[...a])),0),resolve:s=>l(a=>{const i=a[s].resolve;switch(i.action){case"increaseHP":qe(i.type,i.num);break;case"increaseAbility":Ge(i.type,i.key);break}return a[s].resolve=null,J(),[...a]}),reset:()=>{n([...t]),J()}}},Q=En(),nt=()=>{let t;ce.subscribe(i=>t=i);let e;ae.subscribe(i=>e=i);let n;K.subscribe(i=>n=i);let l;me.subscribe(i=>l=i);let s;de.subscribe(i=>s=i);let a;return Q.subscribe(i=>a=i),{name:t,abilities:{str:e.str,dex:e.dex,wil:e.wil,strMax:e.strMax,dexMax:e.dexMax,wilMax:e.wilMax},stats:{hp:n.hp,hpMax:n.hpMax,armor:n.armor,deprived:n.deprived},coins:{gp:l.gp,sp:l.sp,cp:l.cp},inventory:s,scars:a}},J=()=>{const t=nt();localStorage.setItem("pc__character",JSON.stringify(t))},jn=()=>{const{subscribe:t,set:e,update:n}=pe({str:0,dex:0,wil:0,strMax:0,dexMax:0,wilMax:0});return{subscribe:t,set:e,increase:l=>n(s=>(s[l]+=s[l]<s[`${l}Max`]?1:0,J(),{...s})),decrease:l=>n(s=>(s[l]-=s[l]>0?1:0,J(),{...s})),setMaxAbility:(l,s)=>n(a=>(a[`${l}Max`]=s,J(),{...a}))}},In=()=>{const{subscribe:t,set:e,update:n}=pe({hp:0,hpMax:10,armor:0,deprived:!1});return{subscribe:t,set:e,increaseHp:()=>n(l=>(l.hp+=l.hp<l.hpMax?1:0,J(),{...l})),decreaseHp:()=>n(l=>(l.hp-=l.hp>0?1:0,J(),{...l})),setMaxHp:l=>n(s=>(s.hpMax=l,J(),{...s})),increaceArmor:()=>n(l=>(l.armor+=l.armor<9?1:0,J(),{...l})),decreaseArmor:()=>n(l=>(l.armor-=l.armor>0?1:0,J(),{...l})),changeDeprived:()=>n(l=>(l.deprived=!l.deprived,J(),{...l}))}},zn=()=>{const{subscribe:t,set:e,update:n}=pe({gp:"0",sp:"0",cp:"0"});return{subscribe:t,set:e,change:(l,s)=>n(a=>(a[l]=s,J(),{...a}))}},Bn=()=>{const{subscribe:t,set:e,update:n}=pe([{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]);return{subscribe:t,set:e,change:l=>n(s=>(s=l,J(),[...s]))}},ce=pe(""),ae=jn(),K=In(),me=zn(),de=Bn();function Vn(t){let e,n;const l=t[9].default,s=Qe(l,t,t[8],null);return{c(){e=v("p"),s&&s.c(),m(e,"class","svelte-16o1dom")},m(a,i){H(a,e,i),s&&s.m(e,null),n=!0},p(a,i){s&&s.p&&(!n||i&256)&&xe(s,l,a,a[8],n?Ze(l,a[8],i,null):et(a[8]),null)},i(a){n||(b(s,a),n=!0)},o(a){k(s,a),n=!1},d(a){a&&w(e),s&&s.d(a)}}}function Nn(t){let e,n;return{c(){e=v("img"),m(e,"class","image svelte-16o1dom"),ot(e.src,n=t[5])||m(e,"src",n),m(e,"alt",t[6])},m(l,s){H(l,e,s)},p(l,s){s&32&&!ot(e.src,n=l[5])&&m(e,"src",n),s&64&&m(e,"alt",l[6])},i:z,o:z,d(l){l&&w(e)}}}function Wn(t){let e,n,l,s,a,i,o,r;const c=[Nn,Vn],f=[];function u(d,g){return d[5]?0:1}return n=u(t),l=f[n]=c[n](t),{c(){e=v("button"),l.c(),m(e,"class",s=re(`button${t[4]?" borderless":""}`)+" svelte-16o1dom"),e.disabled=t[3],m(e,"style",a=`
    min-width: ${t[1]}px;
    height: ${t[1]}px;
    border-radius: ${t[1]/2}px;
    padding: ${t[0]}px;
    font-size: ${t[2]};
    line-height: ${t[2]};
  `)},m(d,g){H(d,e,g),f[n].m(e,null),i=!0,o||(r=ne(e,"click",t[10]),o=!0)},p(d,[g]){let h=n;n=u(d),n===h?f[n].p(d,g):(ee(),k(f[h],1,1,()=>{f[h]=null}),te(),l=f[n],l?l.p(d,g):(l=f[n]=c[n](d),l.c()),b(l,1),l.m(e,null)),(!i||g&16&&s!==(s=re(`button${d[4]?" borderless":""}`)+" svelte-16o1dom"))&&m(e,"class",s),(!i||g&8)&&(e.disabled=d[3]),(!i||g&7&&a!==(a=`
    min-width: ${d[1]}px;
    height: ${d[1]}px;
    border-radius: ${d[1]/2}px;
    padding: ${d[0]}px;
    font-size: ${d[2]};
    line-height: ${d[2]};
  `))&&m(e,"style",a)},i(d){i||(b(l),i=!0)},o(d){k(l),i=!1},d(d){d&&w(e),f[n].d(),o=!1,r()}}}function qn(t,e,n){let{$$slots:l={},$$scope:s}=e,{height:a=40}=e,{padding:i=0}=e,{fontSize:o="1.6rem"}=e,{disabled:r=!1}=e,{borderless:c=!1}=e,{image:f=void 0}=e,{alt:u=void 0}=e;const d=ue(),g=()=>d("click");return t.$$set=h=>{"height"in h&&n(1,a=h.height),"padding"in h&&n(0,i=h.padding),"fontSize"in h&&n(2,o=h.fontSize),"disabled"in h&&n(3,r=h.disabled),"borderless"in h&&n(4,c=h.borderless),"image"in h&&n(5,f=h.image),"alt"in h&&n(6,u=h.alt),"$$scope"in h&&n(8,s=h.$$scope)},t.$$.update=()=>{t.$$.dirty&1&&n(0,i||(i=0))},[i,a,o,r,c,f,u,d,s,l,g]}class Z extends N{constructor(e){super(),V(this,e,qn,Wn,B,{height:1,padding:0,fontSize:2,disabled:3,borderless:4,image:5,alt:6})}}const Gn=(t="character")=>{const e=nt(),n=`${e.name}.json`,l=JSON.stringify(e),s=document.createElement("a");s.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(l)),s.setAttribute("download",n),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)},on=t=>{const e=n=>{t&&!t.contains(n.target)&&!n.defaultPrevented&&t.dispatchEvent(new CustomEvent("click_outside",t))};return document.addEventListener("click",e,!0),{destroy(){document.removeEventListener("click",e,!0)}}};function _t(t){let e,n,l,s,a,i,o,r,c,f,u,d,g=t[1]&&mt(t);const h=t[5].default,y=Qe(h,t,t[9],null);i=new Z({props:{$$slots:{default:[Jn]},$$scope:{ctx:t}}}),i.$on("click",t[6]);let p=!t[2]&&pt(t);return{c(){e=v("div"),g&&g.c(),n=M(),l=v("span"),y&&y.c(),s=M(),a=v("div"),P(i.$$.fragment),o=M(),p&&p.c(),m(l,"class","content svelte-5saxj4"),m(a,"class",r=re(`controls${t[2]?" submission":""}`)+" svelte-5saxj4"),m(e,"class","modal svelte-5saxj4")},m($,T){H($,e,T),g&&g.m(e,null),_(e,n),_(e,l),y&&y.m(l,null),_(e,s),_(e,a),C(i,a,null),_(a,o),p&&p.m(a,null),f=!0,u||(d=[Ut(on.call(null,e)),ne(e,"click_outside",t[8])],u=!0)},p($,T){$[1]?g?g.p($,T):(g=mt($),g.c(),g.m(e,n)):g&&(g.d(1),g=null),y&&y.p&&(!f||T&512)&&xe(y,h,$,$[9],f?Ze(h,$[9],T,null):et($[9]),null);const O={};T&512&&(O.$$scope={dirty:T,ctx:$}),i.$set(O),$[2]?p&&(ee(),k(p,1,1,()=>{p=null}),te()):p?(p.p($,T),T&4&&b(p,1)):(p=pt($),p.c(),b(p,1),p.m(a,null)),(!f||T&4&&r!==(r=re(`controls${$[2]?" submission":""}`)+" svelte-5saxj4"))&&m(a,"class",r)},i($){f||(b(y,$),b(i.$$.fragment,$),b(p),$&&he(()=>{f&&(c||(c=Le(e,je,{delay:250,duration:300,easing:Ee,axis:"y"},!0)),c.run(1))}),f=!0)},o($){k(y,$),k(i.$$.fragment,$),k(p),$&&(c||(c=Le(e,je,{delay:250,duration:300,easing:Ee,axis:"y"},!1)),c.run(0)),f=!1},d($){$&&w(e),g&&g.d(),y&&y.d($),A(i),p&&p.d(),$&&c&&c.end(),u=!1,fe(d)}}}function mt(t){let e,n;return{c(){e=v("h2"),n=L(t[1]),m(e,"class","title svelte-5saxj4")},m(l,s){H(l,e,s),_(e,n)},p(l,s){s&2&&le(n,l[1])},d(l){l&&w(e)}}}function Jn(t){let e;return{c(){e=L("Cancel")},m(n,l){H(n,e,l)},d(n){n&&w(e)}}}function pt(t){let e,n;return e=new Z({props:{disabled:t[3],$$slots:{default:[Yn]},$$scope:{ctx:t}}}),e.$on("click",t[7]),{c(){P(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},p(l,s){const a={};s&8&&(a.disabled=l[3]),s&512&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function Yn(t){let e;return{c(){e=L("OK")},m(n,l){H(n,e,l)},d(n){n&&w(e)}}}function Un(t){let e,n,l=t[0]&&_t(t);return{c(){l&&l.c(),e=en()},m(s,a){l&&l.m(s,a),H(s,e,a),n=!0},p(s,[a]){s[0]?l?(l.p(s,a),a&1&&b(l,1)):(l=_t(s),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(ee(),k(l,1,1,()=>{l=null}),te())},i(s){n||(b(l),n=!0)},o(s){k(l),n=!1},d(s){s&&w(e),l&&l.d(s)}}}function Kn(t,e,n){let{$$slots:l={},$$scope:s}=e,{isShown:a}=e,{title:i=void 0}=e,{submission:o=!1}=e,{disableOk:r=!1}=e;const c=ue(),f=()=>c("cancel"),u=()=>c("ok"),d=()=>c("cancel");return t.$$set=g=>{"isShown"in g&&n(0,a=g.isShown),"title"in g&&n(1,i=g.title),"submission"in g&&n(2,o=g.submission),"disableOk"in g&&n(3,r=g.disableOk),"$$scope"in g&&n(9,s=g.$$scope)},[a,i,o,r,c,l,f,u,d,s]}class Re extends N{constructor(e){super(),V(this,e,Kn,Un,B,{isShown:0,title:1,submission:2,disableOk:3})}}function $t(t){let e,n;return{c(){e=v("span"),n=L(t[0]),m(e,"class","title svelte-mt0x83")},m(l,s){H(l,e,s),_(e,n)},p(l,s){s&1&&le(n,l[0])},d(l){l&&w(e)}}}function Xn(t){let e;return{c(){e=L("−")},m(n,l){H(n,e,l)},d(n){n&&w(e)}}}function bt(t){let e,n;return{c(){e=L("/ "),n=L(t[2])},m(l,s){H(l,e,s),H(l,n,s)},p(l,s){s&4&&le(n,l[2])},d(l){l&&(w(e),w(n))}}}function Qn(t){let e;return{c(){e=L("+")},m(n,l){H(n,e,l)},d(n){n&&w(e)}}}function Zn(t){let e,n,l,s,a,i,o,r,c,f,u,d=t[0]&&$t(t);s=new Z({props:{disabled:t[1]===0,$$slots:{default:[Xn]},$$scope:{ctx:t}}}),s.$on("click",t[5]);let g=!t[3]&&bt(t);return f=new Z({props:{disabled:t[1]===t[2],$$slots:{default:[Qn]},$$scope:{ctx:t}}}),f.$on("click",t[6]),{c(){e=v("div"),d&&d.c(),n=M(),l=v("div"),P(s.$$.fragment),a=M(),i=v("div"),o=L(t[1]),r=M(),g&&g.c(),c=M(),P(f.$$.fragment),m(i,"class","current svelte-mt0x83"),m(l,"class","controls svelte-mt0x83"),m(e,"class","ability svelte-mt0x83")},m(h,y){H(h,e,y),d&&d.m(e,null),_(e,n),_(e,l),C(s,l,null),_(l,a),_(l,i),_(i,o),_(i,r),g&&g.m(i,null),_(l,c),C(f,l,null),u=!0},p(h,[y]){h[0]?d?d.p(h,y):(d=$t(h),d.c(),d.m(e,n)):d&&(d.d(1),d=null);const p={};y&2&&(p.disabled=h[1]===0),y&128&&(p.$$scope={dirty:y,ctx:h}),s.$set(p),(!u||y&2)&&le(o,h[1]),h[3]?g&&(g.d(1),g=null):g?g.p(h,y):(g=bt(h),g.c(),g.m(i,null));const $={};y&6&&($.disabled=h[1]===h[2]),y&128&&($.$$scope={dirty:y,ctx:h}),f.$set($)},i(h){u||(b(s.$$.fragment,h),b(f.$$.fragment,h),u=!0)},o(h){k(s.$$.fragment,h),k(f.$$.fragment,h),u=!1},d(h){h&&w(e),d&&d.d(),A(s),g&&g.d(),A(f)}}}function xn(t,e,n){let{title:l=""}=e,{value:s=0}=e,{maxValue:a=0}=e,{hideMaxValue:i=!1}=e;const o=ue(),r=()=>o("decrease"),c=()=>o("increase");return t.$$set=f=>{"title"in f&&n(0,l=f.title),"value"in f&&n(1,s=f.value),"maxValue"in f&&n(2,a=f.maxValue),"hideMaxValue"in f&&n(3,i=f.hideMaxValue)},[l,s,a,i,o,r,c]}class Ie extends N{constructor(e){super(),V(this,e,xn,Zn,B,{title:0,value:1,maxValue:2,hideMaxValue:3})}}function vt(t,e,n){const l=t.slice();return l[20]=e[n],l[22]=n,l}function kt(t){let e;return{c(){e=v("div"),e.textContent="You have no scars",m(e,"class","item svelte-1vantj3")},m(n,l){H(n,e,l)},d(n){n&&w(e)}}}function el(t){let e,n;return e=new Z({props:{height:30,fontSize:"1rem",disabled:!0,$$slots:{default:[nl]},$$scope:{ctx:t}}}),{c(){P(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function tl(t){let e,n;function l(){return t[8](t[22])}return e=new Z({props:{height:30,fontSize:"1rem",$$slots:{default:[ll]},$$scope:{ctx:t}}}),e.$on("click",l),{c(){P(e.$$.fragment)},m(s,a){C(e,s,a),n=!0},p(s,a){t=s;const i={};a&8388608&&(i.$$scope={dirty:a,ctx:t}),e.$set(i)},i(s){n||(b(e.$$.fragment,s),n=!0)},o(s){k(e.$$.fragment,s),n=!1},d(s){A(e,s)}}}function nl(t){let e;return{c(){e=L("Resolved")},m(n,l){H(n,e,l)},d(n){n&&w(e)}}}function ll(t){let e;return{c(){e=L("Resolve")},m(n,l){H(n,e,l)},d(n){n&&w(e)}}}function yt(t){let e,n=t[20].content+"",l,s,a,i,o,r;const c=[tl,el],f=[];function u(d,g){return d[20].resolve?0:1}return a=u(t),i=f[a]=c[a](t),{c(){e=v("div"),l=L(n),s=M(),i.c(),o=M(),m(e,"class","item resolvable svelte-1vantj3")},m(d,g){H(d,e,g),_(e,l),_(e,s),f[a].m(e,null),_(e,o),r=!0},p(d,g){(!r||g&16)&&n!==(n=d[20].content+"")&&le(l,n);let h=a;a=u(d),a!==h&&(ee(),k(f[h],1,1,()=>{f[h]=null}),te(),i=f[a],i||(i=f[a]=c[a](d),i.c()),b(i,1),i.m(e,o))},i(d){r||(b(i),r=!0)},o(d){k(i),r=!1},d(d){d&&w(e),f[a].d()}}}function sl(t){let e;return{c(){e=L("Add scar")},m(n,l){H(n,e,l)},d(n){n&&w(e)}}}function al(t){let e;return{c(){e=L("Download character (json)")},m(n,l){H(n,e,l)},d(n){n&&w(e)}}}function il(t){let e;return{c(){e=L("Delete character")},m(n,l){H(n,e,l)},d(n){n&&w(e)}}}function rl(t){let e;return{c(){e=L(`Adding a scar is an irreversible action that enables you to advance your
    character. Have you consulted with the Warden to confirm that you can
    acquire a scar?`)},m(n,l){H(n,e,l)},d(n){n&&w(e)}}}function ol(t){let e,n,l;return n=new Ie({props:{value:t[3],maxValue:12,hideMaxValue:!0}}),n.$on("decrease",t[14]),n.$on("increase",t[15]),{c(){e=L(`How many damage points was taken?
    `),P(n.$$.fragment)},m(s,a){H(s,e,a),C(n,s,a),l=!0},p(s,a){const i={};a&8&&(i.value=s[3]),n.$set(i)},i(s){l||(b(n.$$.fragment,s),l=!0)},o(s){k(n.$$.fragment,s),l=!1},d(s){s&&w(e),A(n,s)}}}function cl(t){let e;return{c(){e=L("Do you really want to delete this character?")},m(n,l){H(n,e,l)},d(n){n&&w(e)}}}function fl(t){let e,n,l,s,a,i,o,r,c,f,u,d,g,h,y,p,$,T,O,D=t[4].length===0&&kt(),W=Y(t[4]),E=[];for(let S=0;S<W.length;S+=1)E[S]=yt(vt(t,W,S));const X=S=>k(E[S],1,1,()=>{E[S]=null});return r=new Z({props:{padding:4,disabled:t[5].hp>0,$$slots:{default:[sl]},$$scope:{ctx:t}}}),r.$on("click",t[9]),f=new Z({props:{padding:4,$$slots:{default:[al]},$$scope:{ctx:t}}}),f.$on("click",t[10]),d=new Z({props:{padding:4,$$slots:{default:[il]},$$scope:{ctx:t}}}),d.$on("click",t[11]),h=new Re({props:{isShown:t[1],$$slots:{default:[rl]},$$scope:{ctx:t}}}),h.$on("cancel",t[12]),h.$on("ok",t[13]),p=new Re({props:{isShown:t[2],disableOk:t[3]===0,$$slots:{default:[ol]},$$scope:{ctx:t}}}),p.$on("cancel",t[16]),p.$on("ok",t[17]),T=new Re({props:{isShown:t[0],$$slots:{default:[cl]},$$scope:{ctx:t}}}),T.$on("cancel",t[18]),T.$on("ok",t[19]),{c(){e=v("div"),n=v("span"),n.textContent="Scars history:",l=M(),s=v("div"),a=v("div"),D&&D.c(),i=M();for(let S=0;S<E.length;S+=1)E[S].c();o=M(),P(r.$$.fragment),c=M(),P(f.$$.fragment),u=M(),P(d.$$.fragment),g=M(),P(h.$$.fragment),y=M(),P(p.$$.fragment),$=M(),P(T.$$.fragment),m(n,"class","title svelte-1vantj3"),m(a,"class","wrap svelte-1vantj3"),m(s,"class","scars svelte-1vantj3"),m(e,"class","menu svelte-1vantj3")},m(S,F){H(S,e,F),_(e,n),_(e,l),_(e,s),_(s,a),D&&D.m(a,null),_(a,i);for(let G=0;G<E.length;G+=1)E[G]&&E[G].m(a,null);_(e,o),C(r,e,null),_(e,c),C(f,e,null),_(e,u),C(d,e,null),_(e,g),C(h,e,null),_(e,y),C(p,e,null),_(e,$),C(T,e,null),O=!0},p(S,[F]){if(S[4].length===0?D||(D=kt(),D.c(),D.m(a,i)):D&&(D.d(1),D=null),F&16){W=Y(S[4]);let j;for(j=0;j<W.length;j+=1){const se=vt(S,W,j);E[j]?(E[j].p(se,F),b(E[j],1)):(E[j]=yt(se),E[j].c(),b(E[j],1),E[j].m(a,null))}for(ee(),j=W.length;j<E.length;j+=1)X(j);te()}const G={};F&32&&(G.disabled=S[5].hp>0),F&8388608&&(G.$$scope={dirty:F,ctx:S}),r.$set(G);const _e={};F&8388608&&(_e.$$scope={dirty:F,ctx:S}),f.$set(_e);const $e={};F&8388608&&($e.$$scope={dirty:F,ctx:S}),d.$set($e);const U={};F&2&&(U.isShown=S[1]),F&8388608&&(U.$$scope={dirty:F,ctx:S}),h.$set(U);const q={};F&4&&(q.isShown=S[2]),F&8&&(q.disableOk=S[3]===0),F&8388616&&(q.$$scope={dirty:F,ctx:S}),p.$set(q);const R={};F&1&&(R.isShown=S[0]),F&8388608&&(R.$$scope={dirty:F,ctx:S}),T.$set(R)},i(S){if(!O){for(let F=0;F<W.length;F+=1)b(E[F]);b(r.$$.fragment,S),b(f.$$.fragment,S),b(d.$$.fragment,S),b(h.$$.fragment,S),b(p.$$.fragment,S),b(T.$$.fragment,S),O=!0}},o(S){E=E.filter(Boolean);for(let F=0;F<E.length;F+=1)k(E[F]);k(r.$$.fragment,S),k(f.$$.fragment,S),k(d.$$.fragment,S),k(h.$$.fragment,S),k(p.$$.fragment,S),k(T.$$.fragment,S),O=!1},d(S){S&&w(e),D&&D.d(),ge(E,S),A(r),A(f),A(d),A(h),A(p),A(T)}}}function ul(t,e,n){let l,s;ie(t,Q,X=>n(4,l=X)),ie(t,K,X=>n(5,s=X));let a=!1,i=!1,o=!1,r=0;const c=()=>{Q.add(r),n(2,o=!1),n(3,r=0)},f=()=>{ce.set(""),Q.reset(),localStorage.removeItem("pc__character")};return[a,i,o,r,l,s,c,f,X=>Q.resolve(X),()=>n(1,i=!0),()=>Gn(),()=>n(0,a=!0),()=>n(1,i=!1),()=>{n(2,o=!0),n(1,i=!1)},()=>r>0?n(3,r-=1):n(3,r),()=>r<12?n(3,r+=1):n(3,r),()=>{n(2,o=!1),n(3,r=0)},()=>c(),()=>n(0,a=!1),()=>f()]}class dl extends N{constructor(e){super(),V(this,e,ul,fl,B,{})}}function wt(t,e,n){const l=t.slice();return l[4]=e[n],l}function Ht(t){let e,n;function l(){return t[2](t[4])}function s(){return t[3](t[4])}return e=new Ie({props:{title:t[4],value:t[0][t[4]],maxValue:t[0][`${t[4]}Max`]}}),e.$on("decrease",l),e.$on("increase",s),{c(){P(e.$$.fragment)},m(a,i){C(e,a,i),n=!0},p(a,i){t=a;const o={};i&1&&(o.value=t[0][t[4]]),i&1&&(o.maxValue=t[0][`${t[4]}Max`]),e.$set(o)},i(a){n||(b(e.$$.fragment,a),n=!0)},o(a){k(e.$$.fragment,a),n=!1},d(a){A(e,a)}}}function hl(t){let e,n,l=Y(t[1]),s=[];for(let i=0;i<l.length;i+=1)s[i]=Ht(wt(t,l,i));const a=i=>k(s[i],1,1,()=>{s[i]=null});return{c(){e=v("div");for(let i=0;i<s.length;i+=1)s[i].c();m(e,"class","abilities")},m(i,o){H(i,e,o);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);n=!0},p(i,[o]){if(o&3){l=Y(i[1]);let r;for(r=0;r<l.length;r+=1){const c=wt(i,l,r);s[r]?(s[r].p(c,o),b(s[r],1)):(s[r]=Ht(c),s[r].c(),b(s[r],1),s[r].m(e,null))}for(ee(),r=l.length;r<s.length;r+=1)a(r);te()}},i(i){if(!n){for(let o=0;o<l.length;o+=1)b(s[o]);n=!0}},o(i){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)k(s[o]);n=!1},d(i){i&&w(e),ge(s,i)}}}function gl(t,e,n){let l;return ie(t,ae,o=>n(0,l=o)),[l,["str","dex","wil"],o=>ae.decrease(o),o=>ae.increase(o)]}class _l extends N{constructor(e){super(),V(this,e,gl,hl,B,{})}}function ml(t){let e,n,l,s,a,i,o;return{c(){e=v("label"),n=v("input"),l=M(),s=v("span"),m(n,"type","checkbox"),n.checked=t[1],m(n,"class","svelte-x3sjdj"),m(s,"class","checkmark svelte-x3sjdj"),m(e,"class","checkbox svelte-x3sjdj"),m(e,"style",a=`width: ${t[0]}px;height: ${t[0]}px`)},m(r,c){H(r,e,c),_(e,n),_(e,l),_(e,s),i||(o=ne(n,"change",t[3]),i=!0)},p(r,[c]){c&2&&(n.checked=r[1]),c&1&&a!==(a=`width: ${r[0]}px;height: ${r[0]}px`)&&m(e,"style",a)},i:z,o:z,d(r){r&&w(e),i=!1,o()}}}function pl(t,e,n){let{size:l=0}=e,{checked:s=!1}=e;const a=ue(),i=()=>a("change");return t.$$set=o=>{"size"in o&&n(0,l=o.size),"checked"in o&&n(1,s=o.checked)},[l,s,a,i]}class Ke extends N{constructor(e){super(),V(this,e,pl,ml,B,{size:0,checked:1})}}function $l(t){let e,n,l,s;return{c(){e=v("input"),m(e,"class","input svelte-78edro"),m(e,"placeholder",t[1]),m(e,"style",n=`border-bottom: ${t[2]?"1px solid var(--main)":"none"};`)},m(a,i){H(a,e,i),ct(e,t[0]),l||(s=[ne(e,"input",t[5]),ne(e,"input",t[6])],l=!0)},p(a,[i]){i&2&&m(e,"placeholder",a[1]),i&4&&n!==(n=`border-bottom: ${a[2]?"1px solid var(--main)":"none"};`)&&m(e,"style",n),i&1&&e.value!==a[0]&&ct(e,a[0])},i:z,o:z,d(a){a&&w(e),l=!1,fe(s)}}}function bl(t,e,n){let{value:l="0"}=e,{placeholder:s=""}=e,{border:a=!0}=e,{numbers:i=!1}=e;const o=ue();function r(){l=this.value,n(0,l),n(4,i)}const c=()=>o("input",l);return t.$$set=f=>{"value"in f&&n(0,l=f.value),"placeholder"in f&&n(1,s=f.placeholder),"border"in f&&n(2,a=f.border),"numbers"in f&&n(4,i=f.numbers)},t.$$.update=()=>{t.$$.dirty&17&&n(0,l=i?l.replace(/[^0-9]/g,""):l)},[l,s,a,o,i,r,c]}class lt extends N{constructor(e){super(),V(this,e,bl,$l,B,{value:0,placeholder:1,border:2,numbers:4})}}function St(t,e,n){const l=t.slice();return l[5]=e[n],l[6]=e,l[7]=n,l}function Mt(t){let e,n,l,s,a,i,o,r;function c(){return t[1](t[5],t[6],t[7])}n=new Ke({props:{size:20,checked:t[5].inHand}}),n.$on("change",c);function f(...d){return t[2](t[5],t[6],t[7],...d)}s=new lt({props:{placeholder:"Item",value:t[5].title,border:!1}}),s.$on("input",f);function u(){return t[3](t[5],t[6],t[7])}return i=new Ke({props:{size:20,checked:t[5].fatigue}}),i.$on("change",u),{c(){e=v("div"),P(n.$$.fragment),l=M(),P(s.$$.fragment),a=M(),P(i.$$.fragment),o=M(),m(e,"class","item svelte-1volka6")},m(d,g){H(d,e,g),C(n,e,null),_(e,l),C(s,e,null),_(e,a),C(i,e,null),_(e,o),r=!0},p(d,g){t=d;const h={};g&1&&(h.checked=t[5].inHand),n.$set(h);const y={};g&1&&(y.value=t[5].title),s.$set(y);const p={};g&1&&(p.checked=t[5].fatigue),i.$set(p)},i(d){r||(b(n.$$.fragment,d),b(s.$$.fragment,d),b(i.$$.fragment,d),r=!0)},o(d){k(n.$$.fragment,d),k(s.$$.fragment,d),k(i.$$.fragment,d),r=!1},d(d){d&&w(e),A(n),A(s),A(i)}}}function vl(t){let e,n,l,s,a,i=Y(t[0]),o=[];for(let c=0;c<i.length;c+=1)o[c]=Mt(St(t,i,c));const r=c=>k(o[c],1,1,()=>{o[c]=null});return{c(){e=v("div"),n=v("div"),n.innerHTML='<span class="info svelte-1volka6">Hand</span> <span class="info svelte-1volka6">Fatigue</span>',l=M(),s=v("div");for(let c=0;c<o.length;c+=1)o[c].c();m(n,"class","heading svelte-1volka6"),m(s,"class","list svelte-1volka6"),m(e,"class","inventory svelte-1volka6")},m(c,f){H(c,e,f),_(e,n),_(e,l),_(e,s);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(s,null);a=!0},p(c,[f]){if(f&1){i=Y(c[0]);let u;for(u=0;u<i.length;u+=1){const d=St(c,i,u);o[u]?(o[u].p(d,f),b(o[u],1)):(o[u]=Mt(d),o[u].c(),b(o[u],1),o[u].m(s,null))}for(ee(),u=i.length;u<o.length;u+=1)r(u);te()}},i(c){if(!a){for(let f=0;f<i.length;f+=1)b(o[f]);a=!0}},o(c){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)k(o[f]);a=!1},d(c){c&&w(e),ge(o,c)}}}function kl(t,e,n){let l;ie(t,de,r=>n(4,l=r));const s=l;return[s,(r,c,f)=>{n(0,c[f].inHand=!r.inHand,s),de.change(s)},(r,c,f,u)=>{n(0,c[f].title=u.detail,s),de.change(s)},(r,c,f)=>{n(0,c[f].fatigue=!r.fatigue,s),de.change(s)}]}class yl extends N{constructor(e){super(),V(this,e,kl,vl,B,{})}}function wl(t){let e,n,l,s,a,i,o,r,c,f;return n=new Ie({props:{title:"HP",value:t[0].hp,maxValue:t[0].hpMax}}),n.$on("decrease",K.decreaseHp),n.$on("increase",K.increaseHp),s=new Ie({props:{title:"Armor",value:t[0].armor,maxValue:9,hideMaxValue:!0}}),s.$on("decrease",K.decreaseArmor),s.$on("increase",K.increaceArmor),c=new Ke({props:{size:40,checked:t[0].deprived}}),c.$on("change",K.changeDeprived),{c(){e=v("div"),P(n.$$.fragment),l=M(),P(s.$$.fragment),a=M(),i=v("div"),o=v("span"),o.textContent="Deprived",r=M(),P(c.$$.fragment),m(o,"class","title svelte-1xt6604"),m(i,"class","deprived svelte-1xt6604"),m(e,"class","stats")},m(u,d){H(u,e,d),C(n,e,null),_(e,l),C(s,e,null),_(e,a),_(e,i),_(i,o),_(i,r),C(c,i,null),f=!0},p(u,[d]){const g={};d&1&&(g.value=u[0].hp),d&1&&(g.maxValue=u[0].hpMax),n.$set(g);const h={};d&1&&(h.value=u[0].armor),s.$set(h);const y={};d&1&&(y.checked=u[0].deprived),c.$set(y)},i(u){f||(b(n.$$.fragment,u),b(s.$$.fragment,u),b(c.$$.fragment,u),f=!0)},o(u){k(n.$$.fragment,u),k(s.$$.fragment,u),k(c.$$.fragment,u),f=!1},d(u){u&&w(e),A(n),A(s),A(c)}}}function Hl(t,e,n){let l;return ie(t,K,s=>n(0,l=s)),[l]}class Sl extends N{constructor(e){super(),V(this,e,Hl,wl,B,{})}}function Ct(t,e,n){const l=t.slice();return l[3]=e[n],l}function At(t){let e,n,l,s,a,i;function o(...r){return t[2](t[3],...r)}return s=new lt({props:{value:t[0][t[3]],numbers:!0}}),s.$on("input",o),{c(){e=v("div"),n=v("span"),n.textContent=`${t[3]}:`,l=M(),P(s.$$.fragment),a=M(),m(n,"class","currency svelte-sxs072"),m(e,"class","item svelte-sxs072")},m(r,c){H(r,e,c),_(e,n),_(e,l),C(s,e,null),_(e,a),i=!0},p(r,c){t=r;const f={};c&1&&(f.value=t[0][t[3]]),s.$set(f)},i(r){i||(b(s.$$.fragment,r),i=!0)},o(r){k(s.$$.fragment,r),i=!1},d(r){r&&w(e),A(s)}}}function Ml(t){let e,n,l=Y(t[1]),s=[];for(let i=0;i<l.length;i+=1)s[i]=At(Ct(t,l,i));const a=i=>k(s[i],1,1,()=>{s[i]=null});return{c(){e=v("div");for(let i=0;i<s.length;i+=1)s[i].c();m(e,"class","coins svelte-sxs072")},m(i,o){H(i,e,o);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);n=!0},p(i,[o]){if(o&3){l=Y(i[1]);let r;for(r=0;r<l.length;r+=1){const c=Ct(i,l,r);s[r]?(s[r].p(c,o),b(s[r],1)):(s[r]=At(c),s[r].c(),b(s[r],1),s[r].m(e,null))}for(ee(),r=l.length;r<s.length;r+=1)a(r);te()}},i(i){if(!n){for(let o=0;o<l.length;o+=1)b(s[o]);n=!0}},o(i){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)k(s[o]);n=!1},d(i){i&&w(e),ge(s,i)}}}function Cl(t,e,n){let l;return ie(t,me,i=>n(0,l=i)),[l,["gp","sp","cp"],(i,o)=>{me[i]=o.detail,me.change(i,o.detail)}]}class Al extends N{constructor(e){super(),V(this,e,Cl,Ml,B,{})}}function Pl(t){let e,n,l;const s=t[2].default,a=Qe(s,t,t[1],null);return{c(){e=v("section"),a&&a.c(),m(e,"class",n=re(`section ${t[0]}`)+" svelte-1wj47wp")},m(i,o){H(i,e,o),a&&a.m(e,null),l=!0},p(i,[o]){a&&a.p&&(!l||o&2)&&xe(a,s,i,i[1],l?Ze(s,i[1],o,null):et(i[1]),null),(!l||o&1&&n!==(n=re(`section ${i[0]}`)+" svelte-1wj47wp"))&&m(e,"class",n)},i(i){l||(b(a,i),l=!0)},o(i){k(a,i),l=!1},d(i){i&&w(e),a&&a.d(i)}}}function Tl(t,e,n){let{$$slots:l={},$$scope:s}=e,{position:a=""}=e;return t.$$set=i=>{"position"in i&&n(0,a=i.position),"$$scope"in i&&n(1,s=i.$$scope)},[a,s,l]}class Te extends N{constructor(e){super(),V(this,e,Tl,Pl,B,{position:0})}}function Ol(t){let e,n;return e=new _l({}),{c(){P(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function Rl(t){let e,n;return e=new Sl({}),{c(){P(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function Dl(t){let e,n;return e=new Al({}),{c(){P(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function Fl(t){let e,n;return e=new yl({}),{c(){P(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function Ll(t){let e,n,l,s,a,i,o,r,c;return n=new Te({props:{position:"first",$$slots:{default:[Ol]},$$scope:{ctx:t}}}),s=new Te({props:{$$slots:{default:[Rl]},$$scope:{ctx:t}}}),i=new Te({props:{$$slots:{default:[Dl]},$$scope:{ctx:t}}}),r=new Te({props:{position:"last",$$slots:{default:[Fl]},$$scope:{ctx:t}}}),{c(){e=v("div"),P(n.$$.fragment),l=M(),P(s.$$.fragment),a=M(),P(i.$$.fragment),o=M(),P(r.$$.fragment),m(e,"class","sheet svelte-h34ol9")},m(f,u){H(f,e,u),C(n,e,null),_(e,l),C(s,e,null),_(e,a),C(i,e,null),_(e,o),C(r,e,null),c=!0},p(f,[u]){const d={};u&1&&(d.$$scope={dirty:u,ctx:f}),n.$set(d);const g={};u&1&&(g.$$scope={dirty:u,ctx:f}),s.$set(g);const h={};u&1&&(h.$$scope={dirty:u,ctx:f}),i.$set(h);const y={};u&1&&(y.$$scope={dirty:u,ctx:f}),r.$set(y)},i(f){c||(b(n.$$.fragment,f),b(s.$$.fragment,f),b(i.$$.fragment,f),b(r.$$.fragment,f),c=!0)},o(f){k(n.$$.fragment,f),k(s.$$.fragment,f),k(i.$$.fragment,f),k(r.$$.fragment,f),c=!1},d(f){f&&w(e),A(n),A(s),A(i),A(r)}}}class El extends N{constructor(e){super(),V(this,e,null,Ll,B,{})}}const Pt="/mobile-cairn/assets/settings-8bd1b2da.svg",Tt="/mobile-cairn/assets/cross-5d728ea7.svg";function jl(t){let e,n,l,s,a,i,o,r,c,f,u,d,g,h,y,p,$,T;return r=new Z({props:{borderless:!0,image:t[0]?Tt:Pt,alt:"settings"}}),r.$on("click",t[2]),u=new dl({}),g=new El({}),$=new Fn({}),{c(){e=v("div"),n=v("div"),l=v("div"),s=v("div"),a=v("h2"),i=L(t[1]),o=M(),P(r.$$.fragment),c=M(),f=v("div"),P(u.$$.fragment),d=M(),P(g.$$.fragment),y=M(),p=v("footer"),P($.$$.fragment),m(a,"class","text svelte-15kixfd"),m(s,"class","wrap svelte-15kixfd"),m(l,"class","name svelte-15kixfd"),m(n,"class","header svelte-15kixfd"),m(f,"class","main svelte-15kixfd"),m(f,"style",h=`left: ${t[0]?"0":"-100%"}`),m(p,"class","footer svelte-15kixfd"),m(e,"class","character svelte-15kixfd")},m(O,D){H(O,e,D),_(e,n),_(n,l),_(l,s),_(s,a),_(a,i),_(n,o),C(r,n,null),_(e,c),_(e,f),C(u,f,null),_(f,d),C(g,f,null),_(e,y),_(e,p),C($,p,null),T=!0},p(O,[D]){(!T||D&2)&&le(i,O[1]);const W={};D&1&&(W.image=O[0]?Tt:Pt),r.$set(W),(!T||D&1&&h!==(h=`left: ${O[0]?"0":"-100%"}`))&&m(f,"style",h)},i(O){T||(b(r.$$.fragment,O),b(u.$$.fragment,O),b(g.$$.fragment,O),b($.$$.fragment,O),T=!0)},o(O){k(r.$$.fragment,O),k(u.$$.fragment,O),k(g.$$.fragment,O),k($.$$.fragment,O),T=!1},d(O){O&&w(e),A(r),A(u),A(g),A($)}}}function Il(t,e,n){let l;ie(t,ce,i=>n(1,l=i));let s=!1;return[s,l,()=>n(0,s=!s)]}class zl extends N{constructor(e){super(),V(this,e,Il,jl,B,{})}}const Xe=["","Adhere","Earthquake","Masquerade","Smoke Form","Anchor","Elasticity","Miniaturize","Sniff","Animate Object","Elemental Wall","Mirror Image","Snuff","Anthropomorphize","Filch","Mirrorwalk","Sort","Arcane Eye","Flare","Multiarm","Spectacle","Astral Prison","Fog Cloud","Night Sphere","Spellsaw","Attract","Frenzy","Objectify","Spider Climb","Auditory Illusion","Gate","Ooze Form","Summon Cube","Babble","Gravity Shift","Pacify","Swarm","Bait Flower","Greed","Phobia","Telekinesis","Beast Form","Haste","Pit","Telepathy","Befuddle","Hatred","Primal Surge","Teleport","Body Swap","Hear Whispers","Push/Pull","Target Lure","Charm","Hover","Raise Dead","Thicket","Command","Hypnotize","Raise Spirit","Summon Idol","Comprehend","Icy Touch","Read Mind","Time Control","Cone of Foam","Identify Owner","Repel","True Sight","Control Plants","Illuminate","Scry","Upwell","Control Weather","Invisible Tether","Sculpt Elements","Vision","Cure Wounds","Knock","Sense","Visual Illusion","Deafen","Leap","Shield","Ward","Detect Magic","Liquid Air","Shroud","Web","Disassemble","Magic Dampener","Shuffle","Widget","Disguise","Manse","Sleep","Wizard Mark","Displace","Marble Craze","Slick	100	X-Ray Vision"],Ot=()=>{const t=[""];for(let e=1;e<=20;e++)e<=3?t.push(""):e<=14?t.push("Brigandine (1 Armor, bulky)"):e<=19?t.push("Chainmail (2 Armor, bulky)"):t.push("Plate (3 Armor, bulky)");return t},Bl=()=>{const t=[""];for(let e=1;e<=20;e++)e<=13?t.push(""):e<=16?t.push("Helmet (+1 Armor)"):e<=19?t.push("Shield (+1 Armor)"):t.push("both");return t},Rt=()=>{const t=[""];for(let e=1;e<=20;e++)e<=5?t.push("Dagger/Cudgel/Staff  (d6 damage)"):e<=14?t.push("Sword/Mace/Axe (d8 damage)"):e<=16?t.push("Sling (d4 damage)"):e<=18?t.push("Bow (d6 damage, bulky)"):e<=19?t.push("Crossbow (d8 damage, bulky)"):t.push("Halberd/War Hammer/Battleaxe  (d10 damage, bulky)");return t},Dt=["","Air Bladder","Fire Oil","Manacles","Rope (25ft)","Antitoxin","Grappling Hook","Pick","Spirit Ward","Cart (+4 slots, bulky)","Large Sack","Pole (10ft)","Spyglass","Chain (10ft)","Large Trap","Pulley","Tinderbox","Dowsing Rod","Lockpicks","Repellent","Wolfsbane"],Ft=["","Bellows","Cook Pots","Grease","Net","Bucket","Crowbar","Hammer","Saw","Caltrops","Drill (Manual)","Hour Glass","Sealant","Chalk","Fishing Rod","Metal File","Shovel","Chisel","Glue","Nails","Tongs"],Lt=["","Bottle","Horn","Mirror","Soap","Card Deck","Incense","Perfume","Sponge","Dice Set","Instrument","Quill & Ink","Tar Pot","Face Paint","Lens","Salt Pack","Twine","Fake Jewels","Marbles","Small Bell","Whistle"],Vl=()=>{const t=Bl()[I(1,20)],e=l=>l<=3?Ft[I(1,20)]:l<=5?Lt[I(1,20)]:l<=13?Dt[I(1,20)]:l<=15?Ot()[I(1,20)]:l<=17?Rt()[I(1,20)]:`Spellbook (${Xe[I(1,100)]})`;return[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:Ot()[I(1,20)],inHand:!1,fatigue:!1},{title:Rt()[I(1,20)],inHand:!1,fatigue:!1},{title:t==="both"?"Helmet (+1 Armor)":t,inHand:!1,fatigue:!1},{title:t==="both"?"Shield (+1 Armor)":"",inHand:!1,fatigue:!1},{title:Dt[I(1,20)],inHand:!1,fatigue:!1},{title:Ft[I(1,20)],inHand:!1,fatigue:!1},{title:Lt[I(1,20)],inHand:!1,fatigue:!1},{title:e(I(1,20)),inHand:!1,fatigue:!1}].sort((l,s)=>l.title>s.title?-1:1)};function Et(t,e,n){const l=t.slice();return l[8]=e[n],l}function jt(t){let e,n,l,s,a,i,o=Y(t[0]),r=[];for(let c=0;c<o.length;c+=1)r[c]=It(Et(t,o,c));return{c(){e=v("div");for(let c=0;c<r.length;c+=1)r[c].c();m(e,"class","list svelte-6f0779"),m(e,"style",n=`top: -${t[0].length/2*25}%`)},m(c,f){H(c,e,f);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);s=!0,a||(i=[Ut(on.call(null,e)),ne(e,"click_outside",t[6])],a=!0)},p(c,f){if(f&9){o=Y(c[0]);let u;for(u=0;u<o.length;u+=1){const d=Et(c,o,u);r[u]?r[u].p(d,f):(r[u]=It(d),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=o.length}(!s||f&1&&n!==(n=`top: -${c[0].length/2*25}%`))&&m(e,"style",n)},i(c){s||(c&&he(()=>{s&&(l||(l=Le(e,je,{delay:100,duration:200,easing:Ee,axis:"y"},!0)),l.run(1))}),s=!0)},o(c){c&&(l||(l=Le(e,je,{delay:100,duration:200,easing:Ee,axis:"y"},!1)),l.run(0)),s=!1},d(c){c&&w(e),ge(r,c),c&&l&&l.end(),a=!1,fe(i)}}}function It(t){let e,n=t[8]+"",l,s,a,i;function o(){return t[5](t[8])}return{c(){e=v("button"),l=L(n),s=M(),m(e,"class","item svelte-6f0779")},m(r,c){H(r,e,c),_(e,l),_(e,s),a||(i=ne(e,"click",o),a=!0)},p(r,c){t=r,c&1&&n!==(n=t[8]+"")&&le(l,n)},d(r){r&&w(e),a=!1,i()}}}function Nl(t){let e,n,l,s,a,i,o=t[2]&&jt(t);return{c(){e=v("div"),n=v("button"),l=L(t[1]),s=M(),o&&o.c(),m(n,"class","select svelte-6f0779"),m(e,"class","input svelte-6f0779")},m(r,c){H(r,e,c),_(e,n),_(n,l),_(e,s),o&&o.m(e,null),a||(i=ne(n,"click",t[4]),a=!0)},p(r,[c]){c&2&&le(l,r[1]),r[2]?o?(o.p(r,c),c&4&&b(o,1)):(o=jt(r),o.c(),b(o,1),o.m(e,null)):o&&(ee(),k(o,1,1,()=>{o=null}),te())},i(r){b(o)},o(r){k(o)},d(r){r&&w(e),o&&o.d(),a=!1,i()}}}function Wl(t,e,n){let{options:l=[""]}=e,{value:s}=e;const a=ue();let i=!1;const o=u=>{n(2,i=!1),a("select",u)},r=()=>n(2,i=!0),c=u=>o(u),f=()=>n(2,i=!1);return t.$$set=u=>{"options"in u&&n(0,l=u.options),"value"in u&&n(1,s=u.value)},[l,s,i,o,r,c,f]}class ql extends N{constructor(e){super(),V(this,e,Wl,Nl,B,{options:0,value:1})}}const ze=()=>[{title:"Cleric",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"War Hammer (d10, bulky)",inHand:!1,fatigue:!1},{title:"Chainmail (2 Armor, bulky)",inHand:!1,fatigue:!1},{title:"Gauntlets (+1 Armor)",inHand:!1,fatigue:!1},{title:"Cleansing Blade (d6)",inHand:!1,fatigue:!1},{title:"Holy Symbol (Ward once per day)",inHand:!1,fatigue:!1},{title:"Cloak of the Order",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Dowser",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Sickle (d6)",inHand:!1,fatigue:!1},{title:"Patchwork Doublet (+1 Armor)",inHand:!1,fatigue:!1},{title:"Dowsing Rod",inHand:!1,fatigue:!1},{title:"Eyestone (Sense if placed in fresh water)",inHand:!1,fatigue:!1},{title:"Worn Map",inHand:!1,fatigue:!1},{title:"Spyglass",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Dwarf",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Prickly Root (d6)",inHand:!1,fatigue:!1},{title:"Pinecone Lattice (1 Armor)",inHand:!1,fatigue:!1},{title:"Trowel",inHand:!1,fatigue:!1},{title:"Jar of Forest Ants",inHand:!1,fatigue:!1},{title:"Poisonous mushroom",inHand:!1,fatigue:!1},{title:"Hand Drill",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Elf",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Elegant Sword (d8)",inHand:!1,fatigue:!1},{title:"Recurve Bow (d8)",inHand:!1,fatigue:!1},{title:"Gilt Clothing (1 Armor)",inHand:!1,fatigue:!1},{title:"Spellbook (Detect Magic)",inHand:!1,fatigue:!1},{title:"Golden Flute",inHand:!1,fatigue:!1},{title:"Air Bladder",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Fighter",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Glaive (d10, bulky)",inHand:!1,fatigue:!1},{title:"Scimitar (d8)",inHand:!1,fatigue:!1},{title:"Shortsword (d6)",inHand:!1,fatigue:!1},{title:"Shortsword (d6)",inHand:!1,fatigue:!1},{title:"Tobacco Pouch & Pipe",inHand:!1,fatigue:!1},{title:"Dice Set",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Friar",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Scepter (d6)",inHand:!1,fatigue:!1},{title:"Deceptive Robes (+1 Armor)",inHand:!1,fatigue:!1},{title:"Censer & Holy Water",inHand:!1,fatigue:!1},{title:"Jug of Honey Wine",inHand:!1,fatigue:!1},{title:"Folk Songbook",inHand:!1,fatigue:!1},{title:"Cart (+4 slots, bulky)",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Knight",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Longsword (d10, bulky)",inHand:!1,fatigue:!1},{title:"Chainmail (2 Armor, bulky)",inHand:!1,fatigue:!1},{title:"Helmet (+1 Armor)",inHand:!1,fatigue:!1},{title:"Heraldic Cape",inHand:!1,fatigue:!1},{title:"Manacles",inHand:!1,fatigue:!1},{title:"Fine Rope",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Magic User",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Fizzled Staff (d8, bulky)",inHand:!1,fatigue:!1},{title:"Dagger (d6)",inHand:!1,fatigue:!1},{title:`Spellbook (${Xe[I(1,100)]})`,inHand:!1,fatigue:!1},{title:`Spellbook (${Xe[I(1,100)]})`,inHand:!1,fatigue:!1},{title:"Ragged Clothing (hidden pockets)",inHand:!1,fatigue:!1},{title:"Leycap (x2, see Relics)",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Thief",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Two daggers (d6+d6)",inHand:!1,fatigue:!1},{title:"Hooded Jerkin (1 Armor)",inHand:!1,fatigue:!1},{title:"Lockpicks",inHand:!1,fatigue:!1},{title:"Caltrops",inHand:!1,fatigue:!1},{title:"Grappling Hook",inHand:!1,fatigue:!1},{title:"Metal File",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Ranger",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Longbow (d8, bulky)",inHand:!1,fatigue:!1},{title:"Hatchet (d6)",inHand:!1,fatigue:!1},{title:"Padded Leathers (1 Armor)",inHand:!1,fatigue:!1},{title:"Large Trap",inHand:!1,fatigue:!1},{title:"Bloodhound | 2 HP, 12 DEX, bite (d6)",inHand:!1,fatigue:!1},{title:"Thundering Horn",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]}];function zt(t,e,n){const l=t.slice();return l[13]=e[n],l}function Bt(t,e,n){const l=t.slice();return l[16]=e[n],l}function Vt(t){let e,n,l,s=t[0][t[16]]+"",a,i,o,r;function c(){return t[8](t[16])}return{c(){e=v("button"),n=L(t[16]),l=L(": "),a=L(s),m(e,"class",i=re(`item${t[2].includes(t[16])?" selected":""}`)+" svelte-xc8197")},m(f,u){H(f,e,u),_(e,n),_(e,l),_(e,a),o||(r=ne(e,"click",c),o=!0)},p(f,u){t=f,u&1&&s!==(s=t[0][t[16]]+"")&&le(a,s),u&4&&i!==(i=re(`item${t[2].includes(t[16])?" selected":""}`)+" svelte-xc8197")&&m(e,"class",i)},d(f){f&&w(e),o=!1,r()}}}function Nt(t){let e,n=Y(ze().find(t[10]).inventory),l=[];for(let s=0;s<n.length;s+=1)l[s]=qt(zt(t,n,s));return{c(){e=v("div");for(let s=0;s<l.length;s+=1)l[s].c();m(e,"class","items-list")},m(s,a){H(s,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(s,a){if(a&2){n=Y(ze().find(s[10]).inventory);let i;for(i=0;i<n.length;i+=1){const o=zt(s,n,i);l[i]?l[i].p(o,a):(l[i]=qt(o),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(s){s&&w(e),ge(l,s)}}}function Wt(t){let e,n=t[13].title+"",l;return{c(){e=v("span"),l=L(n),m(e,"class","item svelte-xc8197")},m(s,a){H(s,e,a),_(e,l)},p(s,a){a&2&&n!==(n=s[13].title+"")&&le(l,n)},d(s){s&&w(e)}}}function qt(t){let e,n=t[13].title&&Wt(t);return{c(){n&&n.c(),e=en()},m(l,s){n&&n.m(l,s),H(l,e,s)},p(l,s){l[13].title?n?n.p(l,s):(n=Wt(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(l){l&&w(e),n&&n.d(l)}}}function Gl(t){let e;return{c(){e=L("Back")},m(n,l){H(n,e,l)},d(n){n&&w(e)}}}function Jl(t){let e;return{c(){e=L("Save")},m(n,l){H(n,e,l)},d(n){n&&w(e)}}}function Yl(t){let e,n,l,s,a,i,o,r,c,f,u,d,g,h,y,p,$,T,O,D,W,E,X,S,F,G,_e;a=new lt({props:{value:t[0].name,placeholder:"Name"}}),a.$on("input",t[7]);let $e=Y(["str","dex","wil"]),U=[];for(let R=0;R<3;R+=1)U[R]=Vt(Bt(t,$e,R));T=new ql({props:{options:t[4],value:t[1]}}),T.$on("select",t[9]);let q=t[1]!=="random"&&Nt(t);return S=new Z({props:{$$slots:{default:[Gl]},$$scope:{ctx:t}}}),S.$on("click",t[11]),G=new Z({props:{disabled:!t[0].name,$$slots:{default:[Jl]},$$scope:{ctx:t}}}),G.$on("click",t[12]),{c(){e=v("div"),n=v("h2"),n.textContent="Create a character",l=M(),s=v("div"),P(a.$$.fragment),i=M(),o=v("section"),r=v("div"),r.innerHTML='<span class="text svelte-xc8197">Stats</span>',c=M(),f=v("div");for(let R=0;R<3;R+=1)U[R].c();u=M(),d=v("span"),d.textContent=`You can swap two of your stats by selecting or deselecting them with a
        click, and the change will take effect after character creation.`,g=M(),h=v("section"),y=v("div"),y.innerHTML='<span class="text svelte-xc8197">Starting gear</span>',p=M(),$=v("div"),P(T.$$.fragment),O=M(),D=v("span"),D.textContent=`You can use randomly generated starting gear or choose one of the
        starting packages.`,W=M(),q&&q.c(),E=M(),X=v("div"),P(S.$$.fragment),F=M(),P(G.$$.fragment),m(n,"class","title svelte-xc8197"),m(s,"class","name svelte-xc8197"),m(r,"class","heading svelte-xc8197"),m(d,"class","info svelte-xc8197"),m(f,"class","stats svelte-xc8197"),m(o,"class","wrap svelte-xc8197"),m(y,"class","heading svelte-xc8197"),m(D,"class","info svelte-xc8197"),m($,"class","inventory svelte-xc8197"),m(h,"class","wrap svelte-xc8197"),m(X,"class","controls svelte-xc8197"),m(e,"class","form svelte-xc8197")},m(R,j){H(R,e,j),_(e,n),_(e,l),_(e,s),C(a,s,null),_(e,i),_(e,o),_(o,r),_(o,c),_(o,f);for(let se=0;se<3;se+=1)U[se]&&U[se].m(f,null);_(f,u),_(f,d),_(e,g),_(e,h),_(h,y),_(h,p),_(h,$),C(T,$,null),_($,O),_($,D),_($,W),q&&q.m($,null),_(e,E),_(e,X),C(S,X,null),_(X,F),C(G,X,null),_e=!0},p(R,[j]){const se={};if(j&1&&(se.value=R[0].name),a.$set(se),j&37){$e=Y(["str","dex","wil"]);let x;for(x=0;x<3;x+=1){const it=Bt(R,$e,x);U[x]?U[x].p(it,j):(U[x]=Vt(it),U[x].c(),U[x].m(f,u))}for(;x<3;x+=1)U[x].d(1)}const st={};j&2&&(st.value=R[1]),T.$set(st),R[1]!=="random"?q?q.p(R,j):(q=Nt(R),q.c(),q.m($,null)):q&&(q.d(1),q=null);const at={};j&524288&&(at.$$scope={dirty:j,ctx:R}),S.$set(at);const Be={};j&1&&(Be.disabled=!R[0].name),j&524288&&(Be.$$scope={dirty:j,ctx:R}),G.$set(Be)},i(R){_e||(b(a.$$.fragment,R),b(T.$$.fragment,R),b(S.$$.fragment,R),b(G.$$.fragment,R),_e=!0)},o(R){k(a.$$.fragment,R),k(T.$$.fragment,R),k(S.$$.fragment,R),k(G.$$.fragment,R),_e=!1},d(R){R&&w(e),A(a),ge(U,R),A(T),q&&q.d(),A(S),A(G)}}}function Ul(t,e,n){const l=ue();let s={name:"",str:I(3,6),dex:I(3,6),wil:I(3,6),hp:I(1,6),gp:I(3,6)},a=["random",...ze().map(p=>p.title)],i=a[0],o=[];const r=p=>{if(o.includes(p)){const $=o.indexOf(p,0);$!==-1&&(o.splice($,1),n(2,o=[...o]))}else{if(o.length>=2)return;n(2,o=[...o,p])}},c=()=>{if(o.length===2){const p=s[o[0]],$=s[o[1]];n(0,s[o[0]]=$,s),n(0,s[o[1]]=p,s)}ce.set(s.name),ae.set({str:s.str,dex:s.dex,wil:s.wil,strMax:s.str,dexMax:s.dex,wilMax:s.wil}),K.set({hp:s.hp,hpMax:s.hp,armor:0,deprived:!1}),me.set({gp:s.gp.toString(),sp:"0",cp:"0"}),de.set(i==="random"?Vl():ze().find(p=>p.title===i).inventory),J()};return[s,i,o,l,a,r,c,p=>n(0,s.name=p.detail,s),p=>r(p),p=>n(1,i=p.detail),p=>p.title===i,()=>l("hide-form"),()=>c()]}class Kl extends N{constructor(e){super(),V(this,e,Ul,Yl,B,{})}}const cn=t=>{const e=nt();let n=!0;return Object.keys(e).forEach(l=>{Object.keys(t).includes(l)||(console.log(e,t),n=!1)}),n},Xl=t=>{if(t.target){const e=new FileReader;e.onload=()=>{if(e.result){const l=JSON.parse(e.result);cn(l)&&(ce.set(l.name),ae.set(l.abilities),K.set(l.stats),me.set(l.coins),de.set(l.inventory),Q.set(l.scars))}};const n=t.target.files;n&&e.readAsText(n[0])}};function Ql(t){let e,n,l,s,a,i;return{c(){e=v("div"),n=v("input"),l=M(),s=v("label"),s.textContent="Upload the character (json)",m(n,"id","upload"),m(n,"type","file"),m(s,"for","upload"),m(s,"class","label svelte-gdmlp7"),m(e,"class","file svelte-gdmlp7")},m(o,r){H(o,e,r),_(e,n),_(e,l),_(e,s),a||(i=ne(n,"change",t[1]),a=!0)},p:z,i:z,o:z,d(o){o&&w(e),a=!1,i()}}}function Zl(t){const e=ue();return[e,l=>e("change",l)]}class xl extends N{constructor(e){super(),V(this,e,Zl,Ql,B,{})}}function es(t){let e;return{c(){e=L("Roll a character")},m(n,l){H(n,e,l)},d(n){n&&w(e)}}}function ts(t){let e;return{c(){e=L("Wrong file type or json structure")},m(n,l){H(n,e,l)},d(n){n&&w(e)}}}function ns(t){let e,n,l,s,a,i,o;return n=new Z({props:{$$slots:{default:[es]},$$scope:{ctx:t}}}),n.$on("click",t[3]),s=new xl({}),s.$on("change",t[4]),i=new Re({props:{submission:!0,isShown:t[0],$$slots:{default:[ts]},$$scope:{ctx:t}}}),i.$on("cancel",t[5]),{c(){e=v("div"),P(n.$$.fragment),l=M(),P(s.$$.fragment),a=M(),P(i.$$.fragment),m(e,"class","menu svelte-1ugech7")},m(r,c){H(r,e,c),C(n,e,null),_(e,l),C(s,e,null),H(r,a,c),C(i,r,c),o=!0},p(r,[c]){const f={};c&128&&(f.$$scope={dirty:c,ctx:r}),n.$set(f);const u={};c&1&&(u.isShown=r[0]),c&128&&(u.$$scope={dirty:c,ctx:r}),i.$set(u)},i(r){o||(b(n.$$.fragment,r),b(s.$$.fragment,r),b(i.$$.fragment,r),o=!0)},o(r){k(n.$$.fragment,r),k(s.$$.fragment,r),k(i.$$.fragment,r),o=!1},d(r){r&&(w(e),w(a)),A(n),A(s),A(i,r)}}}function ls(t,e,n){let l;ie(t,ce,f=>n(6,l=f));const s=ue();let a=!1;const i=f=>{Xl(f.detail),l.length||n(0,a=!0)};return[a,s,i,()=>s("show-form"),f=>i(f),()=>n(0,a=!1)]}class ss extends N{constructor(e){super(),V(this,e,ls,ns,B,{})}}function as(t){let e,n;return e=new Kl({}),e.$on("hide-form",t[2]),{c(){P(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},p:z,i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function is(t){let e,n,l,s;return l=new ss({}),l.$on("show-form",t[1]),{c(){e=v("div"),e.innerHTML=`<h1 class="title svelte-cxqggy">Pocket Cairn
        <span class="version svelte-cxqggy">v.0.1</span></h1> <span class="info svelte-cxqggy">Cairn is a game created by
        <a href="https://newschoolrevolution.com" class="svelte-cxqggy">Yochai Gal</a><br/>
        Official game page -
        <a href="cairnrpg.com" class="svelte-cxqggy">cairnrpg.com</a><br/>
        Rate or comment this application on
        <a href="https://github.com/BrightsDays/mobile-cairn" class="svelte-cxqggy">GitHub</a> :)</span>`,n=M(),P(l.$$.fragment),m(e,"class","header svelte-cxqggy")},m(a,i){H(a,e,i),H(a,n,i),C(l,a,i),s=!0},p:z,i(a){s||(b(l.$$.fragment,a),s=!0)},o(a){k(l.$$.fragment,a),s=!1},d(a){a&&(w(e),w(n)),A(l,a)}}}function rs(t){let e,n,l,s;const a=[is,as],i=[];function o(r,c){return r[0]?1:0}return n=o(t),l=i[n]=a[n](t),{c(){e=v("div"),l.c(),m(e,"class","creation svelte-cxqggy")},m(r,c){H(r,e,c),i[n].m(e,null),s=!0},p(r,[c]){let f=n;n=o(r),n===f?i[n].p(r,c):(ee(),k(i[f],1,1,()=>{i[f]=null}),te(),l=i[n],l?l.p(r,c):(l=i[n]=a[n](r),l.c()),b(l,1),l.m(e,null))},i(r){s||(b(l),s=!0)},o(r){k(l),s=!1},d(r){r&&w(e),i[n].d()}}}function os(t,e,n){let l=!1;return[l,()=>n(0,l=!0),()=>n(0,l=!1)]}class cs extends N{constructor(e){super(),V(this,e,os,rs,B,{})}}function fs(t){let e,n;return e=new cs({}),{c(){P(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function us(t){let e,n;return e=new zl({}),{c(){P(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function ds(t){let e,n,l,s;const a=[us,fs],i=[];function o(r,c){return r[0]?0:1}return n=o(t),l=i[n]=a[n](t),{c(){e=v("main"),l.c(),m(e,"class","svelte-ncbruq")},m(r,c){H(r,e,c),i[n].m(e,null),s=!0},p(r,[c]){let f=n;n=o(r),n!==f&&(ee(),k(i[f],1,1,()=>{i[f]=null}),te(),l=i[n],l||(l=i[n]=a[n](r),l.c()),b(l,1),l.m(e,null))},i(r){s||(b(l),s=!0)},o(r){k(l),s=!1},d(r){r&&w(e),i[n].d()}}}function hs(t,e,n){let l;ie(t,ce,a=>n(1,l=a));let s=l;return ce.subscribe(a=>n(0,s=a)),kn(()=>{const a=localStorage.getItem("pc__character");a&&cn(JSON.parse(a))&&(ce.set(JSON.parse(a).name),ae.set(JSON.parse(a).abilities),K.set(JSON.parse(a).stats),me.set(JSON.parse(a).coins),de.set(JSON.parse(a).inventory),Q.set(JSON.parse(a).scars))}),[s]}class gs extends N{constructor(e){super(),V(this,e,hs,ds,B,{})}}new gs({target:document.getElementById("app")});
