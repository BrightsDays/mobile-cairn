var fn=Object.defineProperty;var un=(t,e,n)=>e in t?fn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Be=(t,e,n)=>(un(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function E(){}const Gt=t=>t;function dn(t,e){for(const n in e)t[n]=e[n];return t}function Jt(t){return t()}function rt(){return Object.create(null)}function fe(t){t.forEach(Jt)}function Ae(t){return typeof t=="function"}function I(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let je;function ot(t,e){return t===e?!0:(je||(je=document.createElement("a")),je.href=e,t===je.href)}function hn(t){return Object.keys(t).length===0}function gn(t,...e){if(t==null){for(const l of e)l(void 0);return E}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ie(t,e,n){t.$$.on_destroy.push(gn(e,n))}function Qe(t,e,n,l){if(t){const s=Yt(t,e,n,l);return t[0](s)}}function Yt(t,e,n,l){return t[1]&&l?dn(n.ctx.slice(),t[1](l(e))):n.ctx}function Ze(t,e,n,l){if(t[2]&&l){const s=t[2](l(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const a=[],i=Math.max(e.dirty.length,s.length);for(let o=0;o<i;o+=1)a[o]=e.dirty[o]|s[o];return a}return e.dirty|s}return e.dirty}function xe(t,e,n,l,s,a){if(s){const i=Yt(e,n,l,a);t.p(i,s)}}function et(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function re(t){return t??""}function Ut(t){return t&&Ae(t.destroy)?t.destroy:E}const Kt=typeof window<"u";let Xt=Kt?()=>window.performance.now():()=>Date.now(),tt=Kt?t=>requestAnimationFrame(t):E;const ye=new Set;function Qt(t){ye.forEach(e=>{e.c(t)||(ye.delete(e),e.f())}),ye.size!==0&&tt(Qt)}function Zt(t){let e;return ye.size===0&&tt(Qt),{promise:new Promise(n=>{ye.add(e={c:t,f:n})}),abort(){ye.delete(e)}}}function m(t,e){t.appendChild(e)}function xt(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function mn(t){const e=v("style");return e.textContent="/* empty */",_n(xt(t),e),e.sheet}function _n(t,e){return m(t.head||t,e),e.sheet}function w(t,e,n){t.insertBefore(e,n||null)}function H(t){t.parentNode&&t.parentNode.removeChild(t)}function ge(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function D(t){return document.createTextNode(t)}function M(){return D(" ")}function en(){return D("")}function ne(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function _(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function pn(t){return Array.from(t.childNodes)}function le(t,e){e=""+e,t.data!==e&&(t.data=e)}function ct(t,e){t.value=e??""}function tn(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}const Re=new Map;let qe=0;function $n(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function bn(t,e){const n={stylesheet:mn(e),rules:{}};return Re.set(t,n),n}function Je(t,e,n,l,s,a,i,o=0){const r=16.666/l;let c=`{
`;for(let p=0;p<=1;p+=r){const $=e+(n-e)*a(p);c+=p*100+`%{${i($,1-$)}}
`}const f=c+`100% {${i(n,1-n)}}
}`,u=`__svelte_${$n(f)}_${o}`,d=xt(t),{stylesheet:g,rules:h}=Re.get(d)||bn(d,t);h[u]||(h[u]=!0,g.insertRule(`@keyframes ${u} ${f}`,g.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${u} ${l}ms linear ${s}ms 1 both`,qe+=1,u}function Ye(t,e){const n=(t.style.animation||"").split(", "),l=n.filter(e?a=>a.indexOf(e)<0:a=>a.indexOf("__svelte")===-1),s=n.length-l.length;s&&(t.style.animation=l.join(", "),qe-=s,qe||vn())}function vn(){tt(()=>{qe||(Re.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&H(e)}),Re.clear())})}let Ce;function Se(t){Ce=t}function nn(){if(!Ce)throw new Error("Function called outside component initialization");return Ce}function kn(t){nn().$$.on_mount.push(t)}function ue(){const t=nn();return(e,n,{cancelable:l=!1}={})=>{const s=t.$$.callbacks[e];if(s){const a=tn(e,n,{cancelable:l});return s.slice().forEach(i=>{i.call(t,a)}),!a.defaultPrevented}return!0}}const ke=[],ft=[];let He=[];const ut=[],yn=Promise.resolve();let Ue=!1;function Hn(){Ue||(Ue=!0,yn.then(ln))}function he(t){He.push(t)}const Ve=new Set;let be=0;function ln(){if(be!==0)return;const t=Ce;do{try{for(;be<ke.length;){const e=ke[be];be++,Se(e),wn(e.$$)}}catch(e){throw ke.length=0,be=0,e}for(Se(null),ke.length=0,be=0;ft.length;)ft.pop()();for(let e=0;e<He.length;e+=1){const n=He[e];Ve.has(n)||(Ve.add(n),n())}He.length=0}while(ke.length);for(;ut.length;)ut.pop()();Ue=!1,Ve.clear(),Se(t)}function wn(t){if(t.fragment!==null){t.update(),fe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(he)}}function Sn(t){const e=[],n=[];He.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),He=e}let we;function sn(){return we||(we=Promise.resolve(),we.then(()=>{we=null})),we}function Me(t,e,n){t.dispatchEvent(tn(`${e?"intro":"outro"}${n}`))}const Te=new Set;let oe;function ee(){oe={r:0,c:[],p:oe}}function te(){oe.r||fe(oe.c),oe=oe.p}function b(t,e){t&&t.i&&(Te.delete(t),t.i(e))}function k(t,e,n,l){if(t&&t.o){if(Te.has(t))return;Te.add(t),oe.c.push(()=>{Te.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}const an={duration:0};function Mn(t,e,n){const l={direction:"in"};let s=e(t,n,l),a=!1,i,o,r=0;function c(){i&&Ye(t,i)}function f(){const{delay:d=0,duration:g=300,easing:h=Gt,tick:y=E,css:p}=s||an;p&&(i=Je(t,0,1,g,d,h,p,r++)),y(0,1);const $=Xt()+d,P=$+g;o&&o.abort(),a=!0,he(()=>Me(t,!0,"start")),o=Zt(T=>{if(a){if(T>=P)return y(1,0),Me(t,!0,"end"),c(),a=!1;if(T>=$){const R=h((T-$)/g);y(R,1-R)}}return a})}let u=!1;return{start(){u||(u=!0,Ye(t),Ae(s)?(s=s(l),sn().then(f)):f())},invalidate(){u=!1},end(){a&&(c(),a=!1)}}}function De(t,e,n,l){let a=e(t,n,{direction:"both"}),i=l?0:1,o=null,r=null,c=null,f;function u(){c&&Ye(t,c)}function d(h,y){const p=h.b-i;return y*=Math.abs(p),{a:i,b:h.b,d:p,duration:y,start:h.start,end:h.start+y,group:h.group}}function g(h){const{delay:y=0,duration:p=300,easing:$=Gt,tick:P=E,css:T}=a||an,R={start:Xt()+y,b:h};h||(R.group=oe,oe.r+=1),"inert"in t&&(h?f!==void 0&&(t.inert=f):(f=t.inert,t.inert=!0)),o||r?r=R:(T&&(u(),c=Je(t,i,h,p,y,$,T)),h&&P(0,1),o=d(R,p),he(()=>Me(t,h,"start")),Zt(N=>{if(r&&N>r.start&&(o=d(r,p),r=null,Me(t,o.b,"start"),T&&(u(),c=Je(t,i,o.b,o.duration,0,$,a.css))),o){if(N>=o.end)P(i=o.b,1-i),Me(t,o.b,"end"),r||(o.b?u():--o.group.r||fe(o.group.c)),o=null;else if(N>=o.start){const F=N-o.start;i=o.a+o.d*$(F/o.duration),P(i,1-i)}}return!!(o||r)}))}return{run(h){Ae(a)?sn().then(()=>{a=a({direction:h?"in":"out"}),g(h)}):g(h)},end(){u(),o=r=null}}}function Y(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function j(t){t&&t.c()}function C(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),he(()=>{const a=t.$$.on_mount.map(Jt).filter(Ae);t.$$.on_destroy?t.$$.on_destroy.push(...a):fe(a),t.$$.on_mount=[]}),s.forEach(he)}function A(t,e){const n=t.$$;n.fragment!==null&&(Sn(n.after_update),fe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Cn(t,e){t.$$.dirty[0]===-1&&(ke.push(t),Hn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(t,e,n,l,s,a,i,o=[-1]){const r=Ce;Se(t);const c=t.$$={fragment:null,ctx:[],props:a,update:E,not_equal:s,bound:rt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:rt(),dirty:o,skip_bound:!1,root:e.target||r.$$.root};i&&i(c.root);let f=!1;if(c.ctx=n?n(t,e.props||{},(u,d,...g)=>{const h=g.length?g[0]:d;return c.ctx&&s(c.ctx[u],c.ctx[u]=h)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](h),f&&Cn(t,u)),d}):[],c.update(),f=!0,fe(c.before_update),c.fragment=l?l(c.ctx):!1,e.target){if(e.hydrate){const u=pn(e.target);c.fragment&&c.fragment.l(u),u.forEach(H)}else c.fragment&&c.fragment.c();e.intro&&b(t.$$.fragment),C(t,e.target,e.anchor),ln()}Se(r)}class V{constructor(){Be(this,"$$");Be(this,"$$set")}$destroy(){A(this,1),this.$destroy=E}$on(e,n){if(!Ae(n))return E;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!hn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const An="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(An);const ve=[];function pe(t,e=E){let n;const l=new Set;function s(o){if(I(t,o)&&(t=o,n)){const r=!ve.length;for(const c of l)c[1](),ve.push(c,t);if(r){for(let c=0;c<ve.length;c+=2)ve[c][0](ve[c+1]);ve.length=0}}}function a(o){s(o(t))}function i(o,r=E){const c=[o,r];return l.add(c),l.size===1&&(n=e(s,a)||E),o(t),()=>{l.delete(c),l.size===0&&n&&(n(),n=null)}}return{set:s,update:a,subscribe:i}}const z=(t=1,e=6)=>{const n=[];for(let l=0;l<t;l++){const s=Math.floor(Math.random()*e)+1;n.push(s)}return n.reduce((l,s)=>l+s,0)},jn=()=>{const{subscribe:t,set:e,update:n}=pe([{key:"4",value:4,count:0},{key:"6",value:6,count:0},{key:"8",value:8,count:0},{key:"10",value:10,count:0},{key:"12",value:12,count:0},{key:"20",value:20,count:0}]);return{subscribe:t,set:e,roll:l=>n(s=>(s.find(a=>a.key===l).count+=1,s.find(a=>a.key===l).value=z(1,+l),[...s]))}},Ne=jn();function rn(t){const e=t-1;return e*e*e+1}function Pn(t){return t*t*t*t*t}function Fe(t){return--t*t*t*t*t+1}function Le(t,{delay:e=0,duration:n=400,easing:l=rn,axis:s="y"}={}){const a=getComputedStyle(t),i=+a.opacity,o=s==="y"?"height":"width",r=parseFloat(a[o]),c=s==="y"?["top","bottom"]:["left","right"],f=c.map($=>`${$[0].toUpperCase()}${$.slice(1)}`),u=parseFloat(a[`padding${f[0]}`]),d=parseFloat(a[`padding${f[1]}`]),g=parseFloat(a[`margin${f[0]}`]),h=parseFloat(a[`margin${f[1]}`]),y=parseFloat(a[`border${f[0]}Width`]),p=parseFloat(a[`border${f[1]}Width`]);return{delay:e,duration:n,easing:l,css:$=>`overflow: hidden;opacity: ${Math.min($*20,1)*i};${o}: ${$*r}px;padding-${c[0]}: ${$*u}px;padding-${c[1]}: ${$*d}px;margin-${c[0]}: ${$*g}px;margin-${c[1]}: ${$*h}px;border-${c[0]}-width: ${$*y}px;border-${c[1]}-width: ${$*p}px;`}}function Tn(t,{delay:e=0,duration:n=400,easing:l=rn,start:s=0,opacity:a=0}={}){const i=getComputedStyle(t),o=+i.opacity,r=i.transform==="none"?"":i.transform,c=1-s,f=o*(1-a);return{delay:e,duration:n,easing:l,css:(u,d)=>`
			transform: ${r} scale(${1-c*d});
			opacity: ${o-f*d}
		`}}function dt(t,e,n){const l=t.slice();return l[5]=e[n],l[7]=n,l}function ht(t){let e,n=t[5].value+"",l,s;return{c(){e=v("span"),l=D(n),_(e,"class","svelte-13vx703")},m(a,i){w(a,e,i),m(e,l)},p(a,i){i&1&&n!==(n=a[5].value+"")&&le(l,n)},i(a){a&&(s||he(()=>{s=Mn(e,Tn,{delay:150,duration:200,easing:Pn}),s.start()}))},o:E,d(a){a&&H(e)}}}function gt(t){let e,n=t[5].count,l,s,a,i,o=ht(t);function r(){return t[3](t[5],t[7])}return{c(){e=v("button"),o.c(),l=M(),_(e,"class",s=re(`dice d${t[5].key}${t[1]===t[7]?" green":""}`)+" svelte-13vx703")},m(c,f){w(c,e,f),o.m(e,null),m(e,l),a||(i=ne(e,"click",r),a=!0)},p(c,f){t=c,f&1&&I(n,n=t[5].count)?(ee(),k(o,1,1,E),te(),o=ht(t),o.c(),b(o,1),o.m(e,l)):o.p(t,f),f&3&&s!==(s=re(`dice d${t[5].key}${t[1]===t[7]?" green":""}`)+" svelte-13vx703")&&_(e,"class",s)},d(c){c&&H(e),o.d(c),a=!1,i()}}}function On(t){let e,n=Y(t[0]),l=[];for(let s=0;s<n.length;s+=1)l[s]=gt(dt(t,n,s));return{c(){e=v("div");for(let s=0;s<l.length;s+=1)l[s].c();_(e,"class","dice-list svelte-13vx703")},m(s,a){w(s,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(s,[a]){if(a&7){n=Y(s[0]);let i;for(i=0;i<n.length;i+=1){const o=dt(s,n,i);l[i]?l[i].p(o,a):(l[i]=gt(o),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},i:E,o:E,d(s){s&&H(e),ge(l,s)}}}function Rn(t,e,n){let l;ie(t,Ne,r=>n(4,l=r));let s=l;Ne.subscribe(r=>n(0,s=r));let a;const i=(r,c)=>{Ne.roll(r),n(1,a=c)};return[s,a,i,(r,c)=>i(r.key,c)]}class qn extends V{constructor(e){super(),B(this,e,Rn,On,I,{})}}const Dn=t=>{let e;ae.subscribe(l=>e=l[`${t}Max`]);const n=z(1,20);return n===1||n<=e},We=(t,e=1)=>{let n;K.subscribe(s=>n=s.hpMax);const l=z(e,6);t!=="add"?l>n?(K.setMaxHp(l),Q.addHistory(`HP has been set to ${l}.`)):Q.addHistory("HP roll result was too low, no upgrade."):(K.setMaxHp(n+l),Q.addHistory(`${l} has been added to HP.`))},Ge=(t,e)=>{const n=e||["","str","dex","wil"][z(1,3)];let l;ae.subscribe(a=>l=a[`${n}Max`]);const s=z(3,6);if(t!=="add")l<s?(ae.setMaxAbility(n,s),Q.addHistory(`${n.toUpperCase()} has been set to ${s}.`)):Q.addHistory(`${n.toUpperCase()} roll result was too low, no upgrade.`);else if(Dn(n)){const a=z(1,4);K.setMaxHp(l+a),Q.addHistory(`${a} has been added to ${n.toUpperCase()}.`)}else Q.addHistory(`${n.toUpperCase()} save was failed, no upgrade.`)},Fn=()=>{const t=[],{subscribe:e,set:n,update:l}=pe([...t]);return{subscribe:e,set:n,add:s=>l(a=>{switch(s){case 1:a=[...a,{content:`Lasting Scar on ${["","Neck","Hands","Eye","Chest","Legs","Ear"][z(1,6)]}.`}],We("change",1);break;case 2:a=[...a,{content:"Rattling Blow. You’re disoriented and shaken. Describe how you refocus."}],We("change",1);break;case 3:a=[...a,{content:"Walloped: You’re sent flying and land flat on your face, winded. You are deprived until you rest for a few hours, when resolve.",resolve:{action:"increaseHP",type:"add",num:1}}];break;case 4:a=[...a,{content:`Broken Limb: ${["","Leg","Leg","Arm","Arm","Rib","Skull"][z(1,6)]}. Once mended, resolve.`,resolve:{action:"increaseHP",type:"change",num:2}}];break;case 5:a=[...a,{content:"Diseased: You’re afflicted with a gross, uncomfortable infection. When you get over it, resolve.",resolve:{action:"increaseHP",type:"change",num:2}}];break;case 6:a=[...a,{content:"Reorienting Head Wound."}],Ge("change");break;case 7:a=[...a,{content:"Hamstrung: You can barely move until you get serious help and rest. After recovery, resolve.",resolve:{action:"increaseAbility",type:"change",key:"dex"}}];break;case 8:a=[...a,{content:"Deafened: You cannot hear anything until you find extraordinary aid. Regardless, resolve.",resolve:{action:"increaseAbility",type:"add",key:"wil"}}];break;case 9:a=[...a,{content:"Re-brained: Some hidden part of your psyche is knocked loose."}],Ge("change","wil");break;case 10:a=[...a,{content:"Sundered: An appendage is torn off, crippled or useless. The Warden will tell you which. Then resolve.",resolve:{action:"increaseAbility",type:"add",key:"wil"}}];break;case 11:a=[...a,{content:"Mortal Wound: You are deprived and out of action. You die in one hour unless healed. Upon recovery, resolve.",resolve:{action:"increaseHP",type:"change",num:2}}];break;case 12:a=[...a,{content:"Doomed: Death seemed ever so close, but somehow you survived. If your next save against critical damage is a fail, you die horribly. If you pass, resolve",resolve:{action:"increaseHP",type:"change",num:3}}];break}return setTimeout(()=>J(),0),[...a]}),addHistory:s=>setTimeout(()=>l(a=>(a=[...a,{content:s}],setTimeout(()=>J(),0),[...a])),0),resolve:s=>l(a=>{const i=a[s].resolve;switch(i.action){case"increaseHP":We(i.type,i.num);break;case"increaseAbility":Ge(i.type,i.key);break}return a[s].resolve=null,J(),[...a]}),reset:()=>{n([...t]),J()}}},Q=Fn(),nt=()=>{let t;ce.subscribe(i=>t=i);let e;ae.subscribe(i=>e=i);let n;K.subscribe(i=>n=i);let l;_e.subscribe(i=>l=i);let s;de.subscribe(i=>s=i);let a;return Q.subscribe(i=>a=i),{name:t,abilities:{str:e.str,dex:e.dex,wil:e.wil,strMax:e.strMax,dexMax:e.dexMax,wilMax:e.wilMax},stats:{hp:n.hp,hpMax:n.hpMax,armor:n.armor,deprived:n.deprived},coins:{gp:l.gp,sp:l.sp,cp:l.cp},inventory:s,scars:a}},J=()=>{const t=nt();localStorage.setItem("pc__character",JSON.stringify(t))},Ln=()=>{const{subscribe:t,set:e,update:n}=pe({str:0,dex:0,wil:0,strMax:0,dexMax:0,wilMax:0});return{subscribe:t,set:e,increase:l=>n(s=>(s[l]+=s[l]<s[`${l}Max`]?1:0,J(),{...s})),decrease:l=>n(s=>(s[l]-=s[l]>0?1:0,J(),{...s})),setMaxAbility:(l,s)=>n(a=>(a[`${l}Max`]=s,J(),{...a}))}},zn=()=>{const{subscribe:t,set:e,update:n}=pe({hp:0,hpMax:10,armor:0,deprived:!1});return{subscribe:t,set:e,increaseHp:()=>n(l=>(l.hp+=l.hp<l.hpMax?1:0,J(),{...l})),decreaseHp:()=>n(l=>(l.hp-=l.hp>0?1:0,J(),{...l})),setMaxHp:l=>n(s=>(s.hpMax=l,J(),{...s})),increaceArmor:()=>n(l=>(l.armor+=l.armor<9?1:0,J(),{...l})),decreaseArmor:()=>n(l=>(l.armor-=l.armor>0?1:0,J(),{...l})),changeDeprived:()=>n(l=>(l.deprived=!l.deprived,J(),{...l}))}},En=()=>{const{subscribe:t,set:e,update:n}=pe({gp:"0",sp:"0",cp:"0"});return{subscribe:t,set:e,change:(l,s)=>n(a=>(a[l]=s,J(),{...a}))}},In=()=>{const{subscribe:t,set:e,update:n}=pe([{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]);return{subscribe:t,set:e,change:l=>n(s=>(s=l,J(),[...s]))}},ce=pe(""),ae=Ln(),K=zn(),_e=En(),de=In();function Bn(t){let e,n;const l=t[9].default,s=Qe(l,t,t[8],null);return{c(){e=v("p"),s&&s.c(),_(e,"class","svelte-a6xpga")},m(a,i){w(a,e,i),s&&s.m(e,null),n=!0},p(a,i){s&&s.p&&(!n||i&256)&&xe(s,l,a,a[8],n?Ze(l,a[8],i,null):et(a[8]),null)},i(a){n||(b(s,a),n=!0)},o(a){k(s,a),n=!1},d(a){a&&H(e),s&&s.d(a)}}}function Vn(t){let e,n;return{c(){e=v("img"),_(e,"class","image svelte-a6xpga"),ot(e.src,n=t[5])||_(e,"src",n),_(e,"alt",t[6])},m(l,s){w(l,e,s)},p(l,s){s&32&&!ot(e.src,n=l[5])&&_(e,"src",n),s&64&&_(e,"alt",l[6])},i:E,o:E,d(l){l&&H(e)}}}function Nn(t){let e,n,l,s,a,i,o,r;const c=[Vn,Bn],f=[];function u(d,g){return d[5]?0:1}return n=u(t),l=f[n]=c[n](t),{c(){e=v("button"),l.c(),_(e,"class",s=re(`button${t[4]?" borderless":""}`)+" svelte-a6xpga"),e.disabled=t[3],_(e,"style",a=`
    min-width: ${t[1]}px;
    height: ${t[1]}px;
    border-radius: ${t[1]/2}px;
    padding: ${t[0]}px;
    font-size: ${t[2]};
    line-height: ${t[2]};
  `)},m(d,g){w(d,e,g),f[n].m(e,null),i=!0,o||(r=ne(e,"click",t[10]),o=!0)},p(d,[g]){let h=n;n=u(d),n===h?f[n].p(d,g):(ee(),k(f[h],1,1,()=>{f[h]=null}),te(),l=f[n],l?l.p(d,g):(l=f[n]=c[n](d),l.c()),b(l,1),l.m(e,null)),(!i||g&16&&s!==(s=re(`button${d[4]?" borderless":""}`)+" svelte-a6xpga"))&&_(e,"class",s),(!i||g&8)&&(e.disabled=d[3]),(!i||g&7&&a!==(a=`
    min-width: ${d[1]}px;
    height: ${d[1]}px;
    border-radius: ${d[1]/2}px;
    padding: ${d[0]}px;
    font-size: ${d[2]};
    line-height: ${d[2]};
  `))&&_(e,"style",a)},i(d){i||(b(l),i=!0)},o(d){k(l),i=!1},d(d){d&&H(e),f[n].d(),o=!1,r()}}}function Wn(t,e,n){let{$$slots:l={},$$scope:s}=e,{height:a=40}=e,{padding:i=0}=e,{fontSize:o="1.6rem"}=e,{disabled:r=!1}=e,{borderless:c=!1}=e,{image:f=void 0}=e,{alt:u=void 0}=e;const d=ue(),g=()=>d("click");return t.$$set=h=>{"height"in h&&n(1,a=h.height),"padding"in h&&n(0,i=h.padding),"fontSize"in h&&n(2,o=h.fontSize),"disabled"in h&&n(3,r=h.disabled),"borderless"in h&&n(4,c=h.borderless),"image"in h&&n(5,f=h.image),"alt"in h&&n(6,u=h.alt),"$$scope"in h&&n(8,s=h.$$scope)},t.$$.update=()=>{t.$$.dirty&1&&n(0,i||(i=0))},[i,a,o,r,c,f,u,d,s,l,g]}class Z extends V{constructor(e){super(),B(this,e,Wn,Nn,I,{height:1,padding:0,fontSize:2,disabled:3,borderless:4,image:5,alt:6})}}const Gn=(t="character")=>{const e=nt(),n=`${e.name}.json`,l=JSON.stringify(e),s=document.createElement("a");s.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(l)),s.setAttribute("download",n),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)},on=t=>{const e=n=>{t&&!t.contains(n.target)&&!n.defaultPrevented&&t.dispatchEvent(new CustomEvent("click_outside",t))};return document.addEventListener("click",e,!0),{destroy(){document.removeEventListener("click",e,!0)}}};function mt(t){let e,n,l,s,a,i,o,r,c,f,u,d,g=t[1]&&_t(t);const h=t[5].default,y=Qe(h,t,t[9],null);i=new Z({props:{$$slots:{default:[Jn]},$$scope:{ctx:t}}}),i.$on("click",t[6]);let p=!t[2]&&pt(t);return{c(){e=v("div"),g&&g.c(),n=M(),l=v("span"),y&&y.c(),s=M(),a=v("div"),j(i.$$.fragment),o=M(),p&&p.c(),_(l,"class","content svelte-eqy7jm"),_(a,"class",r=re(`controls${t[2]?" submission":""}`)+" svelte-eqy7jm"),_(e,"class","modal svelte-eqy7jm")},m($,P){w($,e,P),g&&g.m(e,null),m(e,n),m(e,l),y&&y.m(l,null),m(e,s),m(e,a),C(i,a,null),m(a,o),p&&p.m(a,null),f=!0,u||(d=[Ut(on.call(null,e)),ne(e,"click_outside",t[8])],u=!0)},p($,P){$[1]?g?g.p($,P):(g=_t($),g.c(),g.m(e,n)):g&&(g.d(1),g=null),y&&y.p&&(!f||P&512)&&xe(y,h,$,$[9],f?Ze(h,$[9],P,null):et($[9]),null);const T={};P&512&&(T.$$scope={dirty:P,ctx:$}),i.$set(T),$[2]?p&&(ee(),k(p,1,1,()=>{p=null}),te()):p?(p.p($,P),P&4&&b(p,1)):(p=pt($),p.c(),b(p,1),p.m(a,null)),(!f||P&4&&r!==(r=re(`controls${$[2]?" submission":""}`)+" svelte-eqy7jm"))&&_(a,"class",r)},i($){f||(b(y,$),b(i.$$.fragment,$),b(p),$&&he(()=>{f&&(c||(c=De(e,Le,{delay:250,duration:300,easing:Fe,axis:"y"},!0)),c.run(1))}),f=!0)},o($){k(y,$),k(i.$$.fragment,$),k(p),$&&(c||(c=De(e,Le,{delay:250,duration:300,easing:Fe,axis:"y"},!1)),c.run(0)),f=!1},d($){$&&H(e),g&&g.d(),y&&y.d($),A(i),p&&p.d(),$&&c&&c.end(),u=!1,fe(d)}}}function _t(t){let e,n;return{c(){e=v("h2"),n=D(t[1]),_(e,"class","title svelte-eqy7jm")},m(l,s){w(l,e,s),m(e,n)},p(l,s){s&2&&le(n,l[1])},d(l){l&&H(e)}}}function Jn(t){let e;return{c(){e=D("Cancel")},m(n,l){w(n,e,l)},d(n){n&&H(e)}}}function pt(t){let e,n;return e=new Z({props:{disabled:t[3],$$slots:{default:[Yn]},$$scope:{ctx:t}}}),e.$on("click",t[7]),{c(){j(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},p(l,s){const a={};s&8&&(a.disabled=l[3]),s&512&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function Yn(t){let e;return{c(){e=D("OK")},m(n,l){w(n,e,l)},d(n){n&&H(e)}}}function Un(t){let e,n,l=t[0]&&mt(t);return{c(){l&&l.c(),e=en()},m(s,a){l&&l.m(s,a),w(s,e,a),n=!0},p(s,[a]){s[0]?l?(l.p(s,a),a&1&&b(l,1)):(l=mt(s),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(ee(),k(l,1,1,()=>{l=null}),te())},i(s){n||(b(l),n=!0)},o(s){k(l),n=!1},d(s){s&&H(e),l&&l.d(s)}}}function Kn(t,e,n){let{$$slots:l={},$$scope:s}=e,{isShown:a}=e,{title:i=void 0}=e,{submission:o=!1}=e,{disableOk:r=!1}=e;const c=ue(),f=()=>c("cancel"),u=()=>c("ok"),d=()=>c("cancel");return t.$$set=g=>{"isShown"in g&&n(0,a=g.isShown),"title"in g&&n(1,i=g.title),"submission"in g&&n(2,o=g.submission),"disableOk"in g&&n(3,r=g.disableOk),"$$scope"in g&&n(9,s=g.$$scope)},[a,i,o,r,c,l,f,u,d,s]}class Oe extends V{constructor(e){super(),B(this,e,Kn,Un,I,{isShown:0,title:1,submission:2,disableOk:3})}}function $t(t){let e,n;return{c(){e=v("span"),n=D(t[0]),_(e,"class","title svelte-mt0x83")},m(l,s){w(l,e,s),m(e,n)},p(l,s){s&1&&le(n,l[0])},d(l){l&&H(e)}}}function Xn(t){let e;return{c(){e=D("−")},m(n,l){w(n,e,l)},d(n){n&&H(e)}}}function bt(t){let e,n;return{c(){e=D("/ "),n=D(t[2])},m(l,s){w(l,e,s),w(l,n,s)},p(l,s){s&4&&le(n,l[2])},d(l){l&&(H(e),H(n))}}}function Qn(t){let e;return{c(){e=D("+")},m(n,l){w(n,e,l)},d(n){n&&H(e)}}}function Zn(t){let e,n,l,s,a,i,o,r,c,f,u,d=t[0]&&$t(t);s=new Z({props:{disabled:t[1]===0,$$slots:{default:[Xn]},$$scope:{ctx:t}}}),s.$on("click",t[5]);let g=!t[3]&&bt(t);return f=new Z({props:{disabled:t[1]===t[2],$$slots:{default:[Qn]},$$scope:{ctx:t}}}),f.$on("click",t[6]),{c(){e=v("div"),d&&d.c(),n=M(),l=v("div"),j(s.$$.fragment),a=M(),i=v("div"),o=D(t[1]),r=M(),g&&g.c(),c=M(),j(f.$$.fragment),_(i,"class","current svelte-mt0x83"),_(l,"class","controls svelte-mt0x83"),_(e,"class","ability svelte-mt0x83")},m(h,y){w(h,e,y),d&&d.m(e,null),m(e,n),m(e,l),C(s,l,null),m(l,a),m(l,i),m(i,o),m(i,r),g&&g.m(i,null),m(l,c),C(f,l,null),u=!0},p(h,[y]){h[0]?d?d.p(h,y):(d=$t(h),d.c(),d.m(e,n)):d&&(d.d(1),d=null);const p={};y&2&&(p.disabled=h[1]===0),y&128&&(p.$$scope={dirty:y,ctx:h}),s.$set(p),(!u||y&2)&&le(o,h[1]),h[3]?g&&(g.d(1),g=null):g?g.p(h,y):(g=bt(h),g.c(),g.m(i,null));const $={};y&6&&($.disabled=h[1]===h[2]),y&128&&($.$$scope={dirty:y,ctx:h}),f.$set($)},i(h){u||(b(s.$$.fragment,h),b(f.$$.fragment,h),u=!0)},o(h){k(s.$$.fragment,h),k(f.$$.fragment,h),u=!1},d(h){h&&H(e),d&&d.d(),A(s),g&&g.d(),A(f)}}}function xn(t,e,n){let{title:l=""}=e,{value:s=0}=e,{maxValue:a=0}=e,{hideMaxValue:i=!1}=e;const o=ue(),r=()=>o("decrease"),c=()=>o("increase");return t.$$set=f=>{"title"in f&&n(0,l=f.title),"value"in f&&n(1,s=f.value),"maxValue"in f&&n(2,a=f.maxValue),"hideMaxValue"in f&&n(3,i=f.hideMaxValue)},[l,s,a,i,o,r,c]}class ze extends V{constructor(e){super(),B(this,e,xn,Zn,I,{title:0,value:1,maxValue:2,hideMaxValue:3})}}function vt(t,e,n){const l=t.slice();return l[20]=e[n],l[22]=n,l}function kt(t){let e;return{c(){e=v("div"),e.textContent="You have no scars",_(e,"class","item svelte-za9n35")},m(n,l){w(n,e,l)},d(n){n&&H(e)}}}function el(t){let e,n;return e=new Z({props:{height:30,fontSize:"1rem",disabled:!0,$$slots:{default:[nl]},$$scope:{ctx:t}}}),{c(){j(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function tl(t){let e,n;function l(){return t[8](t[22])}return e=new Z({props:{height:30,fontSize:"1rem",$$slots:{default:[ll]},$$scope:{ctx:t}}}),e.$on("click",l),{c(){j(e.$$.fragment)},m(s,a){C(e,s,a),n=!0},p(s,a){t=s;const i={};a&8388608&&(i.$$scope={dirty:a,ctx:t}),e.$set(i)},i(s){n||(b(e.$$.fragment,s),n=!0)},o(s){k(e.$$.fragment,s),n=!1},d(s){A(e,s)}}}function nl(t){let e;return{c(){e=D("Resolved")},m(n,l){w(n,e,l)},d(n){n&&H(e)}}}function ll(t){let e;return{c(){e=D("Resolve")},m(n,l){w(n,e,l)},d(n){n&&H(e)}}}function yt(t){let e,n=t[20].content+"",l,s,a,i,o,r;const c=[tl,el],f=[];function u(d,g){return d[20].resolve?0:1}return a=u(t),i=f[a]=c[a](t),{c(){e=v("div"),l=D(n),s=M(),i.c(),o=M(),_(e,"class","item resolvable svelte-za9n35")},m(d,g){w(d,e,g),m(e,l),m(e,s),f[a].m(e,null),m(e,o),r=!0},p(d,g){(!r||g&16)&&n!==(n=d[20].content+"")&&le(l,n);let h=a;a=u(d),a!==h&&(ee(),k(f[h],1,1,()=>{f[h]=null}),te(),i=f[a],i||(i=f[a]=c[a](d),i.c()),b(i,1),i.m(e,o))},i(d){r||(b(i),r=!0)},o(d){k(i),r=!1},d(d){d&&H(e),f[a].d()}}}function sl(t){let e;return{c(){e=D("Add scar")},m(n,l){w(n,e,l)},d(n){n&&H(e)}}}function al(t){let e;return{c(){e=D("Download character (json)")},m(n,l){w(n,e,l)},d(n){n&&H(e)}}}function il(t){let e;return{c(){e=D("Delete character")},m(n,l){w(n,e,l)},d(n){n&&H(e)}}}function rl(t){let e;return{c(){e=D(`Adding a scar is an irreversible action that enables you to advance your
    character. Have you consulted with the Warden to confirm that you can
    acquire a scar?`)},m(n,l){w(n,e,l)},d(n){n&&H(e)}}}function ol(t){let e,n,l;return n=new ze({props:{value:t[3],maxValue:12,hideMaxValue:!0}}),n.$on("decrease",t[14]),n.$on("increase",t[15]),{c(){e=D(`How many damage points was taken?
    `),j(n.$$.fragment)},m(s,a){w(s,e,a),C(n,s,a),l=!0},p(s,a){const i={};a&8&&(i.value=s[3]),n.$set(i)},i(s){l||(b(n.$$.fragment,s),l=!0)},o(s){k(n.$$.fragment,s),l=!1},d(s){s&&H(e),A(n,s)}}}function cl(t){let e;return{c(){e=D("Do you really want to delete this character?")},m(n,l){w(n,e,l)},d(n){n&&H(e)}}}function fl(t){let e,n,l,s,a,i,o,r,c,f,u,d,g,h,y,p,$,P,T,R=t[4].length===0&&kt(),N=Y(t[4]),F=[];for(let S=0;S<N.length;S+=1)F[S]=yt(vt(t,N,S));const X=S=>k(F[S],1,1,()=>{F[S]=null});return r=new Z({props:{padding:4,disabled:t[5].hp>0,$$slots:{default:[sl]},$$scope:{ctx:t}}}),r.$on("click",t[9]),f=new Z({props:{padding:4,$$slots:{default:[al]},$$scope:{ctx:t}}}),f.$on("click",t[10]),d=new Z({props:{padding:4,$$slots:{default:[il]},$$scope:{ctx:t}}}),d.$on("click",t[11]),h=new Oe({props:{isShown:t[1],$$slots:{default:[rl]},$$scope:{ctx:t}}}),h.$on("cancel",t[12]),h.$on("ok",t[13]),p=new Oe({props:{isShown:t[2],disableOk:t[3]===0,$$slots:{default:[ol]},$$scope:{ctx:t}}}),p.$on("cancel",t[16]),p.$on("ok",t[17]),P=new Oe({props:{isShown:t[0],$$slots:{default:[cl]},$$scope:{ctx:t}}}),P.$on("cancel",t[18]),P.$on("ok",t[19]),{c(){e=v("div"),n=v("span"),n.textContent="Scars history:",l=M(),s=v("div"),a=v("div"),R&&R.c(),i=M();for(let S=0;S<F.length;S+=1)F[S].c();o=M(),j(r.$$.fragment),c=M(),j(f.$$.fragment),u=M(),j(d.$$.fragment),g=M(),j(h.$$.fragment),y=M(),j(p.$$.fragment),$=M(),j(P.$$.fragment),_(n,"class","title svelte-za9n35"),_(a,"class","wrap svelte-za9n35"),_(s,"class","scars svelte-za9n35"),_(e,"class","menu svelte-za9n35")},m(S,q){w(S,e,q),m(e,n),m(e,l),m(e,s),m(s,a),R&&R.m(a,null),m(a,i);for(let G=0;G<F.length;G+=1)F[G]&&F[G].m(a,null);m(e,o),C(r,e,null),m(e,c),C(f,e,null),m(e,u),C(d,e,null),m(e,g),C(h,e,null),m(e,y),C(p,e,null),m(e,$),C(P,e,null),T=!0},p(S,[q]){if(S[4].length===0?R||(R=kt(),R.c(),R.m(a,i)):R&&(R.d(1),R=null),q&16){N=Y(S[4]);let L;for(L=0;L<N.length;L+=1){const se=vt(S,N,L);F[L]?(F[L].p(se,q),b(F[L],1)):(F[L]=yt(se),F[L].c(),b(F[L],1),F[L].m(a,null))}for(ee(),L=N.length;L<F.length;L+=1)X(L);te()}const G={};q&32&&(G.disabled=S[5].hp>0),q&8388608&&(G.$$scope={dirty:q,ctx:S}),r.$set(G);const me={};q&8388608&&(me.$$scope={dirty:q,ctx:S}),f.$set(me);const $e={};q&8388608&&($e.$$scope={dirty:q,ctx:S}),d.$set($e);const U={};q&2&&(U.isShown=S[1]),q&8388608&&(U.$$scope={dirty:q,ctx:S}),h.$set(U);const W={};q&4&&(W.isShown=S[2]),q&8&&(W.disableOk=S[3]===0),q&8388616&&(W.$$scope={dirty:q,ctx:S}),p.$set(W);const O={};q&1&&(O.isShown=S[0]),q&8388608&&(O.$$scope={dirty:q,ctx:S}),P.$set(O)},i(S){if(!T){for(let q=0;q<N.length;q+=1)b(F[q]);b(r.$$.fragment,S),b(f.$$.fragment,S),b(d.$$.fragment,S),b(h.$$.fragment,S),b(p.$$.fragment,S),b(P.$$.fragment,S),T=!0}},o(S){F=F.filter(Boolean);for(let q=0;q<F.length;q+=1)k(F[q]);k(r.$$.fragment,S),k(f.$$.fragment,S),k(d.$$.fragment,S),k(h.$$.fragment,S),k(p.$$.fragment,S),k(P.$$.fragment,S),T=!1},d(S){S&&H(e),R&&R.d(),ge(F,S),A(r),A(f),A(d),A(h),A(p),A(P)}}}function ul(t,e,n){let l,s;ie(t,Q,X=>n(4,l=X)),ie(t,K,X=>n(5,s=X));let a=!1,i=!1,o=!1,r=0;const c=()=>{Q.add(r),n(2,o=!1),n(3,r=0)},f=()=>{ce.set(""),Q.reset(),localStorage.removeItem("pc__character")};return[a,i,o,r,l,s,c,f,X=>Q.resolve(X),()=>n(1,i=!0),()=>Gn(),()=>n(0,a=!0),()=>n(1,i=!1),()=>{n(2,o=!0),n(1,i=!1)},()=>r>0?n(3,r-=1):n(3,r),()=>r<12?n(3,r+=1):n(3,r),()=>{n(2,o=!1),n(3,r=0)},()=>c(),()=>n(0,a=!1),()=>f()]}class dl extends V{constructor(e){super(),B(this,e,ul,fl,I,{})}}function Ht(t,e,n){const l=t.slice();return l[4]=e[n],l}function wt(t){let e,n;function l(){return t[2](t[4])}function s(){return t[3](t[4])}return e=new ze({props:{title:t[4],value:t[0][t[4]],maxValue:t[0][`${t[4]}Max`]}}),e.$on("decrease",l),e.$on("increase",s),{c(){j(e.$$.fragment)},m(a,i){C(e,a,i),n=!0},p(a,i){t=a;const o={};i&1&&(o.value=t[0][t[4]]),i&1&&(o.maxValue=t[0][`${t[4]}Max`]),e.$set(o)},i(a){n||(b(e.$$.fragment,a),n=!0)},o(a){k(e.$$.fragment,a),n=!1},d(a){A(e,a)}}}function hl(t){let e,n,l=Y(t[1]),s=[];for(let i=0;i<l.length;i+=1)s[i]=wt(Ht(t,l,i));const a=i=>k(s[i],1,1,()=>{s[i]=null});return{c(){e=v("div");for(let i=0;i<s.length;i+=1)s[i].c();_(e,"class","abilities")},m(i,o){w(i,e,o);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);n=!0},p(i,[o]){if(o&3){l=Y(i[1]);let r;for(r=0;r<l.length;r+=1){const c=Ht(i,l,r);s[r]?(s[r].p(c,o),b(s[r],1)):(s[r]=wt(c),s[r].c(),b(s[r],1),s[r].m(e,null))}for(ee(),r=l.length;r<s.length;r+=1)a(r);te()}},i(i){if(!n){for(let o=0;o<l.length;o+=1)b(s[o]);n=!0}},o(i){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)k(s[o]);n=!1},d(i){i&&H(e),ge(s,i)}}}function gl(t,e,n){let l;return ie(t,ae,o=>n(0,l=o)),[l,["str","dex","wil"],o=>ae.decrease(o),o=>ae.increase(o)]}class ml extends V{constructor(e){super(),B(this,e,gl,hl,I,{})}}function _l(t){let e,n,l,s,a,i,o;return{c(){e=v("label"),n=v("input"),l=M(),s=v("span"),_(n,"type","checkbox"),n.checked=t[1],_(n,"class","svelte-x3sjdj"),_(s,"class","checkmark svelte-x3sjdj"),_(e,"class","checkbox svelte-x3sjdj"),_(e,"style",a=`width: ${t[0]}px;height: ${t[0]}px`)},m(r,c){w(r,e,c),m(e,n),m(e,l),m(e,s),i||(o=ne(n,"change",t[3]),i=!0)},p(r,[c]){c&2&&(n.checked=r[1]),c&1&&a!==(a=`width: ${r[0]}px;height: ${r[0]}px`)&&_(e,"style",a)},i:E,o:E,d(r){r&&H(e),i=!1,o()}}}function pl(t,e,n){let{size:l=0}=e,{checked:s=!1}=e;const a=ue(),i=()=>a("change");return t.$$set=o=>{"size"in o&&n(0,l=o.size),"checked"in o&&n(1,s=o.checked)},[l,s,a,i]}class Ke extends V{constructor(e){super(),B(this,e,pl,_l,I,{size:0,checked:1})}}function $l(t){let e,n,l,s;return{c(){e=v("input"),_(e,"class","input svelte-1yxq73c"),_(e,"placeholder",t[1]),_(e,"style",n=`border-bottom: ${t[2]?"1px solid var(--main)":"none"};`)},m(a,i){w(a,e,i),ct(e,t[0]),l||(s=[ne(e,"input",t[5]),ne(e,"input",t[6])],l=!0)},p(a,[i]){i&2&&_(e,"placeholder",a[1]),i&4&&n!==(n=`border-bottom: ${a[2]?"1px solid var(--main)":"none"};`)&&_(e,"style",n),i&1&&e.value!==a[0]&&ct(e,a[0])},i:E,o:E,d(a){a&&H(e),l=!1,fe(s)}}}function bl(t,e,n){let{value:l="0"}=e,{placeholder:s=""}=e,{border:a=!0}=e,{numbers:i=!1}=e;const o=ue();function r(){l=this.value,n(0,l),n(4,i)}const c=()=>o("input",l);return t.$$set=f=>{"value"in f&&n(0,l=f.value),"placeholder"in f&&n(1,s=f.placeholder),"border"in f&&n(2,a=f.border),"numbers"in f&&n(4,i=f.numbers)},t.$$.update=()=>{t.$$.dirty&17&&n(0,l=i?l.replace(/[^0-9]/g,""):l)},[l,s,a,o,i,r,c]}class lt extends V{constructor(e){super(),B(this,e,bl,$l,I,{value:0,placeholder:1,border:2,numbers:4})}}function St(t,e,n){const l=t.slice();return l[5]=e[n],l[6]=e,l[7]=n,l}function Mt(t){let e,n,l,s,a,i,o,r;function c(){return t[1](t[5],t[6],t[7])}n=new Ke({props:{size:20,checked:t[5].inHand}}),n.$on("change",c);function f(...d){return t[2](t[5],t[6],t[7],...d)}s=new lt({props:{placeholder:"Item",value:t[5].title,border:!1}}),s.$on("input",f);function u(){return t[3](t[5],t[6],t[7])}return i=new Ke({props:{size:20,checked:t[5].fatigue}}),i.$on("change",u),{c(){e=v("div"),j(n.$$.fragment),l=M(),j(s.$$.fragment),a=M(),j(i.$$.fragment),o=M(),_(e,"class","item svelte-1volka6")},m(d,g){w(d,e,g),C(n,e,null),m(e,l),C(s,e,null),m(e,a),C(i,e,null),m(e,o),r=!0},p(d,g){t=d;const h={};g&1&&(h.checked=t[5].inHand),n.$set(h);const y={};g&1&&(y.value=t[5].title),s.$set(y);const p={};g&1&&(p.checked=t[5].fatigue),i.$set(p)},i(d){r||(b(n.$$.fragment,d),b(s.$$.fragment,d),b(i.$$.fragment,d),r=!0)},o(d){k(n.$$.fragment,d),k(s.$$.fragment,d),k(i.$$.fragment,d),r=!1},d(d){d&&H(e),A(n),A(s),A(i)}}}function vl(t){let e,n,l,s,a,i=Y(t[0]),o=[];for(let c=0;c<i.length;c+=1)o[c]=Mt(St(t,i,c));const r=c=>k(o[c],1,1,()=>{o[c]=null});return{c(){e=v("div"),n=v("div"),n.innerHTML='<span class="info svelte-1volka6">Hand</span> <span class="info svelte-1volka6">Fatigue</span>',l=M(),s=v("div");for(let c=0;c<o.length;c+=1)o[c].c();_(n,"class","heading svelte-1volka6"),_(s,"class","list svelte-1volka6"),_(e,"class","inventory svelte-1volka6")},m(c,f){w(c,e,f),m(e,n),m(e,l),m(e,s);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(s,null);a=!0},p(c,[f]){if(f&1){i=Y(c[0]);let u;for(u=0;u<i.length;u+=1){const d=St(c,i,u);o[u]?(o[u].p(d,f),b(o[u],1)):(o[u]=Mt(d),o[u].c(),b(o[u],1),o[u].m(s,null))}for(ee(),u=i.length;u<o.length;u+=1)r(u);te()}},i(c){if(!a){for(let f=0;f<i.length;f+=1)b(o[f]);a=!0}},o(c){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)k(o[f]);a=!1},d(c){c&&H(e),ge(o,c)}}}function kl(t,e,n){let l;ie(t,de,r=>n(4,l=r));const s=l;return[s,(r,c,f)=>{n(0,c[f].inHand=!r.inHand,s),de.change(s)},(r,c,f,u)=>{n(0,c[f].title=u.detail,s),de.change(s)},(r,c,f)=>{n(0,c[f].fatigue=!r.fatigue,s),de.change(s)}]}class yl extends V{constructor(e){super(),B(this,e,kl,vl,I,{})}}function Hl(t){let e,n,l,s,a,i,o,r,c,f;return n=new ze({props:{title:"HP",value:t[0].hp,maxValue:t[0].hpMax}}),n.$on("decrease",K.decreaseHp),n.$on("increase",K.increaseHp),s=new ze({props:{title:"Armor",value:t[0].armor,maxValue:9,hideMaxValue:!0}}),s.$on("decrease",K.decreaseArmor),s.$on("increase",K.increaceArmor),c=new Ke({props:{size:40,checked:t[0].deprived}}),c.$on("change",K.changeDeprived),{c(){e=v("div"),j(n.$$.fragment),l=M(),j(s.$$.fragment),a=M(),i=v("div"),o=v("span"),o.textContent="Deprived",r=M(),j(c.$$.fragment),_(o,"class","title svelte-1xt6604"),_(i,"class","deprived svelte-1xt6604"),_(e,"class","stats")},m(u,d){w(u,e,d),C(n,e,null),m(e,l),C(s,e,null),m(e,a),m(e,i),m(i,o),m(i,r),C(c,i,null),f=!0},p(u,[d]){const g={};d&1&&(g.value=u[0].hp),d&1&&(g.maxValue=u[0].hpMax),n.$set(g);const h={};d&1&&(h.value=u[0].armor),s.$set(h);const y={};d&1&&(y.checked=u[0].deprived),c.$set(y)},i(u){f||(b(n.$$.fragment,u),b(s.$$.fragment,u),b(c.$$.fragment,u),f=!0)},o(u){k(n.$$.fragment,u),k(s.$$.fragment,u),k(c.$$.fragment,u),f=!1},d(u){u&&H(e),A(n),A(s),A(c)}}}function wl(t,e,n){let l;return ie(t,K,s=>n(0,l=s)),[l]}class Sl extends V{constructor(e){super(),B(this,e,wl,Hl,I,{})}}function Ct(t,e,n){const l=t.slice();return l[3]=e[n],l}function At(t){let e,n,l,s,a,i;function o(...r){return t[2](t[3],...r)}return s=new lt({props:{value:t[0][t[3]],numbers:!0}}),s.$on("input",o),{c(){e=v("div"),n=v("span"),n.textContent=`${t[3]}:`,l=M(),j(s.$$.fragment),a=M(),_(n,"class","currency svelte-kujmm1"),_(e,"class","item svelte-kujmm1")},m(r,c){w(r,e,c),m(e,n),m(e,l),C(s,e,null),m(e,a),i=!0},p(r,c){t=r;const f={};c&1&&(f.value=t[0][t[3]]),s.$set(f)},i(r){i||(b(s.$$.fragment,r),i=!0)},o(r){k(s.$$.fragment,r),i=!1},d(r){r&&H(e),A(s)}}}function Ml(t){let e,n,l=Y(t[1]),s=[];for(let i=0;i<l.length;i+=1)s[i]=At(Ct(t,l,i));const a=i=>k(s[i],1,1,()=>{s[i]=null});return{c(){e=v("div");for(let i=0;i<s.length;i+=1)s[i].c();_(e,"class","coins svelte-kujmm1")},m(i,o){w(i,e,o);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);n=!0},p(i,[o]){if(o&3){l=Y(i[1]);let r;for(r=0;r<l.length;r+=1){const c=Ct(i,l,r);s[r]?(s[r].p(c,o),b(s[r],1)):(s[r]=At(c),s[r].c(),b(s[r],1),s[r].m(e,null))}for(ee(),r=l.length;r<s.length;r+=1)a(r);te()}},i(i){if(!n){for(let o=0;o<l.length;o+=1)b(s[o]);n=!0}},o(i){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)k(s[o]);n=!1},d(i){i&&H(e),ge(s,i)}}}function Cl(t,e,n){let l;return ie(t,_e,i=>n(0,l=i)),[l,["gp","sp","cp"],(i,o)=>{_e[i]=o.detail,_e.change(i,o.detail)}]}class Al extends V{constructor(e){super(),B(this,e,Cl,Ml,I,{})}}function jl(t){let e,n,l;const s=t[2].default,a=Qe(s,t,t[1],null);return{c(){e=v("section"),a&&a.c(),_(e,"class",n=re(`section ${t[0]}`)+" svelte-1agcuz2")},m(i,o){w(i,e,o),a&&a.m(e,null),l=!0},p(i,[o]){a&&a.p&&(!l||o&2)&&xe(a,s,i,i[1],l?Ze(s,i[1],o,null):et(i[1]),null),(!l||o&1&&n!==(n=re(`section ${i[0]}`)+" svelte-1agcuz2"))&&_(e,"class",n)},i(i){l||(b(a,i),l=!0)},o(i){k(a,i),l=!1},d(i){i&&H(e),a&&a.d(i)}}}function Pl(t,e,n){let{$$slots:l={},$$scope:s}=e,{position:a=""}=e;return t.$$set=i=>{"position"in i&&n(0,a=i.position),"$$scope"in i&&n(1,s=i.$$scope)},[a,s,l]}class Pe extends V{constructor(e){super(),B(this,e,Pl,jl,I,{position:0})}}function Tl(t){let e,n;return e=new ml({}),{c(){j(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function Ol(t){let e,n;return e=new Sl({}),{c(){j(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function Rl(t){let e,n;return e=new Al({}),{c(){j(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function ql(t){let e,n;return e=new yl({}),{c(){j(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function Dl(t){let e,n,l,s,a,i,o,r,c;return n=new Pe({props:{position:"first",$$slots:{default:[Tl]},$$scope:{ctx:t}}}),s=new Pe({props:{$$slots:{default:[Ol]},$$scope:{ctx:t}}}),i=new Pe({props:{$$slots:{default:[Rl]},$$scope:{ctx:t}}}),r=new Pe({props:{position:"last",$$slots:{default:[ql]},$$scope:{ctx:t}}}),{c(){e=v("div"),j(n.$$.fragment),l=M(),j(s.$$.fragment),a=M(),j(i.$$.fragment),o=M(),j(r.$$.fragment),_(e,"class","sheet svelte-97sp0t")},m(f,u){w(f,e,u),C(n,e,null),m(e,l),C(s,e,null),m(e,a),C(i,e,null),m(e,o),C(r,e,null),c=!0},p(f,[u]){const d={};u&1&&(d.$$scope={dirty:u,ctx:f}),n.$set(d);const g={};u&1&&(g.$$scope={dirty:u,ctx:f}),s.$set(g);const h={};u&1&&(h.$$scope={dirty:u,ctx:f}),i.$set(h);const y={};u&1&&(y.$$scope={dirty:u,ctx:f}),r.$set(y)},i(f){c||(b(n.$$.fragment,f),b(s.$$.fragment,f),b(i.$$.fragment,f),b(r.$$.fragment,f),c=!0)},o(f){k(n.$$.fragment,f),k(s.$$.fragment,f),k(i.$$.fragment,f),k(r.$$.fragment,f),c=!1},d(f){f&&H(e),A(n),A(s),A(i),A(r)}}}class Fl extends V{constructor(e){super(),B(this,e,null,Dl,I,{})}}const jt="/mobile-cairn/assets/settings-8bd1b2da.svg",Pt="/mobile-cairn/assets/cross-5d728ea7.svg";function Ll(t){let e,n,l,s,a,i,o,r,c,f,u,d,g,h,y,p,$,P;return r=new Z({props:{borderless:!0,image:t[0]?Pt:jt,alt:"settings"}}),r.$on("click",t[2]),u=new dl({}),g=new Fl({}),$=new qn({}),{c(){e=v("div"),n=v("div"),l=v("div"),s=v("div"),a=v("h2"),i=D(t[1]),o=M(),j(r.$$.fragment),c=M(),f=v("div"),j(u.$$.fragment),d=M(),j(g.$$.fragment),y=M(),p=v("footer"),j($.$$.fragment),_(a,"class","text svelte-1axlasn"),_(s,"class","wrap svelte-1axlasn"),_(l,"class","name svelte-1axlasn"),_(n,"class","header svelte-1axlasn"),_(f,"class","main svelte-1axlasn"),_(f,"style",h=`left: ${t[0]?"0":"-100%"}`),_(p,"class","footer svelte-1axlasn"),_(e,"class","character svelte-1axlasn")},m(T,R){w(T,e,R),m(e,n),m(n,l),m(l,s),m(s,a),m(a,i),m(n,o),C(r,n,null),m(e,c),m(e,f),C(u,f,null),m(f,d),C(g,f,null),m(e,y),m(e,p),C($,p,null),P=!0},p(T,[R]){(!P||R&2)&&le(i,T[1]);const N={};R&1&&(N.image=T[0]?Pt:jt),r.$set(N),(!P||R&1&&h!==(h=`left: ${T[0]?"0":"-100%"}`))&&_(f,"style",h)},i(T){P||(b(r.$$.fragment,T),b(u.$$.fragment,T),b(g.$$.fragment,T),b($.$$.fragment,T),P=!0)},o(T){k(r.$$.fragment,T),k(u.$$.fragment,T),k(g.$$.fragment,T),k($.$$.fragment,T),P=!1},d(T){T&&H(e),A(r),A(u),A(g),A($)}}}function zl(t,e,n){let l;ie(t,ce,i=>n(1,l=i));let s=!1;return[s,l,()=>n(0,s=!s)]}class El extends V{constructor(e){super(),B(this,e,zl,Ll,I,{})}}const Xe=["","Adhere","Earthquake","Masquerade","Smoke Form","Anchor","Elasticity","Miniaturize","Sniff","Animate Object","Elemental Wall","Mirror Image","Snuff","Anthropomorphize","Filch","Mirrorwalk","Sort","Arcane Eye","Flare","Multiarm","Spectacle","Astral Prison","Fog Cloud","Night Sphere","Spellsaw","Attract","Frenzy","Objectify","Spider Climb","Auditory Illusion","Gate","Ooze Form","Summon Cube","Babble","Gravity Shift","Pacify","Swarm","Bait Flower","Greed","Phobia","Telekinesis","Beast Form","Haste","Pit","Telepathy","Befuddle","Hatred","Primal Surge","Teleport","Body Swap","Hear Whispers","Push/Pull","Target Lure","Charm","Hover","Raise Dead","Thicket","Command","Hypnotize","Raise Spirit","Summon Idol","Comprehend","Icy Touch","Read Mind","Time Control","Cone of Foam","Identify Owner","Repel","True Sight","Control Plants","Illuminate","Scry","Upwell","Control Weather","Invisible Tether","Sculpt Elements","Vision","Cure Wounds","Knock","Sense","Visual Illusion","Deafen","Leap","Shield","Ward","Detect Magic","Liquid Air","Shroud","Web","Disassemble","Magic Dampener","Shuffle","Widget","Disguise","Manse","Sleep","Wizard Mark","Displace","Marble Craze","Slick	100	X-Ray Vision"],Tt=()=>{const t=[""];for(let e=1;e<=20;e++)e<=3?t.push(""):e<=14?t.push("Brigandine (1 Armor, bulky)"):e<=19?t.push("Chainmail (2 Armor, bulky)"):t.push("Plate (3 Armor, bulky)");return t},Il=()=>{const t=[""];for(let e=1;e<=20;e++)e<=13?t.push(""):e<=16?t.push("Helmet (+1 Armor)"):e<=19?t.push("Shield (+1 Armor)"):t.push("both");return t},Ot=()=>{const t=[""];for(let e=1;e<=20;e++)e<=5?t.push("Dagger/Cudgel/Staff  (d6 damage)"):e<=14?t.push("Sword/Mace/Axe (d8 damage)"):e<=16?t.push("Sling (d4 damage)"):e<=18?t.push("Bow (d6 damage, bulky)"):e<=19?t.push("Crossbow (d8 damage, bulky)"):t.push("Halberd/War Hammer/Battleaxe  (d10 damage, bulky)");return t},Rt=["","Air Bladder","Fire Oil","Manacles","Rope (25ft)","Antitoxin","Grappling Hook","Pick","Spirit Ward","Cart (+4 slots, bulky)","Large Sack","Pole (10ft)","Spyglass","Chain (10ft)","Large Trap","Pulley","Tinderbox","Dowsing Rod","Lockpicks","Repellent","Wolfsbane"],qt=["","Bellows","Cook Pots","Grease","Net","Bucket","Crowbar","Hammer","Saw","Caltrops","Drill (Manual)","Hour Glass","Sealant","Chalk","Fishing Rod","Metal File","Shovel","Chisel","Glue","Nails","Tongs"],Dt=["","Bottle","Horn","Mirror","Soap","Card Deck","Incense","Perfume","Sponge","Dice Set","Instrument","Quill & Ink","Tar Pot","Face Paint","Lens","Salt Pack","Twine","Fake Jewels","Marbles","Small Bell","Whistle"],Bl=()=>{const t=Il()[z(1,20)],e=l=>l<=3?qt[z(1,20)]:l<=5?Dt[z(1,20)]:l<=13?Rt[z(1,20)]:l<=15?Tt()[z(1,20)]:l<=17?Ot()[z(1,20)]:`Spellbook (${Xe[z(1,100)]})`;return[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:Tt()[z(1,20)],inHand:!1,fatigue:!1},{title:Ot()[z(1,20)],inHand:!1,fatigue:!1},{title:t==="both"?"Helmet (+1 Armor)":t,inHand:!1,fatigue:!1},{title:t==="both"?"Shield (+1 Armor)":"",inHand:!1,fatigue:!1},{title:Rt[z(1,20)],inHand:!1,fatigue:!1},{title:qt[z(1,20)],inHand:!1,fatigue:!1},{title:Dt[z(1,20)],inHand:!1,fatigue:!1},{title:e(z(1,20)),inHand:!1,fatigue:!1}].sort((l,s)=>l.title>s.title?-1:1)};function Ft(t,e,n){const l=t.slice();return l[8]=e[n],l}function Lt(t){let e,n,l,s,a,i,o=Y(t[0]),r=[];for(let c=0;c<o.length;c+=1)r[c]=zt(Ft(t,o,c));return{c(){e=v("div");for(let c=0;c<r.length;c+=1)r[c].c();_(e,"class","list svelte-19hjmee"),_(e,"style",n=`top: -${t[0].length/2*25}%`)},m(c,f){w(c,e,f);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);s=!0,a||(i=[Ut(on.call(null,e)),ne(e,"click_outside",t[6])],a=!0)},p(c,f){if(f&9){o=Y(c[0]);let u;for(u=0;u<o.length;u+=1){const d=Ft(c,o,u);r[u]?r[u].p(d,f):(r[u]=zt(d),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=o.length}(!s||f&1&&n!==(n=`top: -${c[0].length/2*25}%`))&&_(e,"style",n)},i(c){s||(c&&he(()=>{s&&(l||(l=De(e,Le,{delay:100,duration:200,easing:Fe,axis:"y"},!0)),l.run(1))}),s=!0)},o(c){c&&(l||(l=De(e,Le,{delay:100,duration:200,easing:Fe,axis:"y"},!1)),l.run(0)),s=!1},d(c){c&&H(e),ge(r,c),c&&l&&l.end(),a=!1,fe(i)}}}function zt(t){let e,n=t[8]+"",l,s,a,i;function o(){return t[5](t[8])}return{c(){e=v("button"),l=D(n),s=M(),_(e,"class","item svelte-19hjmee")},m(r,c){w(r,e,c),m(e,l),m(e,s),a||(i=ne(e,"click",o),a=!0)},p(r,c){t=r,c&1&&n!==(n=t[8]+"")&&le(l,n)},d(r){r&&H(e),a=!1,i()}}}function Vl(t){let e,n,l,s,a,i,o=t[2]&&Lt(t);return{c(){e=v("div"),n=v("button"),l=D(t[1]),s=M(),o&&o.c(),_(n,"class","select svelte-19hjmee"),_(e,"class","input svelte-19hjmee")},m(r,c){w(r,e,c),m(e,n),m(n,l),m(e,s),o&&o.m(e,null),a||(i=ne(n,"click",t[4]),a=!0)},p(r,[c]){c&2&&le(l,r[1]),r[2]?o?(o.p(r,c),c&4&&b(o,1)):(o=Lt(r),o.c(),b(o,1),o.m(e,null)):o&&(ee(),k(o,1,1,()=>{o=null}),te())},i(r){b(o)},o(r){k(o)},d(r){r&&H(e),o&&o.d(),a=!1,i()}}}function Nl(t,e,n){let{options:l=[""]}=e,{value:s}=e;const a=ue();let i=!1;const o=u=>{n(2,i=!1),a("select",u)},r=()=>n(2,i=!0),c=u=>o(u),f=()=>n(2,i=!1);return t.$$set=u=>{"options"in u&&n(0,l=u.options),"value"in u&&n(1,s=u.value)},[l,s,i,o,r,c,f]}class Wl extends V{constructor(e){super(),B(this,e,Nl,Vl,I,{options:0,value:1})}}const Ee=()=>[{title:"Cleric",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"War Hammer (d10, bulky)",inHand:!1,fatigue:!1},{title:"Chainmail (2 Armor, bulky)",inHand:!1,fatigue:!1},{title:"Gauntlets (+1 Armor)",inHand:!1,fatigue:!1},{title:"Cleansing Blade (d6)",inHand:!1,fatigue:!1},{title:"Holy Symbol (Ward once per day)",inHand:!1,fatigue:!1},{title:"Cloak of the Order",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Dowser",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Sickle (d6)",inHand:!1,fatigue:!1},{title:"Patchwork Doublet (+1 Armor)",inHand:!1,fatigue:!1},{title:"Dowsing Rod",inHand:!1,fatigue:!1},{title:"Eyestone (Sense if placed in fresh water)",inHand:!1,fatigue:!1},{title:"Worn Map",inHand:!1,fatigue:!1},{title:"Spyglass",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Dwarf",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Prickly Root (d6)",inHand:!1,fatigue:!1},{title:"Pinecone Lattice (1 Armor)",inHand:!1,fatigue:!1},{title:"Trowel",inHand:!1,fatigue:!1},{title:"Jar of Forest Ants",inHand:!1,fatigue:!1},{title:"Poisonous mushroom",inHand:!1,fatigue:!1},{title:"Hand Drill",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Elf",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Elegant Sword (d8)",inHand:!1,fatigue:!1},{title:"Recurve Bow (d8)",inHand:!1,fatigue:!1},{title:"Gilt Clothing (1 Armor)",inHand:!1,fatigue:!1},{title:"Spellbook (Detect Magic)",inHand:!1,fatigue:!1},{title:"Golden Flute",inHand:!1,fatigue:!1},{title:"Air Bladder",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Fighter",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Glaive (d10, bulky)",inHand:!1,fatigue:!1},{title:"Scimitar (d8)",inHand:!1,fatigue:!1},{title:"Shortsword (d6)",inHand:!1,fatigue:!1},{title:"Shortsword (d6)",inHand:!1,fatigue:!1},{title:"Tobacco Pouch & Pipe",inHand:!1,fatigue:!1},{title:"Dice Set",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Friar",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Scepter (d6)",inHand:!1,fatigue:!1},{title:"Deceptive Robes (+1 Armor)",inHand:!1,fatigue:!1},{title:"Censer & Holy Water",inHand:!1,fatigue:!1},{title:"Jug of Honey Wine",inHand:!1,fatigue:!1},{title:"Folk Songbook",inHand:!1,fatigue:!1},{title:"Cart (+4 slots, bulky)",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Knight",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Longsword (d10, bulky)",inHand:!1,fatigue:!1},{title:"Chainmail (2 Armor, bulky)",inHand:!1,fatigue:!1},{title:"Helmet (+1 Armor)",inHand:!1,fatigue:!1},{title:"Heraldic Cape",inHand:!1,fatigue:!1},{title:"Manacles",inHand:!1,fatigue:!1},{title:"Fine Rope",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Magic User",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Fizzled Staff (d8, bulky)",inHand:!1,fatigue:!1},{title:"Dagger (d6)",inHand:!1,fatigue:!1},{title:`Spellbook (${Xe[z(1,100)]})`,inHand:!1,fatigue:!1},{title:`Spellbook (${Xe[z(1,100)]})`,inHand:!1,fatigue:!1},{title:"Ragged Clothing (hidden pockets)",inHand:!1,fatigue:!1},{title:"Leycap (x2, see Relics)",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Thief",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Two daggers (d6+d6)",inHand:!1,fatigue:!1},{title:"Hooded Jerkin (1 Armor)",inHand:!1,fatigue:!1},{title:"Lockpicks",inHand:!1,fatigue:!1},{title:"Caltrops",inHand:!1,fatigue:!1},{title:"Grappling Hook",inHand:!1,fatigue:!1},{title:"Metal File",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]},{title:"Ranger",inventory:[{title:"Rations (3)",inHand:!1,fatigue:!1},{title:"Torch",inHand:!1,fatigue:!1},{title:"Longbow (d8, bulky)",inHand:!1,fatigue:!1},{title:"Hatchet (d6)",inHand:!1,fatigue:!1},{title:"Padded Leathers (1 Armor)",inHand:!1,fatigue:!1},{title:"Large Trap",inHand:!1,fatigue:!1},{title:"Bloodhound | 2 HP, 12 DEX, bite (d6)",inHand:!1,fatigue:!1},{title:"Thundering Horn",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1},{title:"",inHand:!1,fatigue:!1}]}];function Et(t,e,n){const l=t.slice();return l[13]=e[n],l}function It(t,e,n){const l=t.slice();return l[16]=e[n],l}function Bt(t){let e,n,l,s=t[0][t[16]]+"",a,i,o,r;function c(){return t[8](t[16])}return{c(){e=v("button"),n=D(t[16]),l=D(": "),a=D(s),_(e,"class",i=re(`item${t[2].includes(t[16])?" selected":""}`)+" svelte-1q42ruj")},m(f,u){w(f,e,u),m(e,n),m(e,l),m(e,a),o||(r=ne(e,"click",c),o=!0)},p(f,u){t=f,u&1&&s!==(s=t[0][t[16]]+"")&&le(a,s),u&4&&i!==(i=re(`item${t[2].includes(t[16])?" selected":""}`)+" svelte-1q42ruj")&&_(e,"class",i)},d(f){f&&H(e),o=!1,r()}}}function Vt(t){let e,n=Y(Ee().find(t[10]).inventory),l=[];for(let s=0;s<n.length;s+=1)l[s]=Wt(Et(t,n,s));return{c(){e=v("div");for(let s=0;s<l.length;s+=1)l[s].c();_(e,"class","items-list")},m(s,a){w(s,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(s,a){if(a&2){n=Y(Ee().find(s[10]).inventory);let i;for(i=0;i<n.length;i+=1){const o=Et(s,n,i);l[i]?l[i].p(o,a):(l[i]=Wt(o),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(s){s&&H(e),ge(l,s)}}}function Nt(t){let e,n=t[13].title+"",l;return{c(){e=v("span"),l=D(n),_(e,"class","item svelte-1q42ruj")},m(s,a){w(s,e,a),m(e,l)},p(s,a){a&2&&n!==(n=s[13].title+"")&&le(l,n)},d(s){s&&H(e)}}}function Wt(t){let e,n=t[13].title&&Nt(t);return{c(){n&&n.c(),e=en()},m(l,s){n&&n.m(l,s),w(l,e,s)},p(l,s){l[13].title?n?n.p(l,s):(n=Nt(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(l){l&&H(e),n&&n.d(l)}}}function Gl(t){let e;return{c(){e=D("Back")},m(n,l){w(n,e,l)},d(n){n&&H(e)}}}function Jl(t){let e;return{c(){e=D("Save")},m(n,l){w(n,e,l)},d(n){n&&H(e)}}}function Yl(t){let e,n,l,s,a,i,o,r,c,f,u,d,g,h,y,p,$,P,T,R,N,F,X,S,q,G,me;a=new lt({props:{value:t[0].name,placeholder:"Name"}}),a.$on("input",t[7]);let $e=Y(["str","dex","wil"]),U=[];for(let O=0;O<3;O+=1)U[O]=Bt(It(t,$e,O));P=new Wl({props:{options:t[4],value:t[1]}}),P.$on("select",t[9]);let W=t[1]!=="random"&&Vt(t);return S=new Z({props:{$$slots:{default:[Gl]},$$scope:{ctx:t}}}),S.$on("click",t[11]),G=new Z({props:{disabled:!t[0].name,$$slots:{default:[Jl]},$$scope:{ctx:t}}}),G.$on("click",t[12]),{c(){e=v("div"),n=v("h2"),n.textContent="Create a character",l=M(),s=v("div"),j(a.$$.fragment),i=M(),o=v("section"),r=v("div"),r.innerHTML='<span class="text svelte-1q42ruj">Stats</span>',c=M(),f=v("div");for(let O=0;O<3;O+=1)U[O].c();u=M(),d=v("span"),d.textContent=`You can swap two of your stats by selecting or deselecting them with a
        click, and the change will take effect after character creation.`,g=M(),h=v("section"),y=v("div"),y.innerHTML='<span class="text svelte-1q42ruj">Starting gear</span>',p=M(),$=v("div"),j(P.$$.fragment),T=M(),R=v("span"),R.textContent=`You can use randomly generated starting gear or choose one of the
        starting packages.`,N=M(),W&&W.c(),F=M(),X=v("div"),j(S.$$.fragment),q=M(),j(G.$$.fragment),_(n,"class","title svelte-1q42ruj"),_(s,"class","name svelte-1q42ruj"),_(r,"class","heading svelte-1q42ruj"),_(d,"class","info svelte-1q42ruj"),_(f,"class","stats svelte-1q42ruj"),_(o,"class","wrap svelte-1q42ruj"),_(y,"class","heading svelte-1q42ruj"),_(R,"class","info svelte-1q42ruj"),_($,"class","inventory svelte-1q42ruj"),_(h,"class","wrap svelte-1q42ruj"),_(X,"class","controls svelte-1q42ruj"),_(e,"class","form svelte-1q42ruj")},m(O,L){w(O,e,L),m(e,n),m(e,l),m(e,s),C(a,s,null),m(e,i),m(e,o),m(o,r),m(o,c),m(o,f);for(let se=0;se<3;se+=1)U[se]&&U[se].m(f,null);m(f,u),m(f,d),m(e,g),m(e,h),m(h,y),m(h,p),m(h,$),C(P,$,null),m($,T),m($,R),m($,N),W&&W.m($,null),m(e,F),m(e,X),C(S,X,null),m(X,q),C(G,X,null),me=!0},p(O,[L]){const se={};if(L&1&&(se.value=O[0].name),a.$set(se),L&37){$e=Y(["str","dex","wil"]);let x;for(x=0;x<3;x+=1){const it=It(O,$e,x);U[x]?U[x].p(it,L):(U[x]=Bt(it),U[x].c(),U[x].m(f,u))}for(;x<3;x+=1)U[x].d(1)}const st={};L&2&&(st.value=O[1]),P.$set(st),O[1]!=="random"?W?W.p(O,L):(W=Vt(O),W.c(),W.m($,null)):W&&(W.d(1),W=null);const at={};L&524288&&(at.$$scope={dirty:L,ctx:O}),S.$set(at);const Ie={};L&1&&(Ie.disabled=!O[0].name),L&524288&&(Ie.$$scope={dirty:L,ctx:O}),G.$set(Ie)},i(O){me||(b(a.$$.fragment,O),b(P.$$.fragment,O),b(S.$$.fragment,O),b(G.$$.fragment,O),me=!0)},o(O){k(a.$$.fragment,O),k(P.$$.fragment,O),k(S.$$.fragment,O),k(G.$$.fragment,O),me=!1},d(O){O&&H(e),A(a),ge(U,O),A(P),W&&W.d(),A(S),A(G)}}}function Ul(t,e,n){const l=ue();let s={name:"",str:z(3,6),dex:z(3,6),wil:z(3,6),hp:z(1,6),gp:z(3,6)},a=["random",...Ee().map(p=>p.title)],i=a[0],o=[];const r=p=>{if(o.includes(p)){const $=o.indexOf(p,0);$!==-1&&(o.splice($,1),n(2,o=[...o]))}else{if(o.length>=2)return;n(2,o=[...o,p])}},c=()=>{if(o.length===2){const p=s[o[0]],$=s[o[1]];n(0,s[o[0]]=$,s),n(0,s[o[1]]=p,s)}ce.set(s.name),ae.set({str:s.str,dex:s.dex,wil:s.wil,strMax:s.str,dexMax:s.dex,wilMax:s.wil}),K.set({hp:s.hp,hpMax:s.hp,armor:0,deprived:!1}),_e.set({gp:s.gp.toString(),sp:"0",cp:"0"}),de.set(i==="random"?Bl():Ee().find(p=>p.title===i).inventory),J()};return[s,i,o,l,a,r,c,p=>n(0,s.name=p.detail,s),p=>r(p),p=>n(1,i=p.detail),p=>p.title===i,()=>l("hide-form"),()=>c()]}class Kl extends V{constructor(e){super(),B(this,e,Ul,Yl,I,{})}}const cn=t=>{const e=nt();let n=!0;return Object.keys(e).forEach(l=>{Object.keys(t).includes(l)||(console.log(e,t),n=!1)}),n},Xl=t=>{if(t.target){const e=new FileReader;e.onload=()=>{if(e.result){const l=JSON.parse(e.result);cn(l)&&(ce.set(l.name),ae.set(l.abilities),K.set(l.stats),_e.set(l.coins),de.set(l.inventory),Q.set(l.scars))}};const n=t.target.files;n&&e.readAsText(n[0])}};function Ql(t){let e,n,l,s,a,i;return{c(){e=v("div"),n=v("input"),l=M(),s=v("label"),s.textContent="Upload the character (json)",_(n,"id","upload"),_(n,"type","file"),_(s,"for","upload"),_(s,"class","label svelte-gdmlp7"),_(e,"class","file svelte-gdmlp7")},m(o,r){w(o,e,r),m(e,n),m(e,l),m(e,s),a||(i=ne(n,"change",t[1]),a=!0)},p:E,i:E,o:E,d(o){o&&H(e),a=!1,i()}}}function Zl(t){const e=ue();return[e,l=>e("change",l)]}class xl extends V{constructor(e){super(),B(this,e,Zl,Ql,I,{})}}function es(t){let e;return{c(){e=D("Roll a character")},m(n,l){w(n,e,l)},d(n){n&&H(e)}}}function ts(t){let e;return{c(){e=D("Wrong file type or json structure")},m(n,l){w(n,e,l)},d(n){n&&H(e)}}}function ns(t){let e,n,l,s,a,i,o;return n=new Z({props:{$$slots:{default:[es]},$$scope:{ctx:t}}}),n.$on("click",t[3]),s=new xl({}),s.$on("change",t[4]),i=new Oe({props:{submission:!0,isShown:t[0],$$slots:{default:[ts]},$$scope:{ctx:t}}}),i.$on("cancel",t[5]),{c(){e=v("div"),j(n.$$.fragment),l=M(),j(s.$$.fragment),a=M(),j(i.$$.fragment),_(e,"class","menu svelte-1d6aguc")},m(r,c){w(r,e,c),C(n,e,null),m(e,l),C(s,e,null),w(r,a,c),C(i,r,c),o=!0},p(r,[c]){const f={};c&128&&(f.$$scope={dirty:c,ctx:r}),n.$set(f);const u={};c&1&&(u.isShown=r[0]),c&128&&(u.$$scope={dirty:c,ctx:r}),i.$set(u)},i(r){o||(b(n.$$.fragment,r),b(s.$$.fragment,r),b(i.$$.fragment,r),o=!0)},o(r){k(n.$$.fragment,r),k(s.$$.fragment,r),k(i.$$.fragment,r),o=!1},d(r){r&&(H(e),H(a)),A(n),A(s),A(i,r)}}}function ls(t,e,n){let l;ie(t,ce,f=>n(6,l=f));const s=ue();let a=!1;const i=f=>{Xl(f.detail),l.length||n(0,a=!0)};return[a,s,i,()=>s("show-form"),f=>i(f),()=>n(0,a=!1)]}class ss extends V{constructor(e){super(),B(this,e,ls,ns,I,{})}}function as(t){let e,n;return e=new Kl({}),e.$on("hide-form",t[2]),{c(){j(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},p:E,i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function is(t){let e,n,l,s;return l=new ss({}),l.$on("show-form",t[1]),{c(){e=v("div"),e.innerHTML=`<h1 class="title svelte-1lq65eu">Pocket Cairn
        <span class="version svelte-1lq65eu">v.0.1</span></h1> <span class="info svelte-1lq65eu">Cairn is a game created by
        <a href="https://newschoolrevolution.com" class="svelte-1lq65eu">Yochai Gal</a><br/>
        Official game page -
        <a href="cairnrpg.com" class="svelte-1lq65eu">cairnrpg.com</a><br/>
        Rate or comment this application on
        <a href="https://github.com/BrightsDays/mobile-cairn" class="svelte-1lq65eu">GitHub</a> :)</span>`,n=M(),j(l.$$.fragment),_(e,"class","header svelte-1lq65eu")},m(a,i){w(a,e,i),w(a,n,i),C(l,a,i),s=!0},p:E,i(a){s||(b(l.$$.fragment,a),s=!0)},o(a){k(l.$$.fragment,a),s=!1},d(a){a&&(H(e),H(n)),A(l,a)}}}function rs(t){let e,n,l,s;const a=[is,as],i=[];function o(r,c){return r[0]?1:0}return n=o(t),l=i[n]=a[n](t),{c(){e=v("div"),l.c(),_(e,"class","creation svelte-1lq65eu")},m(r,c){w(r,e,c),i[n].m(e,null),s=!0},p(r,[c]){let f=n;n=o(r),n===f?i[n].p(r,c):(ee(),k(i[f],1,1,()=>{i[f]=null}),te(),l=i[n],l?l.p(r,c):(l=i[n]=a[n](r),l.c()),b(l,1),l.m(e,null))},i(r){s||(b(l),s=!0)},o(r){k(l),s=!1},d(r){r&&H(e),i[n].d()}}}function os(t,e,n){let l=!1;return[l,()=>n(0,l=!0),()=>n(0,l=!1)]}class cs extends V{constructor(e){super(),B(this,e,os,rs,I,{})}}function fs(t){let e,n;return e=new cs({}),{c(){j(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function us(t){let e,n;return e=new El({}),{c(){j(e.$$.fragment)},m(l,s){C(e,l,s),n=!0},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){A(e,l)}}}function ds(t){let e,n,l,s;const a=[us,fs],i=[];function o(r,c){return r[0]?0:1}return n=o(t),l=i[n]=a[n](t),{c(){e=v("main"),l.c()},m(r,c){w(r,e,c),i[n].m(e,null),s=!0},p(r,[c]){let f=n;n=o(r),n!==f&&(ee(),k(i[f],1,1,()=>{i[f]=null}),te(),l=i[n],l||(l=i[n]=a[n](r),l.c()),b(l,1),l.m(e,null))},i(r){s||(b(l),s=!0)},o(r){k(l),s=!1},d(r){r&&H(e),i[n].d()}}}function hs(t,e,n){let l;ie(t,ce,a=>n(1,l=a));let s=l;return ce.subscribe(a=>n(0,s=a)),kn(()=>{const a=localStorage.getItem("pc__character");a&&cn(JSON.parse(a))&&(ce.set(JSON.parse(a).name),ae.set(JSON.parse(a).abilities),K.set(JSON.parse(a).stats),_e.set(JSON.parse(a).coins),de.set(JSON.parse(a).inventory),Q.set(JSON.parse(a).scars))}),[s]}class gs extends V{constructor(e){super(),B(this,e,hs,ds,I,{})}}new gs({target:document.getElementById("app")});
